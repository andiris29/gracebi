window.Modernizr = function(ab, aa, Z) {
    function F(b) {
        T.cssText = b
    }
    function E(d, c) {
        return F(Q.join(d + ";") + (c || ""))
    }
    function D(d, c) {
        return typeof d === c
    }
    function C(d, c) {
        return !!~("" + d).indexOf(c)
    }
    function B(g, c, k) {
        for (var j in g) {
            var h = c[g[j]];
            if (h !== Z) {
                return k === !1 ? g[j] : D(h, "function") ? h.bind(k || c) : h
            }
        }
        return !1
    }
    var Y = "2.7.1", X = {}, W = aa.documentElement, V = "modernizr", U = aa.createElement(V), T = U.style, S, R = {}.toString, Q = " -webkit- -moz- -o- -ms- ".split(" "), P = {}, O = {}, N = {}, M = [], K = M.slice, J, I = function(w, v, u, t) {
        var s, r, q, p, g = aa.createElement("div"), f = aa.body, b = f || aa.createElement("body");
        if (parseInt(u, 10)) {
            while (u--) {
                q = aa.createElement("div"),
                q.id = t ? t[u] : V + (u + 1),
                g.appendChild(q)
            }
        }
        return s = ["&#173;", '<style id="s', V, '">', w, "</style>"].join(""),
        g.id = V,
        (f ? g : b).innerHTML += s,
        b.appendChild(g),
        f || (b.style.background = "",
        b.style.overflow = "hidden",
        p = W.style.overflow,
        W.style.overflow = "hidden",
        W.appendChild(b)),
        r = v(g, w),
        f ? g.parentNode.removeChild(g) : (b.parentNode.removeChild(b),
        W.style.overflow = p),
        !!r
    }
    , H = {}.hasOwnProperty, G;
    !D(H, "undefined") && !D(H.call, "undefined") ? G = function(d, c) {
        return H.call(d, c)
    }
     : G = function(d, c) {
        return c in d && D(d.constructor.prototype[c], "undefined")
    }
    ,
    Function.prototype.bind || (Function.prototype.bind = function(a) {
        var h = this;
        if (typeof h != "function") {
            throw new TypeError
        }
        var g = K.call(arguments, 1)
          , f = function() {
            if (this instanceof f) {
                var b = function() {}
                ;
                b.prototype = h.prototype;
                var d = new b
                  , c = h.apply(d, g.concat(K.call(arguments)));
                return Object(c) === c ? c : d
            }
            return h.apply(a, g.concat(K.call(arguments)))
        }
        ;
        return f
    }
    ),
    P.touch = function() {
        var a;
        return "ontouchstart" in ab || ab.DocumentTouch && aa instanceof DocumentTouch ? a = !0 : I(["@media (", Q.join("touch-enabled),("), V, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function(b) {
            a = b.offsetTop === 9
        }
        ),
        a
    }
    ;
    for (var L in P) {
        G(P, L) && (J = L.toLowerCase(),
        X[J] = P[L](),
        M.push((X[J] ? "" : "no-") + J))
    }
    return X.addTest = function(e, c) {
        if (typeof e == "object") {
            for (var f in e) {
                G(e, f) && X.addTest(f, e[f])
            }
        } else {
            e = e.toLowerCase();
            if (X[e] !== Z) {
                return X
            }
            c = typeof c == "function" ? c() : c,
            typeof enableClasses != "undefined" && enableClasses && (W.className += " " + (c ? "" : "no-") + e),
            X[e] = c
        }
        return X
    }
    ,
    F(""),
    U = S = null ,
    X._version = Y,
    X._prefixes = Q,
    X.testStyles = I,
    X
}
(this, this.document);
LazyLoad = (function(k) {
    var g, h, b = {}, e = 0, f = {
        css: [],
        js: []
    }, n = k.styleSheets;
    function m(r, q) {
        var s = k.createElement(r), p;
        for (p in q) {
            if (q.hasOwnProperty(p)) {
                s.setAttribute(p, q[p])
            }
        }
        return s
    }
    function j(q) {
        var s = b[q], t, r;
        if (s) {
            t = s.callback;
            r = s.urls;
            r.shift();
            e = 0;
            if (!r.length) {
                t && t.call(s.context, s.obj);
                b[q] = null ;
                f[q].length && l(q)
            }
        }
    }
    function c() {
        var p = navigator.userAgent;
        g = {
            async: k.createElement("script").async === true
        };
        (g.webkit = /AppleWebKit\//.test(p)) || (g.ie = /MSIE|Trident/.test(p)) || (g.opera = /Opera/.test(p)) || (g.gecko = /Gecko\//.test(p)) || (g.unknown = true)
    }
    function l(B, A, C, x, t) {
        var v = function() {
            j(B)
        }
        , D = B === "css", r = [], w, y, u, s, z, q;
        g || c();
        if (A) {
            A = typeof A === "string" ? [A] : A.concat();
            if (D || g.async || g.gecko || g.opera) {
                f[B].push({
                    urls: A,
                    callback: C,
                    obj: x,
                    context: t
                })
            } else {
                for (w = 0,
                y = A.length; w < y; ++w) {
                    f[B].push({
                        urls: [A[w]],
                        callback: w === y - 1 ? C : null ,
                        obj: x,
                        context: t
                    })
                }
            }
        }
        if (b[B] || !(s = b[B] = f[B].shift())) {
            return
        }
        h || (h = k.head || k.getElementsByTagName("head")[0]);
        z = s.urls;
        for (w = 0,
        y = z.length; w < y; ++w) {
            q = z[w];
            if (D) {
                u = g.gecko ? m("style") : m("link", {
                    href: q,
                    rel: "stylesheet"
                })
            } else {
                u = m("script", {
                    src: q
                });
                u.async = false
            }
            u.className = "lazyload";
            u.setAttribute("charset", "utf-8");
            if (g.ie && !D && "onreadystatechange" in u && !("draggable" in u)) {
                u.onreadystatechange = function() {
                    if (/loaded|complete/.test(u.readyState)) {
                        u.onreadystatechange = null ;
                        v()
                    }
                }
            } else {
                if (D && (g.gecko || g.webkit)) {
                    if (g.webkit) {
                        s.urls[w] = u.href;
                        d()
                    } else {
                        u.innerHTML = '@import "' + q + '";';
                        a(u)
                    }
                } else {
                    u.onload = u.onerror = v
                }
            }
            r.push(u)
        }
        for (w = 0,
        y = r.length; w < y; ++w) {
            h.appendChild(r[w])
        }
    }
    function a(r) {
        var q;
        try {
            q = !!r.sheet.cssRules
        } catch (p) {
            e += 1;
            if (e < 200) {
                setTimeout(function() {
                    a(r)
                }
                , 50)
            } else {
                q && j("css")
            }
            return
        }
        j("css")
    }
    function d() {
        var q = b.css, p;
        if (q) {
            p = n.length;
            while (--p >= 0) {
                if (n[p].href === q.urls[0]) {
                    j("css");
                    break
                }
            }
            e += 1;
            if (q) {
                if (e < 200) {
                    setTimeout(d, 50)
                } else {
                    j("css")
                }
            }
        }
    }
    return {
        css: function(r, s, q, p) {
            l("css", r, s, q, p)
        },
        js: function(r, s, q, p) {
            l("js", r, s, q, p)
        }
    }
}
)(this.document);
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject = function() {
    var F = "undefined", t = "object", U = "Shockwave Flash", Y = "ShockwaveFlash.ShockwaveFlash", s = "application/x-shockwave-flash", T = "SWFObjectExprInst", z = "onreadystatechange", Q = window, k = document, v = navigator, V = false, W = [h], q = [], P = [], K = [], m, S, G, D, L = false, a = false, p, I, n = true, O = function() {
        var ac = typeof k.getElementById != F && typeof k.getElementsByTagName != F && typeof k.createElement != F
          , aj = v.userAgent.toLowerCase()
          , aa = v.platform.toLowerCase()
          , ag = aa ? /win/.test(aa) : /win/.test(aj)
          , ae = aa ? /mac/.test(aa) : /mac/.test(aj)
          , ah = /webkit/.test(aj) ? parseFloat(aj.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : false
          , Z = !+"\v1"
          , ai = [0, 0, 0]
          , ad = null ;
        if (typeof v.plugins != F && typeof v.plugins[U] == t) {
            ad = v.plugins[U].description;
            if (ad && !(typeof v.mimeTypes != F && v.mimeTypes[s] && !v.mimeTypes[s].enabledPlugin)) {
                V = true;
                Z = false;
                ad = ad.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
                ai[0] = parseInt(ad.replace(/^(.*)\..*$/, "$1"), 10);
                ai[1] = parseInt(ad.replace(/^.*\.(.*)\s.*$/, "$1"), 10);
                ai[2] = /[a-zA-Z]/.test(ad) ? parseInt(ad.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0
            }
        } else {
            if (typeof Q.ActiveXObject != F) {
                try {
                    var af = new ActiveXObject(Y);
                    if (af) {
                        ad = af.GetVariable("$version");
                        if (ad) {
                            Z = true;
                            ad = ad.split(" ")[1].split(",");
                            ai = [parseInt(ad[0], 10), parseInt(ad[1], 10), parseInt(ad[2], 10)]
                        }
                    }
                } catch (ab) {}
            }
        }
        return {
            w3: ac,
            pv: ai,
            wk: ah,
            ie: Z,
            win: ag,
            mac: ae
        }
    }
    (), l = function() {
        if (!O.w3) {
            return
        }
        if ((typeof k.readyState != F && k.readyState == "complete") || (typeof k.readyState == F && (k.getElementsByTagName("body")[0] || k.body))) {
            f()
        }
        if (!L) {
            if (typeof k.addEventListener != F) {
                k.addEventListener("DOMContentLoaded", f, false)
            }
            if (O.ie && O.win) {
                k.attachEvent(z, function() {
                    if (k.readyState == "complete") {
                        k.detachEvent(z, arguments.callee);
                        f()
                    }
                }
                );
                if (Q == top) {
                    (function() {
                        if (L) {
                            return
                        }
                        try {
                            k.documentElement.doScroll("left")
                        } catch (Z) {
                            setTimeout(arguments.callee, 0);
                            return
                        }
                        f()
                    }
                    )()
                }
            }
            if (O.wk) {
                (function() {
                    if (L) {
                        return
                    }
                    if (!/loaded|complete/.test(k.readyState)) {
                        setTimeout(arguments.callee, 0);
                        return
                    }
                    f()
                }
                )()
            }
            u(f)
        }
    }
    ();
    function f() {
        if (L) {
            return
        }
        try {
            var ab = k.getElementsByTagName("body")[0].appendChild(E("span"));
            ab.parentNode.removeChild(ab)
        } catch (ac) {
            return
        }
        L = true;
        var Z = W.length;
        for (var aa = 0; aa < Z; aa++) {
            W[aa]()
        }
    }
    function M(Z) {
        if (L) {
            Z()
        } else {
            W[W.length] = Z
        }
    }
    function u(aa) {
        if (typeof Q.addEventListener != F) {
            Q.addEventListener("load", aa, false)
        } else {
            if (typeof k.addEventListener != F) {
                k.addEventListener("load", aa, false)
            } else {
                if (typeof Q.attachEvent != F) {
                    j(Q, "onload", aa)
                } else {
                    if (typeof Q.onload == "function") {
                        var Z = Q.onload;
                        Q.onload = function() {
                            Z();
                            aa()
                        }
                    } else {
                        Q.onload = aa
                    }
                }
            }
        }
    }
    function h() {
        if (V) {
            X()
        } else {
            J()
        }
    }
    function X() {
        var Z = k.getElementsByTagName("body")[0];
        var ac = E(t);
        ac.setAttribute("type", s);
        var ab = Z.appendChild(ac);
        if (ab) {
            var aa = 0;
            (function() {
                if (typeof ab.GetVariable != F) {
                    var ad = ab.GetVariable("$version");
                    if (ad) {
                        ad = ad.split(" ")[1].split(",");
                        O.pv = [parseInt(ad[0], 10), parseInt(ad[1], 10), parseInt(ad[2], 10)]
                    }
                } else {
                    if (aa < 10) {
                        aa++;
                        setTimeout(arguments.callee, 10);
                        return
                    }
                }
                Z.removeChild(ac);
                ab = null ;
                J()
            }
            )()
        } else {
            J()
        }
    }
    function J() {
        var ai = q.length;
        if (ai > 0) {
            for (var ah = 0; ah < ai; ah++) {
                var aa = q[ah].id;
                var ad = q[ah].callbackFn;
                var ac = {
                    success: false,
                    id: aa
                };
                if (O.pv[0] > 0) {
                    var ag = c(aa);
                    if (ag) {
                        if (H(q[ah].swfVersion) && !(O.wk && O.wk < 312)) {
                            y(aa, true);
                            if (ad) {
                                ac.success = true;
                                ac.ref = B(aa);
                                ad(ac)
                            }
                        } else {
                            if (q[ah].expressInstall && C()) {
                                var ak = {};
                                ak.data = q[ah].expressInstall;
                                ak.width = ag.getAttribute("width") || "0";
                                ak.height = ag.getAttribute("height") || "0";
                                if (ag.getAttribute("class")) {
                                    ak.styleclass = ag.getAttribute("class")
                                }
                                if (ag.getAttribute("align")) {
                                    ak.align = ag.getAttribute("align")
                                }
                                var aj = {};
                                var Z = ag.getElementsByTagName("param");
                                var ae = Z.length;
                                for (var af = 0; af < ae; af++) {
                                    if (Z[af].getAttribute("name").toLowerCase() != "movie") {
                                        aj[Z[af].getAttribute("name")] = Z[af].getAttribute("value")
                                    }
                                }
                                R(ak, aj, aa, ad)
                            } else {
                                r(ag);
                                if (ad) {
                                    ad(ac)
                                }
                            }
                        }
                    }
                } else {
                    y(aa, true);
                    if (ad) {
                        var ab = B(aa);
                        if (ab && typeof ab.SetVariable != F) {
                            ac.success = true;
                            ac.ref = ab
                        }
                        ad(ac)
                    }
                }
            }
        }
    }
    function B(ac) {
        var Z = null ;
        var aa = c(ac);
        if (aa && aa.nodeName == "OBJECT") {
            if (typeof aa.SetVariable != F) {
                Z = aa
            } else {
                var ab = aa.getElementsByTagName(t)[0];
                if (ab) {
                    Z = ab
                }
            }
        }
        return Z
    }
    function C() {
        return !a && H("6.0.65") && (O.win || O.mac) && !(O.wk && O.wk < 312)
    }
    function R(ac, ad, Z, ab) {
        a = true;
        G = ab || null ;
        D = {
            success: false,
            id: Z
        };
        var ag = c(Z);
        if (ag) {
            if (ag.nodeName == "OBJECT") {
                m = g(ag);
                S = null 
            } else {
                m = ag;
                S = Z
            }
            ac.id = T;
            if (typeof ac.width == F || (!/%$/.test(ac.width) && parseInt(ac.width, 10) < 310)) {
                ac.width = "310"
            }
            if (typeof ac.height == F || (!/%$/.test(ac.height) && parseInt(ac.height, 10) < 137)) {
                ac.height = "137"
            }
            k.title = k.title.slice(0, 47) + " - Flash Player Installation";
            var af = O.ie && O.win ? "ActiveX" : "PlugIn"
              , ae = "MMredirectURL=" + encodeURI(window.location).toString().replace(/&/g, "%26") + "&MMplayerType=" + af + "&MMdoctitle=" + k.title;
            if (typeof ad.flashvars != F) {
                ad.flashvars += "&" + ae
            } else {
                ad.flashvars = ae
            }
            if (O.ie && O.win && ag.readyState != 4) {
                var aa = E("div");
                Z += "SWFObjectNew";
                aa.setAttribute("id", Z);
                ag.parentNode.insertBefore(aa, ag);
                ag.style.display = "none";
                (function() {
                    if (ag.readyState == 4) {
                        ag.parentNode.removeChild(ag)
                    } else {
                        setTimeout(arguments.callee, 10)
                    }
                }
                )()
            }
            w(ac, ad, Z)
        }
    }
    function r(aa) {
        if (O.ie && O.win && aa.readyState != 4) {
            var Z = E("div");
            aa.parentNode.insertBefore(Z, aa);
            Z.parentNode.replaceChild(g(aa), Z);
            aa.style.display = "none";
            (function() {
                if (aa.readyState == 4) {
                    aa.parentNode.removeChild(aa)
                } else {
                    setTimeout(arguments.callee, 10)
                }
            }
            )()
        } else {
            aa.parentNode.replaceChild(g(aa), aa)
        }
    }
    function g(ae) {
        var ad = E("div");
        if (O.win && O.ie) {
            ad.innerHTML = ae.innerHTML
        } else {
            var aa = ae.getElementsByTagName(t)[0];
            if (aa) {
                var af = aa.childNodes;
                if (af) {
                    var Z = af.length;
                    for (var ab = 0; ab < Z; ab++) {
                        if (!(af[ab].nodeType == 1 && af[ab].nodeName == "PARAM") && !(af[ab].nodeType == 8)) {
                            ad.appendChild(af[ab].cloneNode(true))
                        }
                    }
                }
            }
        }
        return ad
    }
    function w(ak, ai, aa) {
        var Z, ac = c(aa);
        if (O.wk && O.wk < 312) {
            return Z
        }
        if (ac) {
            if (typeof ak.id == F) {
                ak.id = aa
            }
            if (O.ie && O.win) {
                var aj = "";
                for (var ag in ak) {
                    if (ak[ag] != Object.prototype[ag]) {
                        if (ag.toLowerCase() == "data") {
                            ai.movie = ak[ag]
                        } else {
                            if (ag.toLowerCase() == "styleclass") {
                                aj += ' class="' + ak[ag] + '"'
                            } else {
                                if (ag.toLowerCase() != "classid") {
                                    aj += " " + ag + '="' + ak[ag] + '"'
                                }
                            }
                        }
                    }
                }
                var ah = "";
                for (var af in ai) {
                    if (ai[af] != Object.prototype[af]) {
                        ah += '<param name="' + af + '" value="' + ai[af] + '" />'
                    }
                }
                ac.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + aj + ">" + ah + "</object>";
                P[P.length] = ak.id;
                Z = c(ak.id)
            } else {
                var ab = E(t);
                ab.setAttribute("type", s);
                for (var ae in ak) {
                    if (ak[ae] != Object.prototype[ae]) {
                        if (ae.toLowerCase() == "styleclass") {
                            ab.setAttribute("class", ak[ae])
                        } else {
                            if (ae.toLowerCase() != "classid") {
                                ab.setAttribute(ae, ak[ae])
                            }
                        }
                    }
                }
                for (var ad in ai) {
                    if (ai[ad] != Object.prototype[ad] && ad.toLowerCase() != "movie") {
                        e(ab, ad, ai[ad])
                    }
                }
                ac.parentNode.replaceChild(ab, ac);
                Z = ab
            }
        }
        return Z
    }
    function e(ab, Z, aa) {
        var ac = E("param");
        ac.setAttribute("name", Z);
        ac.setAttribute("value", aa);
        ab.appendChild(ac)
    }
    function A(aa) {
        var Z = c(aa);
        if (Z && Z.nodeName == "OBJECT") {
            if (O.ie && O.win) {
                Z.style.display = "none";
                (function() {
                    if (Z.readyState == 4) {
                        b(aa)
                    } else {
                        setTimeout(arguments.callee, 10)
                    }
                }
                )()
            } else {
                Z.parentNode.removeChild(Z)
            }
        }
    }
    function b(ab) {
        var aa = c(ab);
        if (aa) {
            for (var Z in aa) {
                if (typeof aa[Z] == "function") {
                    aa[Z] = null 
                }
            }
            aa.parentNode.removeChild(aa)
        }
    }
    function c(ab) {
        var Z = null ;
        try {
            Z = k.getElementById(ab)
        } catch (aa) {}
        return Z
    }
    function E(Z) {
        return k.createElement(Z)
    }
    function j(ab, Z, aa) {
        ab.attachEvent(Z, aa);
        K[K.length] = [ab, Z, aa]
    }
    function H(ab) {
        var aa = O.pv
          , Z = ab.split(".");
        Z[0] = parseInt(Z[0], 10);
        Z[1] = parseInt(Z[1], 10) || 0;
        Z[2] = parseInt(Z[2], 10) || 0;
        return (aa[0] > Z[0] || (aa[0] == Z[0] && aa[1] > Z[1]) || (aa[0] == Z[0] && aa[1] == Z[1] && aa[2] >= Z[2])) ? true : false
    }
    function x(ae, aa, af, ad) {
        if (O.ie && O.mac) {
            return
        }
        var ac = k.getElementsByTagName("head")[0];
        if (!ac) {
            return
        }
        var Z = (af && typeof af == "string") ? af : "screen";
        if (ad) {
            p = null ;
            I = null 
        }
        if (!p || I != Z) {
            var ab = E("style");
            ab.setAttribute("type", "text/css");
            ab.setAttribute("media", Z);
            p = ac.appendChild(ab);
            if (O.ie && O.win && typeof k.styleSheets != F && k.styleSheets.length > 0) {
                p = k.styleSheets[k.styleSheets.length - 1]
            }
            I = Z
        }
        if (O.ie && O.win) {
            if (p && typeof p.addRule == t) {
                p.addRule(ae, aa)
            }
        } else {
            if (p && typeof k.createTextNode != F) {
                p.appendChild(k.createTextNode(ae + " {" + aa + "}"))
            }
        }
    }
    function y(ab, Z) {
        if (!n) {
            return
        }
        var aa = Z ? "visible" : "hidden";
        if (L && c(ab)) {
            c(ab).style.visibility = aa
        } else {
            x("#" + ab, "visibility:" + aa)
        }
    }
    function N(aa) {
        var ab = /[\\\"<>\.;]/;
        var Z = ab.exec(aa) != null ;
        return Z && typeof encodeURIComponent != F ? encodeURIComponent(aa) : aa
    }
    var d = function() {
        if (O.ie && O.win) {
            window.attachEvent("onunload", function() {
                var ae = K.length;
                for (var ad = 0; ad < ae; ad++) {
                    K[ad][0].detachEvent(K[ad][1], K[ad][2])
                }
                var ab = P.length;
                for (var ac = 0; ac < ab; ac++) {
                    A(P[ac])
                }
                for (var aa in O) {
                    O[aa] = null 
                }
                O = null ;
                for (var Z in swfobject) {
                    swfobject[Z] = null 
                }
                swfobject = null 
            }
            )
        }
    }
    ();
    return {
        registerObject: function(ad, Z, ac, ab) {
            if (O.w3 && ad && Z) {
                var aa = {};
                aa.id = ad;
                aa.swfVersion = Z;
                aa.expressInstall = ac;
                aa.callbackFn = ab;
                q[q.length] = aa;
                y(ad, false)
            } else {
                if (ab) {
                    ab({
                        success: false,
                        id: ad
                    })
                }
            }
        },
        getObjectById: function(Z) {
            if (O.w3) {
                return B(Z)
            }
        },
        embedSWF: function(ad, aj, ag, ai, aa, ac, ab, af, ah, ae) {
            var Z = {
                success: false,
                id: aj
            };
            if (O.w3 && !(O.wk && O.wk < 312) && ad && aj && ag && ai && aa) {
                y(aj, false);
                M(function() {
                    ag += "";
                    ai += "";
                    var al = {};
                    if (ah && typeof ah === t) {
                        for (var an in ah) {
                            al[an] = ah[an]
                        }
                    }
                    al.data = ad;
                    al.width = ag;
                    al.height = ai;
                    var ao = {};
                    if (af && typeof af === t) {
                        for (var am in af) {
                            ao[am] = af[am]
                        }
                    }
                    if (ab && typeof ab === t) {
                        for (var ak in ab) {
                            if (typeof ao.flashvars != F) {
                                ao.flashvars += "&" + ak + "=" + ab[ak]
                            } else {
                                ao.flashvars = ak + "=" + ab[ak]
                            }
                        }
                    }
                    if (H(aa)) {
                        var ap = w(al, ao, aj);
                        if (al.id == aj) {
                            y(aj, true)
                        }
                        Z.success = true;
                        Z.ref = ap
                    } else {
                        if (ac && C()) {
                            al.data = ac;
                            R(al, ao, aj, ae);
                            return
                        } else {
                            y(aj, true)
                        }
                    }
                    if (ae) {
                        ae(Z)
                    }
                }
                )
            } else {
                if (ae) {
                    ae(Z)
                }
            }
        },
        switchOffAutoHideShow: function() {
            n = false
        },
        ua: O,
        getFlashPlayerVersion: function() {
            return {
                major: O.pv[0],
                minor: O.pv[1],
                release: O.pv[2]
            }
        },
        hasFlashPlayerVersion: H,
        createSWF: function(ab, aa, Z) {
            if (O.w3) {
                return w(ab, aa, Z)
            } else {
                return undefined
            }
        },
        showExpressInstall: function(ab, ac, Z, aa) {
            if (O.w3 && C()) {
                R(ab, ac, Z, aa)
            }
        },
        removeSWF: function(Z) {
            if (O.w3) {
                A(Z)
            }
        },
        createCSS: function(ac, ab, aa, Z) {
            if (O.w3) {
                x(ac, ab, aa, Z)
            }
        },
        addDomLoadEvent: M,
        addLoadEvent: u,
        getQueryParamValue: function(ac) {
            var ab = k.location.search || k.location.hash;
            if (ab) {
                if (/\?/.test(ab)) {
                    ab = ab.split("?")[1]
                }
                if (ac == null ) {
                    return N(ab)
                }
                var aa = ab.split("&");
                for (var Z = 0; Z < aa.length; Z++) {
                    if (aa[Z].substring(0, aa[Z].indexOf("=")) == ac) {
                        return N(aa[Z].substring((aa[Z].indexOf("=") + 1)))
                    }
                }
            }
            return ""
        },
        expressInstallCallback: function() {
            if (a) {
                var Z = c(T);
                if (Z && m) {
                    Z.parentNode.replaceChild(m, Z);
                    if (S) {
                        y(S, true);
                        if (O.ie && O.win) {
                            m.style.display = "block"
                        }
                    }
                    if (G) {
                        G(D)
                    }
                }
                a = false
            }
        }
    }
}
();
(function() {
    var ai = this
      , ac = ai._
      , ae = {}
      , ar = Array.prototype
      , ab = Object.prototype
      , an = Function.prototype
      , aw = ar.push
      , ah = ar.slice
      , au = ar.concat
      , ak = ab.toString
      , aq = ab.hasOwnProperty
      , ad = ar.forEach
      , ag = ar.map
      , ao = ar.reduce
      , aa = ar.reduceRight
      , at = ar.filter
      , ap = ar.every
      , aj = ar.some
      , X = ar.indexOf
      , av = ar.lastIndexOf
      , Y = Array.isArray
      , ax = Object.keys
      , am = an.bind
      , Z = function(a) {
        return a instanceof Z ? a : this instanceof Z ? (this._wrapped = a,
        void 0) : new Z(a)
    }
    ;
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = Z),
    exports._ = Z) : ai._ = Z,
    Z.VERSION = "1.4.4";
    var W = Z.each = Z.forEach = function(h, f, g) {
        if (null  != h) {
            if (ad && h.forEach === ad) {
                h.forEach(f, g)
            } else {
                if (h.length === +h.length) {
                    for (var c = 0, d = h.length; d > c; c++) {
                        if (f.call(g, h[c], c, h) === ae) {
                            return
                        }
                    }
                } else {
                    for (var b in h) {
                        if (Z.has(h, b) && f.call(g, h[b], b, h) === ae) {
                            return
                        }
                    }
                }
            }
        }
    }
    ;
    Z.map = Z.collect = function(d, a, b) {
        var c = [];
        return null  == d ? c : ag && d.map === ag ? d.map(a, b) : (W(d, function(g, e, f) {
            c[c.length] = a.call(b, g, e, f)
        }
        ),
        c)
    }
    ;
    var H = "Reduce of empty array with no initial value";
    Z.reduce = Z.foldl = Z.inject = function(f, b, c, d) {
        var a = arguments.length > 2;
        if (null  == f && (f = []),
        ao && f.reduce === ao) {
            return d && (b = Z.bind(b, d)),
            a ? f.reduce(b, c) : f.reduce(b)
        }
        if (W(f, function(h, g, e) {
            a ? c = b.call(d, c, h, g, e) : (c = h,
            a = !0)
        }
        ),
        !a) {
            throw new TypeError(H)
        }
        return c
    }
    ,
    Z.reduceRight = Z.foldr = function(j, f, g, h) {
        var c = arguments.length > 2;
        if (null  == j && (j = []),
        aa && j.reduceRight === aa) {
            return h && (f = Z.bind(f, h)),
            c ? j.reduceRight(f, g) : j.reduceRight(f)
        }
        var d = j.length;
        if (d !== +d) {
            var b = Z.keys(j);
            d = b.length
        }
        if (W(j, function(e, k, a) {
            k = b ? b[--d] : --d,
            c ? g = f.call(h, g, j[k], k, a) : (g = j[k],
            c = !0)
        }
        ),
        !c) {
            throw new TypeError(H)
        }
        return g
    }
    ,
    Z.find = Z.detect = function(d, a, b) {
        var c;
        return Q(d, function(g, e, f) {
            return a.call(b, g, e, f) ? (c = g,
            !0) : void 0
        }
        ),
        c
    }
    ,
    Z.filter = Z.select = function(d, a, b) {
        var c = [];
        return null  == d ? c : at && d.filter === at ? d.filter(a, b) : (W(d, function(g, e, f) {
            a.call(b, g, e, f) && (c[c.length] = g)
        }
        ),
        c)
    }
    ,
    Z.reject = function(c, a, b) {
        return Z.filter(c, function(g, f, d) {
            return !a.call(b, g, f, d)
        }
        , b)
    }
    ,
    Z.every = Z.all = function(d, b, c) {
        b || (b = Z.identity);
        var a = !0;
        return null  == d ? a : ap && d.every === ap ? d.every(b, c) : (W(d, function(g, f, e) {
            return (a = a && b.call(c, g, f, e)) ? void 0 : ae
        }
        ),
        !!a)
    }
    ;
    var Q = Z.some = Z.any = function(d, b, c) {
        b || (b = Z.identity);
        var a = !1;
        return null  == d ? a : aj && d.some === aj ? d.some(b, c) : (W(d, function(g, f, e) {
            return a || (a = b.call(c, g, f, e)) ? ae : void 0
        }
        ),
        !!a)
    }
    ;
    Z.contains = Z.include = function(b, a) {
        return null  == b ? !1 : X && b.indexOf === X ? b.indexOf(a) != -1 : Q(b, function(c) {
            return c === a
        }
        )
    }
    ,
    Z.invoke = function(d, a) {
        var b = ah.call(arguments, 2)
          , c = Z.isFunction(a);
        return Z.map(d, function(e) {
            return (c ? a : e[a]).apply(e, b)
        }
        )
    }
    ,
    Z.pluck = function(b, a) {
        return Z.map(b, function(c) {
            return c[a]
        }
        )
    }
    ,
    Z.where = function(c, a, b) {
        return Z.isEmpty(a) ? b ? null  : [] : Z[b ? "find" : "filter"](c, function(e) {
            for (var d in a) {
                if (a[d] !== e[d]) {
                    return !1
                }
            }
            return !0
        }
        )
    }
    ,
    Z.findWhere = function(b, a) {
        return Z.where(b, a, !0)
    }
    ,
    Z.max = function(d, a, b) {
        if (!a && Z.isArray(d) && d[0] === +d[0] && 65535 > d.length) {
            return Math.max.apply(Math, d)
        }
        if (!a && Z.isEmpty(d)) {
            return -1 / 0
        }
        var c = {
            computed: -1 / 0,
            value: -1 / 0
        };
        return W(d, function(h, f, g) {
            var e = a ? a.call(b, h, f, g) : h;
            e >= c.computed && (c = {
                value: h,
                computed: e
            })
        }
        ),
        c.value
    }
    ,
    Z.min = function(d, a, b) {
        if (!a && Z.isArray(d) && d[0] === +d[0] && 65535 > d.length) {
            return Math.min.apply(Math, d)
        }
        if (!a && Z.isEmpty(d)) {
            return 1 / 0
        }
        var c = {
            computed: 1 / 0,
            value: 1 / 0
        };
        return W(d, function(h, f, g) {
            var e = a ? a.call(b, h, f, g) : h;
            c.computed > e && (c = {
                value: h,
                computed: e
            })
        }
        ),
        c.value
    }
    ,
    Z.shuffle = function(d) {
        var a, b = 0, c = [];
        return W(d, function(e) {
            a = Z.random(b++),
            c[b - 1] = c[a],
            c[a] = e
        }
        ),
        c
    }
    ;
    var al = function(a) {
        return Z.isFunction(a) ? a : function(b) {
            return b[a]
        }
    }
    ;
    Z.sortBy = function(d, a, b) {
        var c = al(a);
        return Z.pluck(Z.map(d, function(g, f, e) {
            return {
                value: g,
                index: f,
                criteria: c.call(b, g, f, e)
            }
        }
        ).sort(function(j, f) {
            var g = j.criteria
              , h = f.criteria;
            if (g !== h) {
                if (g > h || g === void 0) {
                    return 1
                }
                if (h > g || h === void 0) {
                    return -1
                }
            }
            return j.index < f.index ? -1 : 1
        }
        ), "value")
    }
    ;
    var P = function(g, c, d, f) {
        var a = {}
          , b = al(c || Z.identity);
        return W(g, function(h, e) {
            var j = b.call(d, h, e, g);
            f(a, j, h)
        }
        ),
        a
    }
    ;
    Z.groupBy = function(c, a, b) {
        return P(c, a, b, function(f, d, e) {
            (Z.has(f, d) ? f[d] : f[d] = []).push(e)
        }
        )
    }
    ,
    Z.countBy = function(c, a, b) {
        return P(c, a, b, function(e, d) {
            Z.has(e, d) || (e[d] = 0),
            e[d]++
        }
        )
    }
    ,
    Z.sortedIndex = function(k, f, g, h) {
        g = null  == g ? Z.identity : al(g);
        for (var c = g.call(h, f), d = 0, b = k.length; b > d; ) {
            var j = d + b >>> 1;
            c > g.call(h, k[j]) ? d = j + 1 : b = j
        }
        return d
    }
    ,
    Z.toArray = function(a) {
        return a ? Z.isArray(a) ? ah.call(a) : a.length === +a.length ? Z.map(a, Z.identity) : Z.values(a) : []
    }
    ,
    Z.size = function(a) {
        return null  == a ? 0 : a.length === +a.length ? a.length : Z.keys(a).length
    }
    ,
    Z.first = Z.head = Z.take = function(c, a, b) {
        return null  == c ? void 0 : null  == a || b ? c[0] : ah.call(c, 0, a)
    }
    ,
    Z.initial = function(c, a, b) {
        return ah.call(c, 0, c.length - (null  == a || b ? 1 : a))
    }
    ,
    Z.last = function(c, a, b) {
        return null  == c ? void 0 : null  == a || b ? c[c.length - 1] : ah.call(c, Math.max(c.length - a, 0))
    }
    ,
    Z.rest = Z.tail = Z.drop = function(c, a, b) {
        return ah.call(c, null  == a || b ? 1 : a)
    }
    ,
    Z.compact = function(a) {
        return Z.filter(a, Z.identity)
    }
    ;
    var G = function(c, a, b) {
        return W(c, function(d) {
            Z.isArray(d) ? a ? aw.apply(b, d) : G(d, a, b) : b.push(d)
        }
        ),
        b
    }
    ;
    Z.flatten = function(b, a) {
        return G(b, a, [])
    }
    ,
    Z.without = function(a) {
        return Z.difference(a, ah.call(arguments, 1))
    }
    ,
    Z.uniq = Z.unique = function(j, f, g, h) {
        Z.isFunction(f) && (h = g,
        g = f,
        f = !1);
        var c = g ? Z.map(j, g, h) : j
          , d = []
          , b = [];
        return W(c, function(a, k) {
            (f ? k && b[b.length - 1] === a : Z.contains(b, a)) || (b.push(a),
            d.push(j[k]))
        }
        ),
        d
    }
    ,
    Z.union = function() {
        return Z.uniq(au.apply(ar, arguments))
    }
    ,
    Z.intersection = function(b) {
        var a = ah.call(arguments, 1);
        return Z.filter(Z.uniq(b), function(c) {
            return Z.every(a, function(d) {
                return Z.indexOf(d, c) >= 0
            }
            )
        }
        )
    }
    ,
    Z.difference = function(b) {
        var a = au.apply(ar, ah.call(arguments, 1));
        return Z.filter(b, function(c) {
            return !Z.contains(a, c)
        }
        )
    }
    ,
    Z.zip = function() {
        for (var d = ah.call(arguments), a = Z.max(Z.pluck(d, "length")), b = Array(a), c = 0; a > c; c++) {
            b[c] = Z.pluck(d, "" + c)
        }
        return b
    }
    ,
    Z.object = function(f, b) {
        if (null  == f) {
            return {}
        }
        for (var c = {}, d = 0, a = f.length; a > d; d++) {
            b ? c[f[d]] = b[d] : c[f[d][0]] = f[d][1]
        }
        return c
    }
    ,
    Z.indexOf = function(f, b, c) {
        if (null  == f) {
            return -1
        }
        var d = 0
          , a = f.length;
        if (c) {
            if ("number" != typeof c) {
                return d = Z.sortedIndex(f, b),
                f[d] === b ? d : -1
            }
            d = 0 > c ? Math.max(0, a + c) : c
        }
        if (X && f.indexOf === X) {
            return f.indexOf(b, c)
        }
        for (; a > d; d++) {
            if (f[d] === b) {
                return d
            }
        }
        return -1
    }
    ,
    Z.lastIndexOf = function(f, b, c) {
        if (null  == f) {
            return -1
        }
        var d = null  != c;
        if (av && f.lastIndexOf === av) {
            return d ? f.lastIndexOf(b, c) : f.lastIndexOf(b)
        }
        for (var a = d ? c : f.length; a--; ) {
            if (f[a] === b) {
                return a
            }
        }
        return -1
    }
    ,
    Z.range = function(g, c, d) {
        1 >= arguments.length && (c = g || 0,
        g = 0),
        d = arguments[2] || 1;
        for (var f = Math.max(Math.ceil((c - g) / d), 0), a = 0, b = Array(f); f > a; ) {
            b[a++] = g,
            g += d
        }
        return b
    }
    ,
    Z.bind = function(c, a) {
        if (c.bind === am && am) {
            return am.apply(c, ah.call(arguments, 1))
        }
        var b = ah.call(arguments, 2);
        return function() {
            return c.apply(a, b.concat(ah.call(arguments)))
        }
    }
    ,
    Z.partial = function(b) {
        var a = ah.call(arguments, 1);
        return function() {
            return b.apply(this, a.concat(ah.call(arguments)))
        }
    }
    ,
    Z.bindAll = function(b) {
        var a = ah.call(arguments, 1);
        return 0 === a.length && (a = Z.functions(b)),
        W(a, function(c) {
            b[c] = Z.bind(b[c], b)
        }
        ),
        b
    }
    ,
    Z.memoize = function(c, a) {
        var b = {};
        return a || (a = Z.identity),
        function() {
            var d = a.apply(this, arguments);
            return Z.has(b, d) ? b[d] : b[d] = c.apply(this, arguments)
        }
    }
    ,
    Z.delay = function(c, a) {
        var b = ah.call(arguments, 2);
        return setTimeout(function() {
            return c.apply(null , b)
        }
        , a)
    }
    ,
    Z.defer = function(a) {
        return Z.delay.apply(Z, [a, 1].concat(ah.call(arguments, 1)))
    }
    ,
    Z.throttle = function(k, f) {
        var g, h, c, d, b = 0, j = function() {
            b = new Date,
            c = null ,
            d = k.apply(g, h)
        }
        ;
        return function() {
            var e = new Date
              , a = f - (e - b);
            return g = this,
            h = arguments,
            0 >= a ? (clearTimeout(c),
            c = null ,
            b = e,
            d = k.apply(g, h)) : c || (c = setTimeout(j, a)),
            d
        }
    }
    ,
    Z.debounce = function(f, b, c) {
        var d, a;
        return function() {
            var g = this
              , e = arguments
              , h = function() {
                d = null ,
                c || (a = f.apply(g, e))
            }
              , j = c && !d;
            return clearTimeout(d),
            d = setTimeout(h, b),
            j && (a = f.apply(g, e)),
            a
        }
    }
    ,
    Z.once = function(c) {
        var a, b = !1;
        return function() {
            return b ? a : (b = !0,
            a = c.apply(this, arguments),
            c = null ,
            a)
        }
    }
    ,
    Z.wrap = function(b, a) {
        return function() {
            var c = [b];
            return aw.apply(c, arguments),
            a.apply(this, c)
        }
    }
    ,
    Z.compose = function() {
        var a = arguments;
        return function() {
            for (var b = arguments, c = a.length - 1; c >= 0; c--) {
                b = [a[c].apply(this, b)]
            }
            return b[0]
        }
    }
    ,
    Z.after = function(b, a) {
        return 0 >= b ? a() : function() {
            return 1 > --b ? a.apply(this, arguments) : void 0
        }
    }
    ,
    Z.keys = ax || function(c) {
        if (c !== Object(c)) {
            throw new TypeError("Invalid object")
        }
        var a = [];
        for (var b in c) {
            Z.has(c, b) && (a[a.length] = b)
        }
        return a
    }
    ,
    Z.values = function(c) {
        var a = [];
        for (var b in c) {
            Z.has(c, b) && a.push(c[b])
        }
        return a
    }
    ,
    Z.pairs = function(c) {
        var a = [];
        for (var b in c) {
            Z.has(c, b) && a.push([b, c[b]])
        }
        return a
    }
    ,
    Z.invert = function(c) {
        var a = {};
        for (var b in c) {
            Z.has(c, b) && (a[c[b]] = b)
        }
        return a
    }
    ,
    Z.functions = Z.methods = function(c) {
        var a = [];
        for (var b in c) {
            Z.isFunction(c[b]) && a.push(b)
        }
        return a.sort()
    }
    ,
    Z.extend = function(a) {
        return W(ah.call(arguments, 1), function(b) {
            if (b) {
                for (var c in b) {
                    a[c] = b[c]
                }
            }
        }
        ),
        a
    }
    ,
    Z.pick = function(c) {
        var a = {}
          , b = au.apply(ar, ah.call(arguments, 1));
        return W(b, function(d) {
            d in c && (a[d] = c[d])
        }
        ),
        a
    }
    ,
    Z.omit = function(d) {
        var b = {}
          , c = au.apply(ar, ah.call(arguments, 1));
        for (var a in d) {
            Z.contains(c, a) || (b[a] = d[a])
        }
        return b
    }
    ,
    Z.defaults = function(a) {
        return W(ah.call(arguments, 1), function(b) {
            if (b) {
                for (var c in b) {
                    null  == a[c] && (a[c] = b[c])
                }
            }
        }
        ),
        a
    }
    ,
    Z.clone = function(a) {
        return Z.isObject(a) ? Z.isArray(a) ? a.slice() : Z.extend({}, a) : a
    }
    ,
    Z.tap = function(b, a) {
        return a(b),
        b
    }
    ;
    var L = function(g, q, b, k) {
        if (g === q) {
            return 0 !== g || 1 / g == 1 / q
        }
        if (null  == g || null  == q) {
            return g === q
        }
        g instanceof Z && (g = g._wrapped),
        q instanceof Z && (q = q._wrapped);
        var p = ak.call(g);
        if (p != ak.call(q)) {
            return !1
        }
        switch (p) {
        case "[object String]":
            return g == q + "";
        case "[object Number]":
            return g != +g ? q != +q : 0 == g ? 1 / g == 1 / q : g == +q;
        case "[object Date]":
        case "[object Boolean]":
            return +g == +q;
        case "[object RegExp]":
            return g.source == q.source && g.global == q.global && g.multiline == q.multiline && g.ignoreCase == q.ignoreCase
        }
        if ("object" != typeof g || "object" != typeof q) {
            return !1
        }
        for (var h = b.length; h--; ) {
            if (b[h] == g) {
                return k[h] == q
            }
        }
        b.push(g),
        k.push(q);
        var m = 0
          , d = !0;
        if ("[object Array]" == p) {
            if (m = g.length,
            d = m == q.length) {
                for (; m-- && (d = L(g[m], q[m], b, k)); ) {}
            }
        } else {
            var l = g.constructor
              , j = q.constructor;
            if (l !== j && !(Z.isFunction(l) && l instanceof l && Z.isFunction(j) && j instanceof j)) {
                return !1
            }
            for (var v in g) {
                if (Z.has(g, v) && (m++,
                !(d = Z.has(q, v) && L(g[v], q[v], b, k)))) {
                    break
                }
            }
            if (d) {
                for (v in q) {
                    if (Z.has(q, v) && !m--) {
                        break
                    }
                }
                d = !m
            }
        }
        return b.pop(),
        k.pop(),
        d
    }
    ;
    Z.isEqual = function(b, a) {
        return L(b, a, [], [])
    }
    ,
    Z.isEmpty = function(b) {
        if (null  == b) {
            return !0
        }
        if (Z.isArray(b) || Z.isString(b)) {
            return 0 === b.length
        }
        for (var a in b) {
            if (Z.has(b, a)) {
                return !1
            }
        }
        return !0
    }
    ,
    Z.isElement = function(a) {
        return !(!a || 1 !== a.nodeType)
    }
    ,
    Z.isArray = Y || function(a) {
        return "[object Array]" == ak.call(a)
    }
    ,
    Z.isObject = function(a) {
        return a === Object(a)
    }
    ,
    W(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function(a) {
        Z["is" + a] = function(b) {
            return ak.call(b) == "[object " + a + "]"
        }
    }
    ),
    Z.isArguments(arguments) || (Z.isArguments = function(a) {
        return !(!a || !Z.has(a, "callee"))
    }
    ),
    "function" != typeof /./ && (Z.isFunction = function(a) {
        return "function" == typeof a
    }
    ),
    Z.isFinite = function(a) {
        return isFinite(a) && !isNaN(parseFloat(a))
    }
    ,
    Z.isNaN = function(a) {
        return Z.isNumber(a) && a != +a
    }
    ,
    Z.isBoolean = function(a) {
        return a === !0 || a === !1 || "[object Boolean]" == ak.call(a)
    }
    ,
    Z.isNull = function(a) {
        return null  === a
    }
    ,
    Z.isUndefined = function(a) {
        return a === void 0
    }
    ,
    Z.has = function(b, a) {
        return aq.call(b, a)
    }
    ,
    Z.noConflict = function() {
        return ai._ = ac,
        this
    }
    ,
    Z.identity = function(a) {
        return a
    }
    ,
    Z.times = function(f, b, c) {
        for (var d = Array(f), a = 0; f > a; a++) {
            d[a] = b.call(c, a)
        }
        return d
    }
    ,
    Z.random = function(b, a) {
        return null  == a && (a = b,
        b = 0),
        b + Math.floor(Math.random() * (a - b + 1))
    }
    ;
    var K = {
        escape: {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "/": "&#x2F;"
        }
    };
    K.unescape = Z.invert(K.escape);
    var C = {
        escape: RegExp("[" + Z.keys(K.escape).join("") + "]", "g"),
        unescape: RegExp("(" + Z.keys(K.unescape).join("|") + ")", "g")
    };
    Z.each(["escape", "unescape"], function(a) {
        Z[a] = function(b) {
            return null  == b ? "" : ("" + b).replace(C[a], function(c) {
                return K[a][c]
            }
            )
        }
    }
    ),
    Z.result = function(c, a) {
        if (null  == c) {
            return null 
        }
        var b = c[a];
        return Z.isFunction(b) ? b.call(c) : b
    }
    ,
    Z.mixin = function(a) {
        W(Z.functions(a), function(b) {
            var c = Z[b] = a[b];
            Z.prototype[b] = function() {
                var d = [this._wrapped];
                return aw.apply(d, arguments),
                U.call(this, c.apply(Z, d))
            }
        }
        )
    }
    ;
    var J = 0;
    Z.uniqueId = function(b) {
        var a = ++J + "";
        return b ? b + a : a
    }
    ,
    Z.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var z = /(.)^/
      , af = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "	": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }
      , V = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    Z.template = function(f, m, b) {
        var h;
        b = Z.defaults({}, b, Z.templateSettings);
        var l = RegExp([(b.escape || z).source, (b.interpolate || z).source, (b.evaluate || z).source].join("|") + "|$", "g")
          , g = 0
          , k = "__p+='";
        f.replace(l, function(c, n, p, a, q) {
            return k += f.slice(g, q).replace(V, function(e) {
                return "\\" + af[e]
            }
            ),
            n && (k += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'"),
            p && (k += "'+\n((__t=(" + p + "))==null?'':__t)+\n'"),
            a && (k += "';\n" + a + "\n__p+='"),
            g = q + c.length,
            c
        }
        ),
        k += "';\n",
        b.variable || (k = "with(obj||{}){\n" + k + "}\n"),
        k = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + k + "return __p;\n";
        try {
            h = Function(b.variable || "obj", "_", k)
        } catch (d) {
            throw d.source = k,
            d
        }
        if (m) {
            return h(m, Z)
        }
        var j = function(a) {
            return h.call(this, a, Z)
        }
        ;
        return j.source = "function(" + (b.variable || "obj") + "){\n" + k + "}",
        j
    }
    ,
    Z.chain = function(a) {
        return Z(a).chain()
    }
    ;
    var U = function(a) {
        return this._chain ? Z(a).chain() : a
    }
    ;
    Z.mixin(Z),
    W(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(b) {
        var a = ar[b];
        Z.prototype[b] = function() {
            var c = this._wrapped;
            return a.apply(c, arguments),
            "shift" != b && "splice" != b || 0 !== c.length || delete c[0],
            U.call(this, c)
        }
    }
    ),
    W(["concat", "join", "slice"], function(b) {
        var a = ar[b];
        Z.prototype[b] = function() {
            return U.call(this, a.apply(this._wrapped, arguments))
        }
    }
    ),
    Z.extend(Z.prototype, {
        chain: function() {
            return this._chain = !0,
            this
        },
        value: function() {
            return this._wrapped
        }
    })
}
).call(this);
!function(y, k) {
    function b(g, h) {
        var f, c, a = g.toLowerCase();
        for (h = [].concat(h),
        f = 0; h.length > f; f += 1) {
            if (c = h[f]) {
                if (c.test && c.test(g)) {
                    return !0
                }
                if (c.toLowerCase() === a) {
                    return !0
                }
            }
        }
    }
    var C = k.prototype.trim
      , B = k.prototype.trimRight
      , q = k.prototype.trimLeft
      , m = function(a) {
        return 1 * a || 0
    }
      , j = function(c, f) {
        if (1 > f) {
            return ""
        }
        for (var a = ""; f > 0; ) {
            1 & f && (a += c),
            f >>= 1,
            c += c
        }
        return a
    }
      , A = [].slice
      , z = function(a) {
        return null  == a ? "\\s" : a.source ? a.source : "[" + w.escapeRegExp(a) + "]"
    }
      , D = {
        lt: "<",
        gt: ">",
        quot: '"',
        amp: "&",
        apos: "'"
    }
      , x = {};
    for (var d in D) {
        x[D[d]] = d
    }
    x["'"] = "#39";
    var v = function() {
        function f(g) {
            return Object.prototype.toString.call(g).slice(8, -1).toLowerCase()
        }
        var c = j
          , a = function() {
            return a.cache.hasOwnProperty(arguments[0]) || (a.cache[arguments[0]] = a.parse(arguments[0])),
            a.format.call(null , a.cache[arguments[0]], arguments)
        }
        ;
        return a.format = function(L, K) {
            var E, r, h, J, I, M, G, e = 1, F = L.length, H = "", n = [];
            for (r = 0; F > r; r++) {
                if (H = f(L[r]),
                "string" === H) {
                    n.push(L[r])
                } else {
                    if ("array" === H) {
                        if (J = L[r],
                        J[2]) {
                            for (E = K[e],
                            h = 0; J[2].length > h; h++) {
                                if (!E.hasOwnProperty(J[2][h])) {
                                    throw new Error(v('[_.sprintf] property "%s" does not exist', J[2][h]))
                                }
                                E = E[J[2][h]]
                            }
                        } else {
                            E = J[1] ? K[J[1]] : K[e++]
                        }
                        if (/[^s]/.test(J[8]) && "number" != f(E)) {
                            throw new Error(v("[_.sprintf] expecting number but found %s", f(E)))
                        }
                        switch (J[8]) {
                        case "b":
                            E = E.toString(2);
                            break;
                        case "c":
                            E = k.fromCharCode(E);
                            break;
                        case "d":
                            E = parseInt(E, 10);
                            break;
                        case "e":
                            E = J[7] ? E.toExponential(J[7]) : E.toExponential();
                            break;
                        case "f":
                            E = J[7] ? parseFloat(E).toFixed(J[7]) : parseFloat(E);
                            break;
                        case "o":
                            E = E.toString(8);
                            break;
                        case "s":
                            E = (E = k(E)) && J[7] ? E.substring(0, J[7]) : E;
                            break;
                        case "u":
                            E = Math.abs(E);
                            break;
                        case "x":
                            E = E.toString(16);
                            break;
                        case "X":
                            E = E.toString(16).toUpperCase()
                        }
                        E = /[def]/.test(J[8]) && J[3] && E >= 0 ? "+" + E : E,
                        M = J[4] ? "0" == J[4] ? "0" : J[4].charAt(1) : " ",
                        G = J[6] - k(E).length,
                        I = J[6] ? c(M, G) : "",
                        n.push(J[5] ? E + I : I + E)
                    }
                }
            }
            return n.join("")
        }
        ,
        a.cache = {},
        a.parse = function(F) {
            for (var H = F, E = [], s = [], h = 0; H; ) {
                if (null  !== (E = /^[^\x25]+/.exec(H))) {
                    s.push(E[0])
                } else {
                    if (null  !== (E = /^\x25{2}/.exec(H))) {
                        s.push("%")
                    } else {
                        if (null  === (E = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(H))) {
                            throw new Error("[_.sprintf] huh?")
                        }
                        if (E[2]) {
                            h |= 1;
                            var p = []
                              , g = E[2]
                              , G = [];
                            if (null  === (G = /^([a-z_][a-z_\d]*)/i.exec(g))) {
                                throw new Error("[_.sprintf] huh?")
                            }
                            for (p.push(G[1]); "" !== (g = g.substring(G[0].length)); ) {
                                if (null  !== (G = /^\.([a-z_][a-z_\d]*)/i.exec(g))) {
                                    p.push(G[1])
                                } else {
                                    if (null  === (G = /^\[(\d+)\]/.exec(g))) {
                                        throw new Error("[_.sprintf] huh?")
                                    }
                                    p.push(G[1])
                                }
                            }
                            E[2] = p
                        } else {
                            h |= 2
                        }
                        if (3 === h) {
                            throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")
                        }
                        s.push(E)
                    }
                }
                H = H.substring(E[0].length)
            }
            return s
        }
        ,
        a
    }
    ()
      , w = {
        VERSION: "2.3.0",
        isBlank: function(a) {
            return null  == a && (a = ""),
            /^\s*$/.test(a)
        },
        stripTags: function(a) {
            return null  == a ? "" : k(a).replace(/<\/?[^>]+>/g, "")
        },
        capitalize: function(a) {
            return a = null  == a ? "" : k(a),
            a.charAt(0).toUpperCase() + a.slice(1)
        },
        chop: function(c, a) {
            return null  == c ? [] : (c = k(c),
            a = ~~a,
            a > 0 ? c.match(new RegExp(".{1," + a + "}","g")) : [c])
        },
        clean: function(a) {
            return w.strip(a).replace(/\s+/g, " ")
        },
        count: function(h, g) {
            if (null  == h || null  == g) {
                return 0
            }
            h = k(h),
            g = k(g);
            for (var f = 0, a = 0, c = g.length; ; ) {
                if (a = h.indexOf(g, a),
                -1 === a) {
                    break
                }
                f++,
                a += c
            }
            return f
        },
        chars: function(a) {
            return null  == a ? [] : k(a).split("")
        },
        swapCase: function(a) {
            return null  == a ? "" : k(a).replace(/\S/g, function(c) {
                return c === c.toUpperCase() ? c.toLowerCase() : c.toUpperCase()
            }
            )
        },
        escapeHTML: function(a) {
            return null  == a ? "" : k(a).replace(/[&<>"']/g, function(c) {
                return "&" + x[c] + ";"
            }
            )
        },
        unescapeHTML: function(a) {
            return null  == a ? "" : k(a).replace(/\&([^;]+);/g, function(g, f) {
                var c;
                return f in D ? D[f] : (c = f.match(/^#x([\da-fA-F]+)$/)) ? k.fromCharCode(parseInt(c[1], 16)) : (c = f.match(/^#(\d+)$/)) ? k.fromCharCode(~~c[1]) : g
            }
            )
        },
        escapeRegExp: function(a) {
            return null  == a ? "" : k(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1")
        },
        splice: function(g, h, f, c) {
            var a = w.chars(g);
            return a.splice(~~h, ~~f, c),
            a.join("")
        },
        insert: function(c, f, a) {
            return w.splice(c, f, 0, a)
        },
        include: function(c, a) {
            return "" === a ? !0 : null  == c ? !1 : -1 !== k(c).indexOf(a)
        },
        join: function() {
            var a = A.call(arguments)
              , c = a.shift();
            return null  == c && (c = ""),
            a.join(c)
        },
        lines: function(a) {
            return null  == a ? [] : k(a).split("\n")
        },
        reverse: function(a) {
            return w.chars(a).reverse().join("")
        },
        startsWith: function(c, a) {
            return "" === a ? !0 : null  == c || null  == a ? !1 : (c = k(c),
            a = k(a),
            c.length >= a.length && c.slice(0, a.length) === a)
        },
        endsWith: function(c, a) {
            return "" === a ? !0 : null  == c || null  == a ? !1 : (c = k(c),
            a = k(a),
            c.length >= a.length && c.slice(c.length - a.length) === a)
        },
        succ: function(a) {
            return null  == a ? "" : (a = k(a),
            a.slice(0, -1) + k.fromCharCode(a.charCodeAt(a.length - 1) + 1))
        },
        titleize: function(a) {
            return null  == a ? "" : (a = k(a).toLowerCase(),
            a.replace(/(?:^|\s|-)\S/g, function(c) {
                return c.toUpperCase()
            }
            ))
        },
        camelize: function(a) {
            return w.trim(a).replace(/[-_\s]+(.)?/g, function(c, f) {
                return f ? f.toUpperCase() : ""
            }
            )
        },
        underscored: function(a) {
            return w.trim(a).replace(/([a-z\d])([A-Z]+)/g, "$1_$2").replace(/[-\s]+/g, "_").toLowerCase()
        },
        dasherize: function(a) {
            return w.trim(a).replace(/([A-Z])/g, "-$1").replace(/[-_\s]+/g, "-").toLowerCase()
        },
        classify: function(a) {
            return w.titleize(k(a).replace(/[\W_]/g, " ")).replace(/\s/g, "")
        },
        humanize: function(a) {
            return w.capitalize(w.underscored(a).replace(/_id$/, "").replace(/_/g, " "))
        },
        trim: function(c, a) {
            return null  == c ? "" : !a && C ? C.call(c) : (a = z(a),
            k(c).replace(new RegExp("^" + a + "+|" + a + "+$","g"), ""))
        },
        ltrim: function(c, a) {
            return null  == c ? "" : !a && q ? q.call(c) : (a = z(a),
            k(c).replace(new RegExp("^" + a + "+"), ""))
        },
        rtrim: function(c, a) {
            return null  == c ? "" : !a && B ? B.call(c) : (a = z(a),
            k(c).replace(new RegExp(a + "+$"), ""))
        },
        truncate: function(f, c, a) {
            return null  == f ? "" : (f = k(f),
            a = a || "...",
            c = ~~c,
            f.length > c ? f.slice(0, c) + a : f)
        },
        prune: function(h, g, f) {
            if (null  == h) {
                return ""
            }
            if (h = k(h),
            g = ~~g,
            f = null  != f ? k(f) : "...",
            g >= h.length) {
                return h
            }
            var a = function(l) {
                return l.toUpperCase() !== l.toLowerCase() ? "A" : " "
            }
              , c = h.slice(0, g + 1).replace(/.(?=\W*\w*$)/g, a);
            return c = c.slice(c.length - 2).match(/\w\w/) ? c.replace(/\s*\S+$/, "") : w.rtrim(c.slice(0, c.length - 1)),
            (c + f).length > h.length ? h : h.slice(0, c.length) + f
        },
        words: function(a, c) {
            return w.isBlank(a) ? [] : w.trim(a, c).split(c || /\s+/)
        },
        pad: function(h, g, f, a) {
            h = null  == h ? "" : k(h),
            g = ~~g;
            var c = 0;
            switch (f ? f.length > 1 && (f = f.charAt(0)) : f = " ",
            a) {
            case "right":
                return c = g - h.length,
                h + j(f, c);
            case "both":
                return c = g - h.length,
                j(f, Math.ceil(c / 2)) + h + j(f, Math.floor(c / 2));
            default:
                return c = g - h.length,
                j(f, c) + h
            }
        },
        lpad: function(c, f, a) {
            return w.pad(c, f, a)
        },
        rpad: function(c, f, a) {
            return w.pad(c, f, a, "right")
        },
        lrpad: function(c, f, a) {
            return w.pad(c, f, a, "both")
        },
        sprintf: v,
        vsprintf: function(a, c) {
            return c.unshift(a),
            v.apply(null , c)
        },
        toNumber: function(a, c) {
            return a ? (a = w.trim(a),
            a.match(/^-?\d+(?:\.\d+)?$/) ? m(m(a).toFixed(~~c)) : 0 / 0) : 0
        },
        numberFormat: function(p, s, h, g) {
            if (isNaN(p) || null  == p) {
                return ""
            }
            p = p.toFixed(~~s),
            g = "string" == typeof g ? g : ",";
            var c = p.split(".")
              , f = c[0]
              , a = c[1] ? (h || ".") + c[1] : "";
            return f.replace(/(\d)(?=(?:\d{3})+$)/g, "$1" + g) + a
        },
        strRight: function(f, c) {
            if (null  == f) {
                return ""
            }
            f = k(f),
            c = null  != c ? k(c) : c;
            var a = c ? f.indexOf(c) : -1;
            return ~a ? f.slice(a + c.length, f.length) : f
        },
        strRightBack: function(f, c) {
            if (null  == f) {
                return ""
            }
            f = k(f),
            c = null  != c ? k(c) : c;
            var a = c ? f.lastIndexOf(c) : -1;
            return ~a ? f.slice(a + c.length, f.length) : f
        },
        strLeft: function(f, c) {
            if (null  == f) {
                return ""
            }
            f = k(f),
            c = null  != c ? k(c) : c;
            var a = c ? f.indexOf(c) : -1;
            return ~a ? f.slice(0, a) : f
        },
        strLeftBack: function(c, f) {
            if (null  == c) {
                return ""
            }
            c += "",
            f = null  != f ? "" + f : f;
            var a = c.lastIndexOf(f);
            return ~a ? c.slice(0, a) : c
        },
        toSentence: function(h, l, g, f) {
            l = l || ", ",
            g = g || " and ";
            var a = h.slice()
              , c = a.pop();
            return h.length > 2 && f && (g = w.rtrim(l) + g),
            a.length ? a.join(l) + g + c : c
        },
        toSentenceSerial: function() {
            var a = A.call(arguments);
            return a[3] = !0,
            w.toSentence.apply(w, a)
        },
        slugify: function(g) {
            if (null  == g) {
                return ""
            }
            var f = ""
              , c = "aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz"
              , a = new RegExp(z(f),"g");
            return g = k(g).toLowerCase().replace(a, function(h) {
                var l = f.indexOf(h);
                return c.charAt(l) || "-"
            }
            ),
            w.dasherize(g.replace(/[^\w\s-]/g, ""))
        },
        surround: function(a, c) {
            return [c, a, c].join("")
        },
        quote: function(a, c) {
            return w.surround(a, c || '"')
        },
        unquote: function(a, c) {
            return c = c || '"',
            a[0] === c && a[a.length - 1] === c ? a.slice(1, a.length - 1) : a
        },
        exports: function() {
            var a = {};
            for (var c in this) {
                this.hasOwnProperty(c) && !c.match(/^(?:include|contains|reverse)$/) && (a[c] = this[c])
            }
            return a
        },
        repeat: function(g, f, c) {
            if (null  == g) {
                return ""
            }
            if (f = ~~f,
            null  == c) {
                return j(k(g), f)
            }
            for (var a = []; f > 0; a[--f] = g) {}
            return a.join(c)
        },
        naturalCmp: function(F, g) {
            if (F == g) {
                return 0
            }
            if (!F) {
                return -1
            }
            if (!g) {
                return 1
            }
            for (var J = /(\.\d+)|(\d+)|(\D+)/g, I = k(F).toLowerCase().match(J), p = k(g).toLowerCase().match(J), n = Math.min(I.length, p.length), h = 0; n > h; h++) {
                var H = I[h]
                  , G = p[h];
                if (H !== G) {
                    var K = parseInt(H, 10);
                    if (!isNaN(K)) {
                        var E = parseInt(G, 10);
                        if (!isNaN(E) && K - E) {
                            return K - E
                        }
                    }
                    return G > H ? -1 : 1
                }
            }
            return I.length === p.length ? I.length - p.length : g > F ? -1 : 1
        },
        levenshtein: function(n, h) {
            if (null  == n && null  == h) {
                return 0
            }
            if (null  == n) {
                return k(h).length
            }
            if (null  == h) {
                return k(n).length
            }
            n = k(n),
            h = k(h);
            for (var g, c, f = [], a = 0; h.length >= a; a++) {
                for (var p = 0; n.length >= p; p++) {
                    c = a && p ? n.charAt(p - 1) === h.charAt(a - 1) ? g : Math.min(f[p], f[p - 1], g) + 1 : a + p,
                    g = f[p],
                    f[p] = c
                }
            }
            return f.pop()
        },
        toBoolean: function(c, f, a) {
            return "number" == typeof c && (c = "" + c),
            "string" != typeof c ? !!c : (c = w.trim(c),
            b(c, f || ["true", "1"]) ? !0 : b(c, a || ["false", "0"]) ? !1 : void 0)
        }
    };
    w.strip = w.trim,
    w.lstrip = w.ltrim,
    w.rstrip = w.rtrim,
    w.center = w.lrpad,
    w.rjust = w.lpad,
    w.ljust = w.rpad,
    w.contains = w.include,
    w.q = w.quote,
    w.toBool = w.toBoolean,
    "undefined" != typeof exports && ("undefined" != typeof module && module.exports && (module.exports = w),
    exports._s = w),
    "function" == typeof define && define.amd && define("underscore.string", [], function() {
        return w
    }
    ),
    y._ = y._ || {},
    y._.string = y._.str = w
}
(this, String);
Date.$VERSION = 1.02;
Date.LZ = function(a) {
    return (a < 0 || a > 9 ? "" : "0") + a
}
;
Date.monthNames = new Array("January","February","March","April","May","June","July","August","September","October","November","December");
Date.monthAbbreviations = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
Date.dayNames = new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");
Date.dayAbbreviations = new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");
Date.preferAmericanFormat = true;
if (!Date.prototype.getFullYear) {
    Date.prototype.getFullYear = function() {
        var a = this.getYear();
        return ( a < 1900 ? a + 1900 : a) 
    }
}
Date.parseString = function(I, B) {
    if (typeof (B) == "undefined" || B == null  || B == "") {
        var p = new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM");
        var b = new Array("M/d/y","M-d-y","M.d.y","M/d","M-d");
        var n = new Array("d/M/y","d-M-y","d.M.y","d/M","d-M");
        var e = new Array(p,Date.preferAmericanFormat ? b : n,Date.preferAmericanFormat ? n : b);
        for (var z = 0; z < e.length; z++) {
            var v = e[z];
            for (var w = 0; w < v.length; w++) {
                var C = Date.parseString(I, v[w]);
                if (C != null ) {
                    return C
                }
            }
        }
        return null 
    }
    this.isInteger = function(d) {
        for (var c = 0; c < d.length; c++) {
            if ("1234567890".indexOf(d.charAt(c)) == -1) {
                return false
            }
        }
        return true
    }
    ;
    this.getInt = function(J, l, y, j) {
        for (var c = j; c >= y; c--) {
            var d = J.substring(l, l + c);
            if (d.length < y) {
                return null 
            }
            if (this.isInteger(d)) {
                return d
            }
        }
        return null 
    }
    ;
    I = I + "";
    B = B + "";
    var H = 0;
    var s = 0;
    var E = "";
    var g = "";
    var G = "";
    var k, h;
    var m = new Date().getFullYear();
    var F = 1;
    var D = 1;
    var a = 0;
    var A = 0;
    var u = 0;
    var r = "";
    while (s < B.length) {
        E = B.charAt(s);
        g = "";
        while ((B.charAt(s) == E) && (s < B.length)) {
            g += B.charAt(s++)
        }
        if (g == "yyyy" || g == "yy" || g == "y") {
            if (g == "yyyy") {
                k = 4;
                h = 4
            }
            if (g == "yy") {
                k = 2;
                h = 2
            }
            if (g == "y") {
                k = 2;
                h = 4
            }
            m = this.getInt(I, H, k, h);
            if (m == null ) {
                return null 
            }
            H += m.length;
            if (m.length == 2) {
                if (m > 70) {
                    m = 1900 + (m - 0)
                } else {
                    m = 2000 + (m - 0)
                }
            }
        } else {
            if (g == "MMM" || g == "NNN") {
                F = 0;
                var q = (g == "MMM" ? (Date.monthNames.concat(Date.monthAbbreviations)) : Date.monthAbbreviations);
                for (var z = 0; z < q.length; z++) {
                    var f = q[z];
                    if (I.substring(H, H + f.length).toLowerCase() == f.toLowerCase()) {
                        F = (z % 12) + 1;
                        H += f.length;
                        break
                    }
                }
                if ((F < 1) || (F > 12)) {
                    return null 
                }
            } else {
                if (g == "EE" || g == "E") {
                    var q = (g == "EE" ? Date.dayNames : Date.dayAbbreviations);
                    for (var z = 0; z < q.length; z++) {
                        var t = q[z];
                        if (I.substring(H, H + t.length).toLowerCase() == t.toLowerCase()) {
                            H += t.length;
                            break
                        }
                    }
                } else {
                    if (g == "MM" || g == "M") {
                        F = this.getInt(I, H, g.length, 2);
                        if (F == null  || (F < 1) || (F > 12)) {
                            return null 
                        }
                        H += F.length
                    } else {
                        if (g == "dd" || g == "d") {
                            D = this.getInt(I, H, g.length, 2);
                            if (D == null  || (D < 1) || (D > 31)) {
                                return null 
                            }
                            H += D.length
                        } else {
                            if (g == "hh" || g == "h") {
                                a = this.getInt(I, H, g.length, 2);
                                if (a == null  || (a < 1) || (a > 12)) {
                                    return null 
                                }
                                H += a.length
                            } else {
                                if (g == "HH" || g == "H") {
                                    a = this.getInt(I, H, g.length, 2);
                                    if (a == null  || (a < 0) || (a > 23)) {
                                        return null 
                                    }
                                    H += a.length
                                } else {
                                    if (g == "KK" || g == "K") {
                                        a = this.getInt(I, H, g.length, 2);
                                        if (a == null  || (a < 0) || (a > 11)) {
                                            return null 
                                        }
                                        H += a.length;
                                        a++
                                    } else {
                                        if (g == "kk" || g == "k") {
                                            a = this.getInt(I, H, g.length, 2);
                                            if (a == null  || (a < 1) || (a > 24)) {
                                                return null 
                                            }
                                            H += a.length;
                                            a--
                                        } else {
                                            if (g == "mm" || g == "m") {
                                                A = this.getInt(I, H, g.length, 2);
                                                if (A == null  || (A < 0) || (A > 59)) {
                                                    return null 
                                                }
                                                H += A.length
                                            } else {
                                                if (g == "ss" || g == "s") {
                                                    u = this.getInt(I, H, g.length, 2);
                                                    if (u == null  || (u < 0) || (u > 59)) {
                                                        return null 
                                                    }
                                                    H += u.length
                                                } else {
                                                    if (g == "a") {
                                                        if (I.substring(H, H + 2).toLowerCase() == "am") {
                                                            r = "AM"
                                                        } else {
                                                            if (I.substring(H, H + 2).toLowerCase() == "pm") {
                                                                r = "PM"
                                                            } else {
                                                                return null 
                                                            }
                                                        }
                                                        H += 2
                                                    } else {
                                                        if (I.substring(H, H + g.length) != g) {
                                                            return null 
                                                        } else {
                                                            H += g.length
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    if (H != I.length) {
        return null 
    }
    if (F == 2) {
        if (((m % 4 == 0) && (m % 100 != 0)) || (m % 400 == 0)) {
            if (D > 29) {
                return null 
            }
        } else {
            if (D > 28) {
                return null 
            }
        }
    }
    if ((F == 4) || (F == 6) || (F == 9) || (F == 11)) {
        if (D > 30) {
            return null 
        }
    }
    if (a < 12 && r == "PM") {
        a = a - 0 + 12
    } else {
        if (a > 11 && r == "AM") {
            a -= 12
        }
    }
    return new Date(m,F - 1,D,a,A,u)
}
;
Date.isValid = function(b, a) {
    return ( Date.parseString(b, a) != null ) 
}
;
Date.prototype.isBefore = function(a) {
    if (a == null ) {
        return false
    }
    return ( this.getTime() < a.getTime()) 
}
;
Date.prototype.isAfter = function(a) {
    if (a == null ) {
        return false
    }
    return ( this.getTime() > a.getTime()) 
}
;
Date.prototype.equals = function(a) {
    if (a == null ) {
        return false
    }
    return ( this.getTime() == a.getTime()) 
}
;
Date.prototype.equalsIgnoreTime = function(c) {
    if (c == null ) {
        return false
    }
    var b = new Date(this.getTime()).clearTime();
    var a = new Date(c.getTime()).clearTime();
    return ( b.getTime() == a.getTime()) 
}
;
Date.prototype.format = function(G) {
    G = G + "";
    var n = "";
    var x = 0;
    var J = "";
    var f = "";
    var l = this.getYear() + "";
    var g = this.getMonth() + 1;
    var I = this.getDate();
    var q = this.getDay();
    var p = this.getHours();
    var A = this.getMinutes();
    var t = this.getSeconds();
    var v, w, b, u, L, e, F, D, B, r, O, p, N, j, a, C;
    var z = new Object();
    if (l.length < 4) {
        l = "" + (+l + 1900)
    }
    z.y = "" + l;
    z.yyyy = l;
    z.yy = l.substring(2, 4);
    z.M = g;
    z.MM = Date.LZ(g);
    z.MMM = Date.monthNames[g - 1];
    z.NNN = Date.monthAbbreviations[g - 1];
    z.d = I;
    z.dd = Date.LZ(I);
    z.E = Date.dayAbbreviations[q];
    z.EE = Date.dayNames[q];
    z.H = p;
    z.HH = Date.LZ(p);
    if (p == 0) {
        z.h = 12
    } else {
        if (p > 12) {
            z.h = p - 12
        } else {
            z.h = p
        }
    }
    z.hh = Date.LZ(z.h);
    z.K = z.h - 1;
    z.k = z.H + 1;
    z.KK = Date.LZ(z.K);
    z.kk = Date.LZ(z.k);
    if (p > 11) {
        z.a = "PM"
    } else {
        z.a = "AM"
    }
    z.m = A;
    z.mm = Date.LZ(A);
    z.s = t;
    z.ss = Date.LZ(t);
    while (x < G.length) {
        J = G.charAt(x);
        f = "";
        while ((G.charAt(x) == J) && (x < G.length)) {
            f += G.charAt(x++)
        }
        if (typeof (z[f]) != "undefined") {
            n = n + z[f]
        } else {
            n = n + f
        }
    }
    return n
}
;
Date.prototype.getDayName = function() {
    return Date.dayNames[this.getDay()]
}
;
Date.prototype.getDayAbbreviation = function() {
    return Date.dayAbbreviations[this.getDay()]
}
;
Date.prototype.getMonthName = function() {
    return Date.monthNames[this.getMonth()]
}
;
Date.prototype.getMonthAbbreviation = function() {
    return Date.monthAbbreviations[this.getMonth()]
}
;
Date.prototype.clearTime = function() {
    this.setHours(0);
    this.setMinutes(0);
    this.setSeconds(0);
    this.setMilliseconds(0);
    return this
}
;
Date.prototype.add = function(a, c) {
    if (typeof (a) == "undefined" || a == null  || typeof (c) == "undefined" || c == null ) {
        return this
    }
    c = +c;
    if (a == "y") {
        this.setFullYear(this.getFullYear() + c)
    } else {
        if (a == "M") {
            this.setMonth(this.getMonth() + c)
        } else {
            if (a == "d") {
                this.setDate(this.getDate() + c)
            } else {
                if (a == "w") {
                    var b = (c > 0) ? 1 : -1;
                    while (c != 0) {
                        this.add("d", b);
                        while (this.getDay() == 0 || this.getDay() == 6) {
                            this.add("d", b)
                        }
                        c -= b
                    }
                } else {
                    if (a == "h") {
                        this.setHours(this.getHours() + c)
                    } else {
                        if (a == "m") {
                            this.setMinutes(this.getMinutes() + c)
                        } else {
                            if (a == "s") {
                                this.setSeconds(this.getSeconds() + c)
                            }
                        }
                    }
                }
            }
        }
    }
    return this
}
;
(function(e) {
    function d(j, h) {
        if (this.createTextRange) {
            var g = this.createTextRange();
            g.collapse(true);
            g.moveStart("character", j);
            g.moveEnd("character", h - j);
            g.select()
        } else {
            if (this.setSelectionRange) {
                this.focus();
                this.setSelectionRange(j, h)
            }
        }
    }
    function b(j) {
        var m = this.value.length;
        j = (j.toLowerCase() == "start" ? "Start" : "End");
        if (document.selection) {
            var g = document.selection.createRange(), h, k, l;
            h = g.duplicate();
            h.expand("textedit");
            h.setEndPoint("EndToEnd", g);
            k = h.text.length - g.text.length;
            l = k + g.text.length;
            return j == "Start" ? k : l
        } else {
            if (typeof (this["selection" + j]) != "undefined") {
                m = this["selection" + j]
            }
        }
        return m
    }
    var a = {
        codes: {
            188: 44,
            109: 45,
            190: 46,
            191: 47,
            192: 96,
            220: 92,
            222: 39,
            221: 93,
            219: 91,
            173: 45,
            187: 61,
            186: 59,
            189: 45,
            110: 46
        },
        shifts: {
            96: "~",
            49: "!",
            50: "@",
            51: "#",
            52: "$",
            53: "%",
            54: "^",
            55: "&",
            56: "*",
            57: "(",
            48: ")",
            45: "_",
            61: "+",
            91: "{",
            93: "}",
            92: "|",
            59: ":",
            39: '"',
            44: "<",
            46: ">",
            47: "?"
        }
    };
    e.fn.number = function(m, h, k, g) {
        g = (typeof g === "undefined") ? "," : g;
        k = (typeof k === "undefined") ? "." : k;
        h = (typeof h === "undefined") ? 0 : h;
        var n = ("\\u" + ("0000" + (k.charCodeAt(0).toString(16))).slice(-4))
          , l = new RegExp("[^" + n + "0-9]","g")
          , j = new RegExp(n,"g");
        if (m === true) {
            if (this.is("input:text")) {
                return this.on({
                    "keydown.format": function(v) {
                        var w = e(this)
                          , t = w.data("numFormat")
                          , q = (v.keyCode ? v.keyCode : v.which)
                          , u = ""
                          , p = b.apply(this, ["start"])
                          , s = b.apply(this, ["end"])
                          , r = ""
                          , y = false;
                        if (a.codes.hasOwnProperty(q)) {
                            q = a.codes[q]
                        }
                        if (!v.shiftKey && (q >= 65 && q <= 90)) {
                            q += 32
                        } else {
                            if (!v.shiftKey && (q >= 69 && q <= 105)) {
                                q -= 48
                            } else {
                                if (v.shiftKey && a.shifts.hasOwnProperty(q)) {
                                    u = a.shifts[q]
                                }
                            }
                        }
                        if (u == "") {
                            u = String.fromCharCode(q)
                        }
                        if (q !== 8 && u != k && !u.match(/[0-9]/)) {
                            var x = (v.keyCode ? v.keyCode : v.which);
                            if (x == 46 || x == 8 || x == 9 || x == 27 || x == 13 || ((x == 65 || x == 82) && (v.ctrlKey || v.metaKey) === true) || ((x >= 35 && x <= 39))) {
                                return
                            }
                            v.preventDefault();
                            return false
                        }
                        if ((p == 0 && s == this.value.length || w.val() == 0) && !v.metaKey && !v.ctrlKey && !v.altKey && u.length === 1 && u != 0) {
                            p = s = 1;
                            this.value = "";
                            t.init = (h > 0 ? -1 : 0);
                            t.c = (h > 0 ? -(h + 1) : 0);
                            d.apply(this, [0, 0])
                        } else {
                            t.c = s - this.value.length
                        }
                        if (h > 0 && u == k && p == this.value.length - h - 1) {
                            t.c++;
                            t.init = Math.max(0, t.init);
                            v.preventDefault();
                            y = this.value.length + t.c
                        } else {
                            if (u == k) {
                                t.init = Math.max(0, t.init);
                                v.preventDefault()
                            } else {
                                if (h > 0 && q == 8 && p == this.value.length - h) {
                                    v.preventDefault();
                                    t.c--;
                                    y = this.value.length + t.c
                                } else {
                                    if (h > 0 && q == 8 && p > this.value.length - h) {
                                        if (this.value === "") {
                                            return
                                        }
                                        if (this.value.slice(p - 1, p) != "0") {
                                            r = this.value.slice(0, p - 1) + "0" + this.value.slice(p);
                                            w.val(r.replace(l, "").replace(j, k))
                                        }
                                        v.preventDefault();
                                        t.c--;
                                        y = this.value.length + t.c
                                    } else {
                                        if (q == 8 && this.value.slice(p - 1, p) == g) {
                                            v.preventDefault();
                                            t.c--;
                                            y = this.value.length + t.c
                                        } else {
                                            if (h > 0 && p == s && this.value.length > h + 1 && p > this.value.length - h - 1 && isFinite(+u) && !v.metaKey && !v.ctrlKey && !v.altKey && u.length === 1) {
                                                if (s === this.value.length) {
                                                    r = this.value.slice(0, p - 1)
                                                } else {
                                                    r = this.value.slice(0, p) + this.value.slice(p + 1)
                                                }
                                                this.value = r;
                                                y = p
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        if (y !== false) {
                            d.apply(this, [y, y])
                        }
                        w.data("numFormat", t)
                    },
                    "keyup.format": function(t) {
                        var s = e(this), q = s.data("numFormat"), p = (t.keyCode ? t.keyCode : t.which), u = b.apply(this, ["start"]), r;
                        if (this.value === "" || (p < 48 || p > 57) && (p < 96 || p > 105) && p !== 8) {
                            return
                        }
                        s.val(s.val());
                        if (h > 0) {
                            if (q.init < 1) {
                                u = this.value.length - h - (q.init < 0 ? 1 : 0);
                                q.c = u - this.value.length;
                                q.init = 1;
                                s.data("numFormat", q)
                            } else {
                                if (u > this.value.length - h && p != 8) {
                                    q.c++;
                                    s.data("numFormat", q)
                                }
                            }
                        }
                        r = this.value.length + q.c;
                        d.apply(this, [r, r])
                    },
                    "paste.format": function(r) {
                        var q = e(this)
                          , p = r.originalEvent
                          , s = null ;
                        if (window.clipboardData && window.clipboardData.getData) {
                            s = window.clipboardData.getData("Text")
                        } else {
                            if (p.clipboardData && p.clipboardData.getData) {
                                s = p.clipboardData.getData("text/plain")
                            }
                        }
                        q.val(s);
                        r.preventDefault();
                        return false
                    }
                }).each(function() {
                    var p = e(this).data("numFormat", {
                        c: -(h + 1),
                        decimals: h,
                        thousands_sep: g,
                        dec_point: k,
                        regex_dec_num: l,
                        regex_dec: j,
                        init: false
                    });
                    if (this.value === "") {
                        return
                    }
                    p.val(p.val())
                }
                )
            } else {
                return this.each(function() {
                    var q = e(this)
                      , p = +q.text().replace(l, "").replace(j, ".");
                    q.number(!isFinite(p) ? 0 : +p, h, k, g)
                }
                )
            }
        }
        return this.text(e.number.apply(window, arguments))
    }
    ;
    var f = null 
      , c = null ;
    if (e.valHooks.text) {
        f = e.valHooks.text.get;
        c = e.valHooks.text.set
    } else {
        e.valHooks.text = {}
    }
    e.valHooks.text.get = function(h) {
        var k = e(h), g, j = k.data("numFormat");
        if (!j) {
            if (e.isFunction(f)) {
                return f(h)
            } else {
                return undefined
            }
        } else {
            if (h.value === "") {
                return ""
            }
            g = +(h.value.replace(j.regex_dec_num, "").replace(j.regex_dec, "."));
            return "" + (isFinite(g) ? g : 0)
        }
    }
    ;
    e.valHooks.text.set = function(g, k) {
        var j = e(g)
          , h = j.data("numFormat");
        if (!h) {
            if (e.isFunction(c)) {
                return c(g, k)
            } else {
                return undefined
            }
        } else {
            return g.value = e.number(k, h.decimals, h.dec_point, h.thousands_sep)
        }
    }
    ;
    e.number = function(m, j, k, h) {
        h = (typeof h === "undefined") ? "," : h;
        k = (typeof k === "undefined") ? "." : k;
        j = !isFinite(+j) ? 0 : Math.abs(j);
        var p = ("\\u" + ("0000" + (k.charCodeAt(0).toString(16))).slice(-4));
        m = (m + "").replace(new RegExp(p,"g"), ".").replace(new RegExp("[^0-9+-Ee.]","g"), "");
        var q = !isFinite(+m) ? 0 : +m
          , l = ""
          , g = function(t, r) {
            var s = Math.pow(10, r);
            return "" + Math.round(t * s) / s
        }
        ;
        l = (j ? g(q, j) : "" + Math.round(q)).split(".");
        if (l[0].length > 3) {
            l[0] = l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, h)
        }
        if ((l[1] || "").length < j) {
            l[1] = l[1] || "";
            l[1] += new Array(j - l[1].length + 1).join("0")
        }
        return l.join(k)
    }
}
)(jQuery);
/*! Video.js v4.3.0 Copyright 2013 Brightcove, Inc. https://github.com/videojs/video.js/blob/master/LICENSE */
(function() {
    var b = void 0
      , f = !0
      , h = null 
      , l = !1;
    function m() {
        return function() {}
    }
    function p(a) {
        return function() {
            return this[a]
        }
    }
    function s(a) {
        return function() {
            return a
        }
    }
    var t;
    document.createElement("video");
    document.createElement("audio");
    document.createElement("track");
    function u(a, c, d) {
        if ("string" === typeof a) {
            0 === a.indexOf("#") && (a = a.slice(1));
            if (u.xa[a]) {
                return u.xa[a]
            }
            a = u.w(a)
        }
        if (!a || !a.nodeName) {
            throw new TypeError("The element or ID supplied is not valid. (videojs)")
        }
        return a.player || new u.s(a,c,d)
    }
    var v = u;
    window.Td = window.Ud = u;
    u.Tb = "4.3";
    u.Fc = "https:" == document.location.protocol ? "https://" : "http://";
    u.options = {
        techOrder: ["html5", "flash"],
        html5: {},
        flash: {},
        width: 300,
        height: 150,
        defaultVolume: 0,
        children: {
            mediaLoader: {},
            posterImage: {},
            textTrackDisplay: {},
            loadingSpinner: {},
            bigPlayButton: {},
            controlBar: {}
        },
        notSupportedMessage: 'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'
    };
    "GENERATED_CDN_VSN" !== u.Tb && (v.options.flash.swf = u.Fc + "vjs.zencdn.net/" + u.Tb + "/video-js.swf");
    u.xa = {};
    u.la = u.CoreObject = m();
    u.la.extend = function(a) {
        var c, d;
        a = a || {};
        c = a.init || a.i || this.prototype.init || this.prototype.i || m();
        d = function() {
            c.apply(this, arguments)
        }
        ;
        d.prototype = u.k.create(this.prototype);
        d.prototype.constructor = d;
        d.extend = u.la.extend;
        d.create = u.la.create;
        for (var e in a) {
            a.hasOwnProperty(e) && (d.prototype[e] = a[e])
        }
        return d
    }
    ;
    u.la.create = function() {
        var a = u.k.create(this.prototype);
        this.apply(a, arguments);
        return a
    }
    ;
    u.d = function(a, c, d) {
        var e = u.getData(a);
        e.z || (e.z = {});
        e.z[c] || (e.z[c] = []);
        d.t || (d.t = u.t++);
        e.z[c].push(d);
        e.W || (e.disabled = l,
        e.W = function(c) {
            if (!e.disabled) {
                c = u.kc(c);
                var d = e.z[c.type];
                if (d) {
                    for (var d = d.slice(0), k = 0, q = d.length; k < q && !c.pc(); k++) {
                        d[k].call(a, c)
                    }
                }
            }
        }
        );
        1 == e.z[c].length && (document.addEventListener ? a.addEventListener(c, e.W, l) : document.attachEvent && a.attachEvent("on" + c, e.W))
    }
    ;
    u.o = function(a, c, d) {
        if (u.oc(a)) {
            var e = u.getData(a);
            if (e.z) {
                if (c) {
                    var g = e.z[c];
                    if (g) {
                        if (d) {
                            if (d.t) {
                                for (e = 0; e < g.length; e++) {
                                    g[e].t === d.t && g.splice(e--, 1)
                                }
                            }
                        } else {
                            e.z[c] = []
                        }
                        u.gc(a, c)
                    }
                } else {
                    for (g in e.z) {
                        c = g,
                        e.z[c] = [],
                        u.gc(a, c)
                    }
                }
            }
        }
    }
    ;
    u.gc = function(a, c) {
        var d = u.getData(a);
        0 === d.z[c].length && (delete d.z[c],
        document.removeEventListener ? a.removeEventListener(c, d.W, l) : document.detachEvent && a.detachEvent("on" + c, d.W));
        u.Bb(d.z) && (delete d.z,
        delete d.W,
        delete d.disabled);
        u.Bb(d) && u.vc(a)
    }
    ;
    u.kc = function(a) {
        function c() {
            return f
        }
        function d() {
            return l
        }
        if (!a || !a.Cb) {
            var e = a || window.event;
            a = {};
            for (var g in e) {
                "layerX" !== g && "layerY" !== g && (a[g] = e[g])
            }
            a.target || (a.target = a.srcElement || document);
            a.relatedTarget = a.fromElement === a.target ? a.toElement : a.fromElement;
            a.preventDefault = function() {
                e.preventDefault && e.preventDefault();
                a.returnValue = l;
                a.Ab = c
            }
            ;
            a.Ab = d;
            a.stopPropagation = function() {
                e.stopPropagation && e.stopPropagation();
                a.cancelBubble = f;
                a.Cb = c
            }
            ;
            a.Cb = d;
            a.stopImmediatePropagation = function() {
                e.stopImmediatePropagation && e.stopImmediatePropagation();
                a.pc = c;
                a.stopPropagation()
            }
            ;
            a.pc = d;
            if (a.clientX != h) {
                g = document.documentElement;
                var j = document.body;
                a.pageX = a.clientX + (g && g.scrollLeft || j && j.scrollLeft || 0) - (g && g.clientLeft || j && j.clientLeft || 0);
                a.pageY = a.clientY + (g && g.scrollTop || j && j.scrollTop || 0) - (g && g.clientTop || j && j.clientTop || 0)
            }
            a.which = a.charCode || a.keyCode;
            a.button != h && (a.button = a.button & 1 ? 0 : a.button & 4 ? 1 : a.button & 2 ? 2 : 0)
        }
        return a
    }
    ;
    u.j = function(a, c) {
        var d = u.oc(a) ? u.getData(a) : {}
          , e = a.parentNode || a.ownerDocument;
        "string" === typeof c && (c = {
            type: c,
            target: a
        });
        c = u.kc(c);
        d.W && d.W.call(a, c);
        if (e && !c.Cb() && c.bubbles !== l) {
            u.j(e, c)
        } else {
            if (!e && !c.Ab() && (d = u.getData(c.target),
            c.target[c.type])) {
                d.disabled = f;
                if ("function" === typeof c.target[c.type]) {
                    c.target[c.type]()
                }
                d.disabled = l
            }
        }
        return !c.Ab()
    }
    ;
    u.U = function(a, c, d) {
        function e() {
            u.o(a, c, e);
            d.apply(this, arguments)
        }
        e.t = d.t = d.t || u.t++;
        u.d(a, c, e)
    }
    ;
    var w = Object.prototype.hasOwnProperty;
    u.e = function(a, c) {
        var d, e;
        d = document.createElement(a || "div");
        for (e in c) {
            w.call(c, e) && (-1 !== e.indexOf("aria-") || "role" == e ? d.setAttribute(e, c[e]) : d[e] = c[e])
        }
        return d
    }
    ;
    u.$ = function(a) {
        return a.charAt(0).toUpperCase() + a.slice(1)
    }
    ;
    u.k = {};
    u.k.create = Object.create || function(a) {
        function c() {}
        c.prototype = a;
        return new c
    }
    ;
    u.k.ua = function(a, c, d) {
        for (var e in a) {
            w.call(a, e) && c.call(d || this, e, a[e])
        }
    }
    ;
    u.k.B = function(a, c) {
        if (!c) {
            return a
        }
        for (var d in c) {
            w.call(c, d) && (a[d] = c[d])
        }
        return a
    }
    ;
    u.k.ic = function(a, c) {
        var d, e, g;
        a = u.k.copy(a);
        for (d in c) {
            w.call(c, d) && (e = a[d],
            g = c[d],
            a[d] = u.k.qc(e) && u.k.qc(g) ? u.k.ic(e, g) : c[d])
        }
        return a
    }
    ;
    u.k.copy = function(a) {
        return u.k.B({}, a)
    }
    ;
    u.k.qc = function(a) {
        return !!a && "object" === typeof a && "[object Object]" === a.toString() && a.constructor === Object
    }
    ;
    u.bind = function(a, c, d) {
        function e() {
            return c.apply(a, arguments)
        }
        c.t || (c.t = u.t++);
        e.t = d ? d + "_" + c.t : c.t;
        return e
    }
    ;
    u.ra = {};
    u.t = 1;
    u.expando = "vdata" + (new Date).getTime();
    u.getData = function(a) {
        var c = a[u.expando];
        c || (c = a[u.expando] = u.t++,
        u.ra[c] = {});
        return u.ra[c]
    }
    ;
    u.oc = function(a) {
        a = a[u.expando];
        return !(!a || u.Bb(u.ra[a]))
    }
    ;
    u.vc = function(a) {
        var c = a[u.expando];
        if (c) {
            delete u.ra[c];
            try {
                delete a[u.expando]
            } catch (d) {
                a.removeAttribute ? a.removeAttribute(u.expando) : a[u.expando] = h
            }
        }
    }
    ;
    u.Bb = function(a) {
        for (var c in a) {
            if (a[c] !== h) {
                return l
            }
        }
        return f
    }
    ;
    u.n = function(a, c) {
        -1 == (" " + a.className + " ").indexOf(" " + c + " ") && (a.className = "" === a.className ? c : a.className + " " + c)
    }
    ;
    u.u = function(a, c) {
        var d, e;
        if (-1 != a.className.indexOf(c)) {
            d = a.className.split(" ");
            for (e = d.length - 1; 0 <= e; e--) {
                d[e] === c && d.splice(e, 1)
            }
            a.className = d.join(" ")
        }
    }
    ;
    u.na = u.e("video");
    u.F = navigator.userAgent;
    u.Mc = /iPhone/i.test(u.F);
    u.Lc = /iPad/i.test(u.F);
    u.Nc = /iPod/i.test(u.F);
    u.Kc = u.Mc || u.Lc || u.Nc;
    var aa = u, x;
    var y = u.F.match(/OS (\d+)_/i);
    x = y && y[1] ? y[1] : b;
    aa.Fd = x;
    u.Ic = /Android/i.test(u.F);
    var ba = u, z;
    var A = u.F.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i), B, C;
    A ? (B = A[1] && parseFloat(A[1]),
    C = A[2] && parseFloat(A[2]),
    z = B && C ? parseFloat(A[1] + "." + A[2]) : B ? B : h) : z = h;
    ba.Gc = z;
    u.Oc = u.Ic && /webkit/i.test(u.F) && 2.3 > u.Gc;
    u.Jc = /Firefox/i.test(u.F);
    u.Gd = /Chrome/i.test(u.F);
    u.ac = !!("ontouchstart" in window || window.Hc && document instanceof window.Hc);
    u.xb = function(a) {
        var c, d, e, g;
        c = {};
        if (a && a.attributes && 0 < a.attributes.length) {
            d = a.attributes;
            for (var j = d.length - 1; 0 <= j; j--) {
                e = d[j].name;
                g = d[j].value;
                if ("boolean" === typeof a[e] || -1 !== ",autoplay,controls,loop,muted,default,".indexOf("," + e + ",")) {
                    g = g !== h ? f : l
                }
                c[e] = g
            }
        }
        return c
    }
    ;
    u.Kd = function(a, c) {
        var d = "";
        document.defaultView && document.defaultView.getComputedStyle ? d = document.defaultView.getComputedStyle(a, "").getPropertyValue(c) : a.currentStyle && (d = a["client" + c.substr(0, 1).toUpperCase() + c.substr(1)] + "px");
        return d
    }
    ;
    u.zb = function(a, c) {
        c.firstChild ? c.insertBefore(a, c.firstChild) : c.appendChild(a)
    }
    ;
    u.Pb = {};
    u.w = function(a) {
        0 === a.indexOf("#") && (a = a.slice(1));
        return document.getElementById(a)
    }
    ;
    u.La = function(a, c) {
        c = c || a;
        var d = Math.floor(a % 60)
          , e = Math.floor(a / 60 % 60)
          , g = Math.floor(a / 3600)
          , j = Math.floor(c / 60 % 60)
          , k = Math.floor(c / 3600);
        if (isNaN(a) || Infinity === a) {
            g = e = d = "-"
        }
        g = 0 < g || 0 < k ? g + ":" : "";
        return g + (((g || 10 <= j) && 10 > e ? "0" + e : e) + ":") + (10 > d ? "0" + d : d)
    }
    ;
    u.Tc = function() {
        document.body.focus();
        document.onselectstart = s(l)
    }
    ;
    u.Bd = function() {
        document.onselectstart = s(f)
    }
    ;
    u.trim = function(a) {
        return (a + "").replace(/^\s+|\s+$/g, "")
    }
    ;
    u.round = function(a, c) {
        c || (c = 0);
        return Math.round(a * Math.pow(10, c)) / Math.pow(10, c)
    }
    ;
    u.tb = function(a, c) {
        return {
            length: 1,
            start: function() {
                return a
            },
            end: function() {
                return c
            }
        }
    }
    ;
    u.get = function(a, c, d) {
        var e, g;
        "undefined" === typeof XMLHttpRequest && (window.XMLHttpRequest = function() {
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")
            } catch (a) {}
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")
            } catch (c) {}
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP")
            } catch (d) {}
            throw Error("This browser does not support XMLHttpRequest.")
        }
        );
        g = new XMLHttpRequest;
        try {
            g.open("GET", a)
        } catch (j) {
            d(j)
        }
        e = 0 === a.indexOf("file:") || 0 === window.location.href.indexOf("file:") && -1 === a.indexOf("http");
        g.onreadystatechange = function() {
            4 === g.readyState && (200 === g.status || e && 0 === g.status ? c(g.responseText) : d && d())
        }
        ;
        try {
            g.send()
        } catch (k) {
            d && d(k)
        }
    }
    ;
    u.td = function(a) {
        try {
            var c = window.localStorage || l;
            c && (c.volume = a)
        } catch (d) {
            22 == d.code || 1014 == d.code ? u.log("LocalStorage Full (VideoJS)", d) : 18 == d.code ? u.log("LocalStorage not allowed (VideoJS)", d) : u.log("LocalStorage Error (VideoJS)", d)
        }
    }
    ;
    u.mc = function(a) {
        a.match(/^https?:\/\//) || (a = u.e("div", {
            innerHTML: '<a href="' + a + '">x</a>'
        }).firstChild.href);
        return a
    }
    ;
    u.log = function() {
        u.log.history = u.log.history || [];
        u.log.history.push(arguments);
        window.console && window.console.log(Array.prototype.slice.call(arguments))
    }
    ;
    u.ad = function(a) {
        var c, d;
        a.getBoundingClientRect && a.parentNode && (c = a.getBoundingClientRect());
        if (!c) {
            return {
                left: 0,
                top: 0
            }
        }
        a = document.documentElement;
        d = document.body;
        return {
            left: c.left + (window.pageXOffset || d.scrollLeft) - (a.clientLeft || d.clientLeft || 0),
            top: c.top + (window.pageYOffset || d.scrollTop) - (a.clientTop || d.clientTop || 0)
        }
    }
    ;
    u.c = u.la.extend({
        i: function(a, c, d) {
            this.b = a;
            this.g = u.k.copy(this.g);
            c = this.options(c);
            this.Q = c.id || (c.el && c.el.id ? c.el.id : a.id() + "_component_" + u.t++);
            this.gd = c.name || h;
            this.a = c.el || this.e();
            this.G = [];
            this.qb = {};
            this.V = {};
            if ((a = this.g) && a.children) {
                var e = this;
                u.k.ua(a.children, function(a, c) {
                    c !== l && !c.loadEvent && (e[a] = e.Z(a, c))
                }
                )
            }
            this.L(d)
        }
    });
    t = u.c.prototype;
    t.D = function() {
        this.j("dispose");
        if (this.G) {
            for (var a = this.G.length - 1; 0 <= a; a--) {
                this.G[a].D && this.G[a].D()
            }
        }
        this.V = this.qb = this.G = h;
        this.o();
        this.a.parentNode && this.a.parentNode.removeChild(this.a);
        u.vc(this.a);
        this.a = h
    }
    ;
    t.b = f;
    t.K = p("b");
    t.options = function(a) {
        return a === b ? this.g : this.g = u.k.ic(this.g, a)
    }
    ;
    t.e = function(a, c) {
        return u.e(a, c)
    }
    ;
    t.w = p("a");
    t.id = p("Q");
    t.name = p("gd");
    t.children = p("G");
    t.Z = function(a, c) {
        var d, e;
        "string" === typeof a ? (e = a,
        c = c || {},
        d = c.componentClass || u.$(e),
        c.name = e,
        d = new window.videojs[d](this.b || this,c)) : d = a;
        this.G.push(d);
        "function" === typeof d.id && (this.qb[d.id()] = d);
        (e = e || d.name && d.name()) && (this.V[e] = d);
        "function" === typeof d.el && d.el() && (this.sa || this.a).appendChild(d.el());
        return d
    }
    ;
    t.removeChild = function(a) {
        "string" === typeof a && (a = this.V[a]);
        if (a && this.G) {
            for (var c = l, d = this.G.length - 1; 0 <= d; d--) {
                if (this.G[d] === a) {
                    c = f;
                    this.G.splice(d, 1);
                    break
                }
            }
            c && (this.qb[a.id] = h,
            this.V[a.name] = h,
            (c = a.w()) && c.parentNode === (this.sa || this.a) && (this.sa || this.a).removeChild(a.w()))
        }
    }
    ;
    t.T = s("");
    t.d = function(a, c) {
        u.d(this.a, a, u.bind(this, c));
        return this
    }
    ;
    t.o = function(a, c) {
        u.o(this.a, a, c);
        return this
    }
    ;
    t.U = function(a, c) {
        u.U(this.a, a, u.bind(this, c));
        return this
    }
    ;
    t.j = function(a, c) {
        u.j(this.a, a, c);
        return this
    }
    ;
    t.L = function(a) {
        a && (this.aa ? a.call(this) : (this.Sa === b && (this.Sa = []),
        this.Sa.push(a)));
        return this
    }
    ;
    t.Ua = function() {
        this.aa = f;
        var a = this.Sa;
        if (a && 0 < a.length) {
            for (var c = 0, d = a.length; c < d; c++) {
                a[c].call(this)
            }
            this.Sa = [];
            this.j("ready")
        }
    }
    ;
    t.n = function(a) {
        u.n(this.a, a);
        return this
    }
    ;
    t.u = function(a) {
        u.u(this.a, a);
        return this
    }
    ;
    t.show = function() {
        this.a.style.display = "block";
        return this
    }
    ;
    t.C = function() {
        this.a.style.display = "none";
        return this
    }
    ;
    function D(a) {
        a.u("vjs-lock-showing")
    }
    t.disable = function() {
        this.C();
        this.show = m()
    }
    ;
    t.width = function(a, c) {
        return E(this, "width", a, c)
    }
    ;
    t.height = function(a, c) {
        return E(this, "height", a, c)
    }
    ;
    t.Xc = function(a, c) {
        return this.width(a, f).height(c)
    }
    ;
    function E(a, c, d, e) {
        if (d !== b) {
            return a.a.style[c] = -1 !== ("" + d).indexOf("%") || -1 !== ("" + d).indexOf("px") ? d : "auto" === d ? "" : d + "px",
            e || a.j("resize"),
            a
        }
        if (!a.a) {
            return 0
        }
        d = a.a.style[c];
        e = d.indexOf("px");
        return -1 !== e ? parseInt(d.slice(0, e), 10) : parseInt(a.a["offset" + u.$(c)], 10)
    }
    u.q = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            var d = l;
            this.d("touchstart", function(a) {
                a.preventDefault();
                d = f
            }
            );
            this.d("touchmove", function() {
                d = l
            }
            );
            var e = this;
            this.d("touchend", function(a) {
                d && e.p(a);
                a.preventDefault()
            }
            );
            this.d("click", this.p);
            this.d("focus", this.Oa);
            this.d("blur", this.Na)
        }
    });
    t = u.q.prototype;
    t.e = function(a, c) {
        c = u.k.B({
            className: this.T(),
            innerHTML: '<div class="vjs-control-content"><span class="vjs-control-text">' + (this.qa || "Need Text") + "</span></div>",
            qd: "button",
            "aria-live": "polite",
            tabIndex: 0
        }, c);
        return u.c.prototype.e.call(this, a, c)
    }
    ;
    t.T = function() {
        return "vjs-control " + u.c.prototype.T.call(this)
    }
    ;
    t.p = m();
    t.Oa = function() {
        u.d(document, "keyup", u.bind(this, this.ba))
    }
    ;
    t.ba = function(a) {
        if (32 == a.which || 13 == a.which) {
            a.preventDefault(),
            this.p()
        }
    }
    ;
    t.Na = function() {
        u.o(document, "keyup", u.bind(this, this.ba))
    }
    ;
    u.O = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            this.Sc = this.V[this.g.barName];
            this.handle = this.V[this.g.handleName];
            a.d(this.tc, u.bind(this, this.update));
            this.d("mousedown", this.Pa);
            this.d("touchstart", this.Pa);
            this.d("focus", this.Oa);
            this.d("blur", this.Na);
            this.d("click", this.p);
            this.b.d("controlsvisible", u.bind(this, this.update));
            a.L(u.bind(this, this.update));
            this.P = {}
        }
    });
    t = u.O.prototype;
    t.e = function(a, c) {
        c = c || {};
        c.className += " vjs-slider";
        c = u.k.B({
            qd: "slider",
            "aria-valuenow": 0,
            "aria-valuemin": 0,
            "aria-valuemax": 100,
            tabIndex: 0
        }, c);
        return u.c.prototype.e.call(this, a, c)
    }
    ;
    t.Pa = function(a) {
        a.preventDefault();
        u.Tc();
        this.P.move = u.bind(this, this.Hb);
        this.P.end = u.bind(this, this.Ib);
        u.d(document, "mousemove", this.P.move);
        u.d(document, "mouseup", this.P.end);
        u.d(document, "touchmove", this.P.move);
        u.d(document, "touchend", this.P.end);
        this.Hb(a)
    }
    ;
    t.Ib = function() {
        u.Bd();
        u.o(document, "mousemove", this.P.move, l);
        u.o(document, "mouseup", this.P.end, l);
        u.o(document, "touchmove", this.P.move, l);
        u.o(document, "touchend", this.P.end, l);
        this.update()
    }
    ;
    t.update = function() {
        if (this.a) {
            var a, c = this.yb(), d = this.handle, e = this.Sc;
            isNaN(c) && (c = 0);
            a = c;
            if (d) {
                a = this.a.offsetWidth;
                var g = d.w().offsetWidth;
                a = g ? g / a : 0;
                c *= 1 - a;
                a = c + a / 2;
                d.w().style.left = u.round(100 * c, 2) + "%"
            }
            e.w().style.width = u.round(100 * a, 2) + "%"
        }
    }
    ;
    function F(a, c) {
        var d, e, g, j;
        d = a.a;
        e = u.ad(d);
        j = g = d.offsetWidth;
        d = a.handle;
        if (a.g.Cd) {
            return j = e.top,
            e = c.changedTouches ? c.changedTouches[0].pageY : c.pageY,
            d && (d = d.w().offsetHeight,
            j += d / 2,
            g -= d),
            Math.max(0, Math.min(1, (j - e + g) / g))
        }
        g = e.left;
        e = c.changedTouches ? c.changedTouches[0].pageX : c.pageX;
        d && (d = d.w().offsetWidth,
        g += d / 2,
        j -= d);
        return Math.max(0, Math.min(1, (e - g) / j))
    }
    t.Oa = function() {
        u.d(document, "keyup", u.bind(this, this.ba))
    }
    ;
    t.ba = function(a) {
        37 == a.which ? (a.preventDefault(),
        this.yc()) : 39 == a.which && (a.preventDefault(),
        this.zc())
    }
    ;
    t.Na = function() {
        u.o(document, "keyup", u.bind(this, this.ba))
    }
    ;
    t.p = function(a) {
        a.stopImmediatePropagation();
        a.preventDefault()
    }
    ;
    u.ea = u.c.extend();
    u.ea.prototype.defaultValue = 0;
    u.ea.prototype.e = function(a, c) {
        c = c || {};
        c.className += " vjs-slider-handle";
        c = u.k.B({
            innerHTML: '<span class="vjs-control-text">' + this.defaultValue + "</span>"
        }, c);
        return u.c.prototype.e.call(this, "div", c)
    }
    ;
    u.ma = u.c.extend();
    function ca(a, c) {
        a.Z(c);
        c.d("click", u.bind(a, function() {
            D(this)
        }
        ))
    }
    u.ma.prototype.e = function() {
        var a = this.options().Vc || "ul";
        this.sa = u.e(a, {
            className: "vjs-menu-content"
        });
        a = u.c.prototype.e.call(this, "div", {
            append: this.sa,
            className: "vjs-menu"
        });
        a.appendChild(this.sa);
        u.d(a, "click", function(a) {
            a.preventDefault();
            a.stopImmediatePropagation()
        }
        );
        return a
    }
    ;
    u.N = u.q.extend({
        i: function(a, c) {
            u.q.call(this, a, c);
            this.selected(c.selected)
        }
    });
    u.N.prototype.e = function(a, c) {
        return u.q.prototype.e.call(this, "li", u.k.B({
            className: "vjs-menu-item",
            innerHTML: this.g.label
        }, c))
    }
    ;
    u.N.prototype.p = function() {
        this.selected(f)
    }
    ;
    u.N.prototype.selected = function(a) {
        a ? (this.n("vjs-selected"),
        this.a.setAttribute("aria-selected", f)) : (this.u("vjs-selected"),
        this.a.setAttribute("aria-selected", l))
    }
    ;
    u.R = u.q.extend({
        i: function(a, c) {
            u.q.call(this, a, c);
            this.wa = this.Ka();
            this.Z(this.wa);
            this.I && 0 === this.I.length && this.C();
            this.d("keyup", this.ba);
            this.a.setAttribute("aria-haspopup", f);
            this.a.setAttribute("role", "button")
        }
    });
    t = u.R.prototype;
    t.pa = l;
    t.Ka = function() {
        var a = new u.ma(this.b);
        this.options().title && a.w().appendChild(u.e("li", {
            className: "vjs-menu-title",
            innerHTML: u.$(this.A),
            zd: -1
        }));
        if (this.I = this.createItems()) {
            for (var c = 0; c < this.I.length; c++) {
                ca(a, this.I[c])
            }
        }
        return a
    }
    ;
    t.ta = m();
    t.T = function() {
        return this.className + " vjs-menu-button " + u.q.prototype.T.call(this)
    }
    ;
    t.Oa = m();
    t.Na = m();
    t.p = function() {
        this.U("mouseout", u.bind(this, function() {
            D(this.wa);
            this.a.blur()
        }
        ));
        this.pa ? G(this) : H(this)
    }
    ;
    t.ba = function(a) {
        a.preventDefault();
        32 == a.which || 13 == a.which ? this.pa ? G(this) : H(this) : 27 == a.which && this.pa && G(this)
    }
    ;
    function H(a) {
        a.pa = f;
        a.wa.n("vjs-lock-showing");
        a.a.setAttribute("aria-pressed", f);
        a.I && 0 < a.I.length && a.I[0].w().focus()
    }
    function G(a) {
        a.pa = l;
        D(a.wa);
        a.a.setAttribute("aria-pressed", l)
    }
    u.s = u.c.extend({
        i: function(a, c, d) {
            this.M = a;
            c = u.k.B(da(a), c);
            this.v = {};
            this.uc = c.poster;
            this.sb = c.controls;
            a.controls = l;
            u.c.call(this, this, c, d);
            this.controls() ? this.n("vjs-controls-enabled") : this.n("vjs-controls-disabled");
            this.U("play", function(a) {
                u.j(this.a, {
                    type: "firstplay",
                    target: this.a
                }) || (a.preventDefault(),
                a.stopPropagation(),
                a.stopImmediatePropagation())
            }
            );
            this.d("ended", this.hd);
            this.d("play", this.Kb);
            this.d("firstplay", this.jd);
            this.d("pause", this.Jb);
            this.d("progress", this.ld);
            this.d("durationchange", this.sc);
            this.d("error", this.Gb);
            this.d("fullscreenchange", this.kd);
            u.xa[this.Q] = this;
            c.plugins && u.k.ua(c.plugins, function(a, c) {
                this[a](c)
            }
            , this);
            var e, g, j, k;
            e = this.Mb;
            a = function() {
                e();
                clearInterval(g);
                g = setInterval(u.bind(this, e), 250)
            }
            ;
            c = function() {
                e();
                clearInterval(g)
            }
            ;
            this.d("mousedown", a);
            this.d("mousemove", e);
            this.d("mouseup", c);
            this.d("keydown", e);
            this.d("keyup", e);
            this.d("touchstart", a);
            this.d("touchmove", e);
            this.d("touchend", c);
            this.d("touchcancel", c);
            j = setInterval(u.bind(this, function() {
                this.ka && (this.ka = l,
                this.ja(f),
                clearTimeout(k),
                k = setTimeout(u.bind(this, function() {
                    this.ka || this.ja(l)
                }
                ), 2000))
            }
            ), 250);
            this.d("dispose", function() {
                clearInterval(j);
                clearTimeout(k)
            }
            )
        }
    });
    t = u.s.prototype;
    t.g = u.options;
    t.D = function() {
        this.j("dispose");
        this.o("dispose");
        u.xa[this.Q] = h;
        this.M && this.M.player && (this.M.player = h);
        this.a && this.a.player && (this.a.player = h);
        clearInterval(this.Ra);
        this.za();
        this.h && this.h.D();
        u.c.prototype.D.call(this)
    }
    ;
    function da(a) {
        var c = {
            sources: [],
            tracks: []
        };
        u.k.B(c, u.xb(a));
        if (a.hasChildNodes()) {
            var d, e, g, j;
            a = a.childNodes;
            g = 0;
            for (j = a.length; g < j; g++) {
                d = a[g],
                e = d.nodeName.toLowerCase(),
                "source" === e ? c.sources.push(u.xb(d)) : "track" === e && c.tracks.push(u.xb(d))
            }
        }
        return c
    }
    t.e = function() {
        var a = this.a = u.c.prototype.e.call(this, "div")
          , c = this.M;
        c.removeAttribute("width");
        c.removeAttribute("height");
        if (c.hasChildNodes()) {
            var d, e, g, j, k;
            d = c.childNodes;
            e = d.length;
            for (k = []; e--; ) {
                g = d[e],
                j = g.nodeName.toLowerCase(),
                "track" === j && k.push(g)
            }
            for (d = 0; d < k.length; d++) {
                c.removeChild(k[d])
            }
        }
        c.id = c.id || "vjs_video_" + u.t++;
        a.id = c.id;
        a.className = c.className;
        c.id += "_html5_api";
        c.className = "vjs-tech";
        c.player = a.player = this;
        this.n("vjs-paused");
        this.width(this.g.width, f);
        this.height(this.g.height, f);
        c.parentNode && c.parentNode.insertBefore(a, c);
        u.zb(c, a);
        return a
    }
    ;
    function I(a, c, d) {
        a.h ? (a.aa = l,
        a.h.D(),
        a.Eb && (a.Eb = l,
        clearInterval(a.Ra)),
        a.Fb && J(a),
        a.h = l) : "Html5" !== c && a.M && (u.l.jc(a.M),
        a.M = h);
        a.ia = c;
        a.aa = l;
        var e = u.k.B({
            source: d,
            parentEl: a.a
        }, a.g[c.toLowerCase()]);
        d && (d.src == a.v.src && 0 < a.v.currentTime && (e.startTime = a.v.currentTime),
        a.v.src = d.src);
        a.h = new window.videojs[c](a,e);
        a.h.L(function() {
            this.b.Ua();
            if (!this.m.progressEvents) {
                var a = this.b;
                a.Eb = f;
                a.Ra = setInterval(u.bind(a, function() {
                    this.v.lb < this.buffered().end(0) ? this.j("progress") : 1 == this.Ja() && (clearInterval(this.Ra),
                    this.j("progress"))
                }
                ), 500);
                a.h.U("progress", function() {
                    this.m.progressEvents = f;
                    var a = this.b;
                    a.Eb = l;
                    clearInterval(a.Ra)
                }
                )
            }
            this.m.timeupdateEvents || (a = this.b,
            a.Fb = f,
            a.d("play", a.Cc),
            a.d("pause", a.za),
            a.h.U("timeupdate", function() {
                this.m.timeupdateEvents = f;
                J(this.b)
            }
            ))
        }
        )
    }
    function J(a) {
        a.Fb = l;
        a.za();
        a.o("play", a.Cc);
        a.o("pause", a.za)
    }
    t.Cc = function() {
        this.hc && this.za();
        this.hc = setInterval(u.bind(this, function() {
            this.j("timeupdate")
        }
        ), 250)
    }
    ;
    t.za = function() {
        clearInterval(this.hc)
    }
    ;
    t.Kb = function() {
        u.u(this.a, "vjs-paused");
        u.n(this.a, "vjs-playing")
    }
    ;
    t.jd = function() {
        this.g.starttime && this.currentTime(this.g.starttime);
        this.n("vjs-has-started")
    }
    ;
    t.Jb = function() {
        u.u(this.a, "vjs-playing");
        u.n(this.a, "vjs-paused")
    }
    ;
    t.ld = function() {
        1 == this.Ja() && this.j("loadedalldata")
    }
    ;
    t.hd = function() {
        this.g.loop && (this.currentTime(0),
        this.play())
    }
    ;
    t.sc = function() {
        this.duration(K(this, "duration"))
    }
    ;
    t.kd = function() {
        this.H ? this.n("vjs-fullscreen") : this.u("vjs-fullscreen")
    }
    ;
    t.Gb = function(a) {
        u.log("Video Error", a)
    }
    ;
    function L(a, c, d) {
        if (a.h && !a.h.aa) {
            a.h.L(function() {
                this[c](d)
            }
            )
        } else {
            try {
                a.h[c](d)
            } catch (e) {
                throw u.log(e),
                e
            }
        }
    }
    function K(a, c) {
        if (a.h && a.h.aa) {
            try {
                return a.h[c]()
            } catch (d) {
                throw a.h[c] === b ? u.log("Video.js: " + c + " method not defined for " + a.ia + " playback technology.", d) : "TypeError" == d.name ? (u.log("Video.js: " + c + " unavailable on " + a.ia + " playback technology element.", d),
                a.h.aa = l) : u.log(d),
                d
            }
        }
    }
    t.play = function() {
        L(this, "play");
        return this
    }
    ;
    t.pause = function() {
        L(this, "pause");
        return this
    }
    ;
    t.paused = function() {
        return K(this, "paused") === l ? l : f
    }
    ;
    t.currentTime = function(a) {
        return a !== b ? (this.v.rc = a,
        L(this, "setCurrentTime", a),
        this.Fb && this.j("timeupdate"),
        this) : this.v.currentTime = K(this, "currentTime") || 0
    }
    ;
    t.duration = function(a) {
        if (a !== b) {
            return this.v.duration = parseFloat(a),
            this
        }
        this.v.duration === b && this.sc();
        return this.v.duration
    }
    ;
    t.buffered = function() {
        var a = K(this, "buffered")
          , c = a.length - 1
          , d = this.v.lb = this.v.lb || 0;
        a && (0 <= c && a.end(c) !== d) && (d = a.end(c),
        this.v.lb = d);
        return u.tb(0, d)
    }
    ;
    t.Ja = function() {
        return this.duration() ? this.buffered().end(0) / this.duration() : 0
    }
    ;
    t.volume = function(a) {
        if (a !== b) {
            return a = Math.max(0, Math.min(1, parseFloat(a))),
            this.v.volume = a,
            L(this, "setVolume", a),
            u.td(a),
            this
        }
        a = parseFloat(K(this, "volume"));
        return isNaN(a) ? 1 : a
    }
    ;
    t.muted = function(a) {
        return a !== b ? (L(this, "setMuted", a),
        this) : K(this, "muted") || l
    }
    ;
    t.Ta = function() {
        return K(this, "supportsFullScreen") || l
    }
    ;
    t.ya = function() {
        var a = u.Pb.ya;
        this.H = f;
        a ? (u.d(document, a.vb, u.bind(this, function(c) {
            this.H = document[a.H];
            this.H === l && u.o(document, a.vb, arguments.callee);
            this.j("fullscreenchange")
        }
        )),
        this.a[a.wc]()) : this.h.Ta() ? L(this, "enterFullScreen") : (this.cd = f,
        this.Yc = document.documentElement.style.overflow,
        u.d(document, "keydown", u.bind(this, this.lc)),
        document.documentElement.style.overflow = "hidden",
        u.n(document.body, "vjs-full-window"),
        this.j("enterFullWindow"),
        this.j("fullscreenchange"));
        return this
    }
    ;
    t.ob = function() {
        var a = u.Pb.ya;
        this.H = l;
        if (a) {
            document[a.nb]()
        } else {
            this.h.Ta() ? L(this, "exitFullScreen") : (M(this),
            this.j("fullscreenchange"))
        }
        return this
    }
    ;
    t.lc = function(a) {
        27 === a.keyCode && (this.H === f ? this.ob() : M(this))
    }
    ;
    function M(a) {
        a.cd = l;
        u.o(document, "keydown", a.lc);
        document.documentElement.style.overflow = a.Yc;
        u.u(document.body, "vjs-full-window");
        a.j("exitFullWindow")
    }
    t.src = function(a) {
        if (a instanceof Array) {
            var c;
            a: {
                c = a;
                for (var d = 0, e = this.g.techOrder; d < e.length; d++) {
                    var g = u.$(e[d])
                      , j = window.videojs[g];
                    if (j.isSupported()) {
                        for (var k = 0, q = c; k < q.length; k++) {
                            var n = q[k];
                            if (j.canPlaySource(n)) {
                                c = {
                                    source: n,
                                    h: g
                                };
                                break a
                            }
                        }
                    }
                }
                c = l
            }
            c ? (a = c.source,
            c = c.h,
            c == this.ia ? this.src(a) : I(this, c, a)) : this.a.appendChild(u.e("p", {
                innerHTML: this.options().notSupportedMessage
            }))
        } else {
            a instanceof Object ? window.videojs[this.ia].canPlaySource(a) ? this.src(a.src) : this.src([a]) : (this.v.src = a,
            this.aa ? (L(this, "src", a),
            "auto" == this.g.preload && this.load(),
            this.g.autoplay && this.play()) : this.L(function() {
                this.src(a)
            }
            ))
        }
        return this
    }
    ;
    t.load = function() {
        L(this, "load");
        return this
    }
    ;
    t.currentSrc = function() {
        return K(this, "currentSrc") || this.v.src || ""
    }
    ;
    t.Qa = function(a) {
        return a !== b ? (L(this, "setPreload", a),
        this.g.preload = a,
        this) : K(this, "preload")
    }
    ;
    t.autoplay = function(a) {
        return a !== b ? (L(this, "setAutoplay", a),
        this.g.autoplay = a,
        this) : K(this, "autoplay")
    }
    ;
    t.loop = function(a) {
        return a !== b ? (L(this, "setLoop", a),
        this.g.loop = a,
        this) : K(this, "loop")
    }
    ;
    t.poster = function(a) {
        return a !== b ? (this.uc = a,
        this) : this.uc
    }
    ;
    t.controls = function(a) {
        return a !== b ? (a = !!a,
        this.sb !== a && ((this.sb = a) ? (this.u("vjs-controls-disabled"),
        this.n("vjs-controls-enabled"),
        this.j("controlsenabled")) : (this.u("vjs-controls-enabled"),
        this.n("vjs-controls-disabled"),
        this.j("controlsdisabled"))),
        this) : this.sb
    }
    ;
    u.s.prototype.Sb;
    t = u.s.prototype;
    t.Rb = function(a) {
        return a !== b ? (a = !!a,
        this.Sb !== a && ((this.Sb = a) ? (this.n("vjs-using-native-controls"),
        this.j("usingnativecontrols")) : (this.u("vjs-using-native-controls"),
        this.j("usingcustomcontrols"))),
        this) : this.Sb
    }
    ;
    t.error = function() {
        return K(this, "error")
    }
    ;
    t.seeking = function() {
        return K(this, "seeking")
    }
    ;
    t.ka = f;
    t.Mb = function() {
        this.ka = f
    }
    ;
    t.Qb = f;
    t.ja = function(a) {
        return a !== b ? (a = !!a,
        a !== this.Qb && ((this.Qb = a) ? (this.ka = f,
        this.u("vjs-user-inactive"),
        this.n("vjs-user-active"),
        this.j("useractive")) : (this.ka = l,
        this.h.U("mousemove", function(a) {
            a.stopPropagation();
            a.preventDefault()
        }
        ),
        this.u("vjs-user-active"),
        this.n("vjs-user-inactive"),
        this.j("userinactive"))),
        this) : this.Qb
    }
    ;
    var N, O, P;
    P = document.createElement("div");
    O = {};
    P.Hd !== b ? (O.wc = "requestFullscreen",
    O.nb = "exitFullscreen",
    O.vb = "fullscreenchange",
    O.H = "fullScreen") : (document.mozCancelFullScreen ? (N = "moz",
    O.H = N + "FullScreen") : (N = "webkit",
    O.H = N + "IsFullScreen"),
    P[N + "RequestFullScreen"] && (O.wc = N + "RequestFullScreen",
    O.nb = N + "CancelFullScreen"),
    O.vb = N + "fullscreenchange");
    document[O.nb] && (u.Pb.ya = O);
    u.Fa = u.c.extend();
    u.Fa.prototype.g = {
        Md: "play",
        children: {
            playToggle: {},
            currentTimeDisplay: {},
            timeDivider: {},
            durationDisplay: {},
            remainingTimeDisplay: {},
            progressControl: {},
            fullscreenToggle: {},
            volumeControl: {},
            muteToggle: {}
        }
    };
    u.Fa.prototype.e = function() {
        return u.e("div", {
            className: "vjs-control-bar"
        })
    }
    ;
    u.Yb = u.q.extend({
        i: function(a, c) {
            u.q.call(this, a, c);
            a.d("play", u.bind(this, this.Kb));
            a.d("pause", u.bind(this, this.Jb))
        }
    });
    t = u.Yb.prototype;
    t.qa = "Play";
    t.T = function() {
        return "vjs-play-control " + u.q.prototype.T.call(this)
    }
    ;
    t.p = function() {
        this.b.paused() ? this.b.play() : this.b.pause()
    }
    ;
    t.Kb = function() {
        u.u(this.a, "vjs-paused");
        u.n(this.a, "vjs-playing");
        this.a.children[0].children[0].innerHTML = "Pause"
    }
    ;
    t.Jb = function() {
        u.u(this.a, "vjs-playing");
        u.n(this.a, "vjs-paused");
        this.a.children[0].children[0].innerHTML = "Play"
    }
    ;
    u.Ya = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            a.d("timeupdate", u.bind(this, this.Ca))
        }
    });
    u.Ya.prototype.e = function() {
        var a = u.c.prototype.e.call(this, "div", {
            className: "vjs-current-time vjs-time-controls vjs-control"
        });
        this.content = u.e("div", {
            className: "vjs-current-time-display",
            innerHTML: '<span class="vjs-control-text">Current Time </span>0:00',
            "aria-live": "off"
        });
        a.appendChild(u.e("div").appendChild(this.content));
        return a
    }
    ;
    u.Ya.prototype.Ca = function() {
        var a = this.b.Nb ? this.b.v.currentTime : this.b.currentTime();
        this.content.innerHTML = '<span class="vjs-control-text">Current Time </span>' + u.La(a, this.b.duration())
    }
    ;
    u.Za = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            a.d("timeupdate", u.bind(this, this.Ca))
        }
    });
    u.Za.prototype.e = function() {
        var a = u.c.prototype.e.call(this, "div", {
            className: "vjs-duration vjs-time-controls vjs-control"
        });
        this.content = u.e("div", {
            className: "vjs-duration-display",
            innerHTML: '<span class="vjs-control-text">Duration Time </span>0:00',
            "aria-live": "off"
        });
        a.appendChild(u.e("div").appendChild(this.content));
        return a
    }
    ;
    u.Za.prototype.Ca = function() {
        var a = this.b.duration();
        a && (this.content.innerHTML = '<span class="vjs-control-text">Duration Time </span>' + u.La(a))
    }
    ;
    u.cc = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c)
        }
    });
    u.cc.prototype.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-time-divider",
            innerHTML: "<div><span>/</span></div>"
        })
    }
    ;
    u.fb = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            a.d("timeupdate", u.bind(this, this.Ca))
        }
    });
    u.fb.prototype.e = function() {
        var a = u.c.prototype.e.call(this, "div", {
            className: "vjs-remaining-time vjs-time-controls vjs-control"
        });
        this.content = u.e("div", {
            className: "vjs-remaining-time-display",
            innerHTML: '<span class="vjs-control-text">Remaining Time </span>-0:00',
            "aria-live": "off"
        });
        a.appendChild(u.e("div").appendChild(this.content));
        return a
    }
    ;
    u.fb.prototype.Ca = function() {
        this.b.duration() && (this.content.innerHTML = '<span class="vjs-control-text">Remaining Time </span>-' + u.La(this.b.duration() - this.b.currentTime()))
    }
    ;
    u.Ga = u.q.extend({
        i: function(a, c) {
            u.q.call(this, a, c)
        }
    });
    u.Ga.prototype.qa = "Fullscreen";
    u.Ga.prototype.T = function() {
        return "vjs-fullscreen-control " + u.q.prototype.T.call(this)
    }
    ;
    u.Ga.prototype.p = function() {
        this.b.H ? (this.b.ob(),
        this.a.children[0].children[0].innerHTML = "Fullscreen") : (this.b.ya(),
        this.a.children[0].children[0].innerHTML = "Non-Fullscreen")
    }
    ;
    u.eb = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c)
        }
    });
    u.eb.prototype.g = {
        children: {
            seekBar: {}
        }
    };
    u.eb.prototype.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-progress-control vjs-control"
        })
    }
    ;
    u.Zb = u.O.extend({
        i: function(a, c) {
            u.O.call(this, a, c);
            a.d("timeupdate", u.bind(this, this.Ba));
            a.L(u.bind(this, this.Ba))
        }
    });
    t = u.Zb.prototype;
    t.g = {
        children: {
            loadProgressBar: {},
            playProgressBar: {},
            seekHandle: {}
        },
        barName: "playProgressBar",
        handleName: "seekHandle"
    };
    t.tc = "timeupdate";
    t.e = function() {
        return u.O.prototype.e.call(this, "div", {
            className: "vjs-progress-holder",
            "aria-label": "video progress bar"
        })
    }
    ;
    t.Ba = function() {
        var a = this.b.Nb ? this.b.v.currentTime : this.b.currentTime();
        this.a.setAttribute("aria-valuenow", u.round(100 * this.yb(), 2));
        this.a.setAttribute("aria-valuetext", u.La(a, this.b.duration()))
    }
    ;
    t.yb = function() {
        var a;
        "Flash" === this.b.ia && this.b.seeking() ? (a = this.b.v,
        a = a.rc ? a.rc : this.b.currentTime()) : a = this.b.currentTime();
        return a / this.b.duration()
    }
    ;
    t.Pa = function(a) {
        u.O.prototype.Pa.call(this, a);
        this.b.Nb = f;
        this.Dd = !this.b.paused();
        this.b.pause()
    }
    ;
    t.Hb = function(a) {
        a = F(this, a) * this.b.duration();
        a == this.b.duration() && (a -= 0.1);
        this.b.currentTime(a)
    }
    ;
    t.Ib = function(a) {
        u.O.prototype.Ib.call(this, a);
        this.b.Nb = l;
        this.Dd && this.b.play()
    }
    ;
    t.zc = function() {
        this.b.currentTime(this.b.currentTime() + 5)
    }
    ;
    t.yc = function() {
        this.b.currentTime(this.b.currentTime() - 5)
    }
    ;
    u.ab = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            a.d("progress", u.bind(this, this.update))
        }
    });
    u.ab.prototype.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-load-progress",
            innerHTML: '<span class="vjs-control-text">Loaded: 0%</span>'
        })
    }
    ;
    u.ab.prototype.update = function() {
        this.a.style && (this.a.style.width = u.round(100 * this.b.Ja(), 2) + "%")
    }
    ;
    u.Xb = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c)
        }
    });
    u.Xb.prototype.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-play-progress",
            innerHTML: '<span class="vjs-control-text">Progress: 0%</span>'
        })
    }
    ;
    u.gb = u.ea.extend();
    u.gb.prototype.defaultValue = "00:00";
    u.gb.prototype.e = function() {
        return u.ea.prototype.e.call(this, "div", {
            className: "vjs-seek-handle"
        })
    }
    ;
    u.ib = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            a.h && (a.h.m && a.h.m.volumeControl === l) && this.n("vjs-hidden");
            a.d("loadstart", u.bind(this, function() {
                a.h.m && a.h.m.volumeControl === l ? this.n("vjs-hidden") : this.u("vjs-hidden")
            }
            ))
        }
    });
    u.ib.prototype.g = {
        children: {
            volumeBar: {}
        }
    };
    u.ib.prototype.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-volume-control vjs-control"
        })
    }
    ;
    u.hb = u.O.extend({
        i: function(a, c) {
            u.O.call(this, a, c);
            a.d("volumechange", u.bind(this, this.Ba));
            a.L(u.bind(this, this.Ba));
            setTimeout(u.bind(this, this.update), 0)
        }
    });
    t = u.hb.prototype;
    t.Ba = function() {
        this.a.setAttribute("aria-valuenow", u.round(100 * this.b.volume(), 2));
        this.a.setAttribute("aria-valuetext", u.round(100 * this.b.volume(), 2) + "%")
    }
    ;
    t.g = {
        children: {
            volumeLevel: {},
            volumeHandle: {}
        },
        barName: "volumeLevel",
        handleName: "volumeHandle"
    };
    t.tc = "volumechange";
    t.e = function() {
        return u.O.prototype.e.call(this, "div", {
            className: "vjs-volume-bar",
            "aria-label": "volume level"
        })
    }
    ;
    t.Hb = function(a) {
        this.b.muted() && this.b.muted(l);
        this.b.volume(F(this, a))
    }
    ;
    t.yb = function() {
        return this.b.muted() ? 0 : this.b.volume()
    }
    ;
    t.zc = function() {
        this.b.volume(this.b.volume() + 0.1)
    }
    ;
    t.yc = function() {
        this.b.volume(this.b.volume() - 0.1)
    }
    ;
    u.dc = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c)
        }
    });
    u.dc.prototype.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-volume-level",
            innerHTML: '<span class="vjs-control-text"></span>'
        })
    }
    ;
    u.jb = u.ea.extend();
    u.jb.prototype.defaultValue = "00:00";
    u.jb.prototype.e = function() {
        return u.ea.prototype.e.call(this, "div", {
            className: "vjs-volume-handle"
        })
    }
    ;
    u.da = u.q.extend({
        i: function(a, c) {
            u.q.call(this, a, c);
            a.d("volumechange", u.bind(this, this.update));
            a.h && (a.h.m && a.h.m.volumeControl === l) && this.n("vjs-hidden");
            a.d("loadstart", u.bind(this, function() {
                a.h.m && a.h.m.volumeControl === l ? this.n("vjs-hidden") : this.u("vjs-hidden")
            }
            ))
        }
    });
    u.da.prototype.e = function() {
        return u.q.prototype.e.call(this, "div", {
            className: "vjs-mute-control vjs-control",
            innerHTML: '<div><span class="vjs-control-text">Mute</span></div>'
        })
    }
    ;
    u.da.prototype.p = function() {
        this.b.muted(this.b.muted() ? l : f)
    }
    ;
    u.da.prototype.update = function() {
        var a = this.b.volume()
          , c = 3;
        0 === a || this.b.muted() ? c = 0 : 0.33 > a ? c = 1 : 0.67 > a && (c = 2);
        this.b.muted() ? "Unmute" != this.a.children[0].children[0].innerHTML && (this.a.children[0].children[0].innerHTML = "Unmute") : "Mute" != this.a.children[0].children[0].innerHTML && (this.a.children[0].children[0].innerHTML = "Mute");
        for (a = 0; 4 > a; a++) {
            u.u(this.a, "vjs-vol-" + a)
        }
        u.n(this.a, "vjs-vol-" + c)
    }
    ;
    u.oa = u.R.extend({
        i: function(a, c) {
            u.R.call(this, a, c);
            a.d("volumechange", u.bind(this, this.update));
            a.h && (a.h.m && a.h.m.Dc === l) && this.n("vjs-hidden");
            a.d("loadstart", u.bind(this, function() {
                a.h.m && a.h.m.Dc === l ? this.n("vjs-hidden") : this.u("vjs-hidden")
            }
            ));
            this.n("vjs-menu-button")
        }
    });
    u.oa.prototype.Ka = function() {
        var a = new u.ma(this.b,{
            Vc: "div"
        })
          , c = new u.hb(this.b,u.k.B({
            Cd: f
        }, this.g.Vd));
        a.Z(c);
        return a
    }
    ;
    u.oa.prototype.p = function() {
        u.da.prototype.p.call(this);
        u.R.prototype.p.call(this)
    }
    ;
    u.oa.prototype.e = function() {
        return u.q.prototype.e.call(this, "div", {
            className: "vjs-volume-menu-button vjs-menu-button vjs-control",
            innerHTML: '<div><span class="vjs-control-text">Mute</span></div>'
        })
    }
    ;
    u.oa.prototype.update = u.da.prototype.update;
    u.cb = u.q.extend({
        i: function(a, c) {
            u.q.call(this, a, c);
            (!a.poster() || !a.controls()) && this.C();
            a.d("play", u.bind(this, this.C))
        }
    });
    u.cb.prototype.e = function() {
        var a = u.e("div", {
            className: "vjs-poster",
            tabIndex: -1
        })
          , c = this.b.poster();
        c && ("backgroundSize" in a.style ? a.style.backgroundImage = 'url("' + c + '")' : a.appendChild(u.e("img", {
            src: c
        })));
        return a
    }
    ;
    u.cb.prototype.p = function() {
        this.K().controls() && this.b.play()
    }
    ;
    u.Wb = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            a.d("canplay", u.bind(this, this.C));
            a.d("canplaythrough", u.bind(this, this.C));
            a.d("playing", u.bind(this, this.C));
            a.d("seeked", u.bind(this, this.C));
            a.d("seeking", u.bind(this, this.show));
            a.d("seeked", u.bind(this, this.C));
            a.d("error", u.bind(this, this.show));
            a.d("waiting", u.bind(this, this.show))
        }
    });
    u.Wb.prototype.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-loading-spinner"
        })
    }
    ;
    u.Wa = u.q.extend();
    u.Wa.prototype.e = function() {
        return u.q.prototype.e.call(this, "div", {
            className: "vjs-big-play-button",
            innerHTML: '<span aria-hidden="true"></span>',
            "aria-label": "play video"
        })
    }
    ;
    u.Wa.prototype.p = function() {
        this.b.play()
    }
    ;
    u.r = u.c.extend({
        i: function(a, c, d) {
            u.c.call(this, a, c, d);
            var e, g;
            g = this;
            e = this.K();
            a = function() {
                if (e.controls() && !e.Rb()) {
                    var a, c;
                    g.d("mousedown", g.p);
                    g.d("touchstart", function(a) {
                        a.preventDefault();
                        a.stopPropagation();
                        c = this.b.ja()
                    }
                    );
                    a = function(a) {
                        a.stopPropagation();
                        c && this.b.Mb()
                    }
                    ;
                    g.d("touchmove", a);
                    g.d("touchleave", a);
                    g.d("touchcancel", a);
                    g.d("touchend", a);
                    var d, n, r;
                    d = 0;
                    g.d("touchstart", function() {
                        d = (new Date).getTime();
                        r = f
                    }
                    );
                    a = function() {
                        r = l
                    }
                    ;
                    g.d("touchmove", a);
                    g.d("touchleave", a);
                    g.d("touchcancel", a);
                    g.d("touchend", function() {
                        r === f && (n = (new Date).getTime() - d,
                        250 > n && this.j("tap"))
                    }
                    );
                    g.d("tap", g.md)
                }
            }
            ;
            c = u.bind(g, g.pd);
            this.L(a);
            e.d("controlsenabled", a);
            e.d("controlsdisabled", c)
        }
    });
    u.r.prototype.pd = function() {
        this.o("tap");
        this.o("touchstart");
        this.o("touchmove");
        this.o("touchleave");
        this.o("touchcancel");
        this.o("touchend");
        this.o("click");
        this.o("mousedown")
    }
    ;
    u.r.prototype.p = function(a) {
        0 === a.button && this.K().controls() && (this.K().paused() ? this.K().play() : this.K().pause())
    }
    ;
    u.r.prototype.md = function() {
        this.K().ja(!this.K().ja())
    }
    ;
    u.r.prototype.m = {
        volumeControl: f,
        fullscreenResize: l,
        progressEvents: l,
        timeupdateEvents: l
    };
    u.media = {};
    u.media.Va = "play pause paused currentTime setCurrentTime duration buffered volume setVolume muted setMuted width height supportsFullScreen enterFullScreen src load currentSrc preload setPreload autoplay setAutoplay loop setLoop error networkState readyState seeking initialTime startOffsetTime played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks defaultPlaybackRate playbackRate mediaGroup controller controls defaultMuted".split(" ");
    function ea() {
        var a = u.media.Va[i];
        return function() {
            throw Error('The "' + a + "\" method is not available on the playback technology's API")
        }
    }
    for (var i = u.media.Va.length - 1; 0 <= i; i--) {
        u.r.prototype[u.media.Va[i]] = ea()
    }
    u.l = u.r.extend({
        i: function(a, c, d) {
            this.m.volumeControl = u.l.Uc();
            this.m.movingMediaElementInDOM = !u.Kc;
            this.m.fullscreenResize = f;
            u.r.call(this, a, c, d);
            (c = c.source) && this.a.currentSrc === c.src && 0 < this.a.networkState ? a.j("loadstart") : c && (this.a.src = c.src);
            if (u.ac && a.options().nativeControlsForTouch !== l) {
                var e, g, j, k;
                e = this;
                g = this.K();
                c = g.controls();
                e.a.controls = !!c;
                j = function() {
                    e.a.controls = f
                }
                ;
                k = function() {
                    e.a.controls = l
                }
                ;
                g.d("controlsenabled", j);
                g.d("controlsdisabled", k);
                c = function() {
                    g.o("controlsenabled", j);
                    g.o("controlsdisabled", k)
                }
                ;
                e.d("dispose", c);
                g.d("usingcustomcontrols", c);
                g.Rb(f)
            }
            a.L(function() {
                this.M && (this.g.autoplay && this.paused()) && (delete this.M.poster,
                this.play())
            }
            );
            for (a = u.l.$a.length - 1; 0 <= a; a--) {
                u.d(this.a, u.l.$a[a], u.bind(this.b, this.$c))
            }
            this.Ua()
        }
    });
    t = u.l.prototype;
    t.D = function() {
        u.r.prototype.D.call(this)
    }
    ;
    t.e = function() {
        var a = this.b, c = a.M, d;
        if (!c || this.m.movingMediaElementInDOM === l) {
            c ? (d = c.cloneNode(l),
            u.l.jc(c),
            c = d,
            a.M = h) : c = u.e("video", {
                id: a.id() + "_html5_api",
                className: "vjs-tech"
            }),
            c.player = a,
            u.zb(c, a.w())
        }
        d = ["autoplay", "preload", "loop", "muted"];
        for (var e = d.length - 1; 0 <= e; e--) {
            var g = d[e];
            a.g[g] !== h && (c[g] = a.g[g])
        }
        return c
    }
    ;
    t.$c = function(a) {
        this.j(a);
        a.stopPropagation()
    }
    ;
    t.play = function() {
        this.a.play()
    }
    ;
    t.pause = function() {
        this.a.pause()
    }
    ;
    t.paused = function() {
        return this.a.paused
    }
    ;
    t.currentTime = function() {
        return this.a.currentTime
    }
    ;
    t.sd = function(a) {
        try {
            this.a.currentTime = a
        } catch (c) {
            u.log(c, "Video is not ready. (Video.js)")
        }
    }
    ;
    t.duration = function() {
        return this.a.duration || 0
    }
    ;
    t.buffered = function() {
        return this.a.buffered
    }
    ;
    t.volume = function() {
        return this.a.volume
    }
    ;
    t.xd = function(a) {
        this.a.volume = a
    }
    ;
    t.muted = function() {
        return this.a.muted
    }
    ;
    t.vd = function(a) {
        this.a.muted = a
    }
    ;
    t.width = function() {
        return this.a.offsetWidth
    }
    ;
    t.height = function() {
        return this.a.offsetHeight
    }
    ;
    t.Ta = function() {
        return "function" == typeof this.a.webkitEnterFullScreen && (/Android/.test(u.F) || !/Chrome|Mac OS X 10.5/.test(u.F)) ? f : l
    }
    ;
    t.src = function(a) {
        this.a.src = a
    }
    ;
    t.load = function() {
        this.a.load()
    }
    ;
    t.currentSrc = function() {
        return this.a.currentSrc
    }
    ;
    t.Qa = function() {
        return this.a.Qa
    }
    ;
    t.wd = function(a) {
        this.a.Qa = a
    }
    ;
    t.autoplay = function() {
        return this.a.autoplay
    }
    ;
    t.rd = function(a) {
        this.a.autoplay = a
    }
    ;
    t.controls = function() {
        return this.a.controls
    }
    ;
    t.loop = function() {
        return this.a.loop
    }
    ;
    t.ud = function(a) {
        this.a.loop = a
    }
    ;
    t.error = function() {
        return this.a.error
    }
    ;
    t.seeking = function() {
        return this.a.seeking
    }
    ;
    u.l.isSupported = function() {
        return !!u.na.canPlayType
    }
    ;
    u.l.mb = function(a) {
        try {
            return !!u.na.canPlayType(a.type)
        } catch (c) {
            return ""
        }
    }
    ;
    u.l.Uc = function() {
        var a = u.na.volume;
        u.na.volume = a / 2 + 0.1;
        return a !== u.na.volume
    }
    ;
    u.l.$a = "loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" ");
    u.l.jc = function(a) {
        if (a) {
            a.player = h;
            for (a.parentNode && a.parentNode.removeChild(a); a.hasChildNodes(); ) {
                a.removeChild(a.firstChild)
            }
            a.removeAttribute("src");
            "function" === typeof a.load && a.load()
        }
    }
    ;
    u.Oc && (document.createElement("video").constructor.prototype.canPlayType = function(a) {
        return a && -1 != a.toLowerCase().indexOf("video/mp4") ? "maybe" : ""
    }
    );
    u.f = u.r.extend({
        i: function(a, c, d) {
            u.r.call(this, a, c, d);
            var e = c.source;
            d = c.parentEl;
            var g = this.a = u.e("div", {
                id: a.id() + "_temp_flash"
            })
              , j = a.id() + "_flash_api";
            a = a.g;
            var k = u.k.B({
                readyFunction: "videojs.Flash.onReady",
                eventProxyFunction: "videojs.Flash.onEvent",
                errorEventProxyFunction: "videojs.Flash.onError",
                autoplay: a.autoplay,
                preload: a.Qa,
                loop: a.loop,
                muted: a.muted
            }, c.flashVars)
              , q = u.k.B({
                wmode: "opaque",
                bgcolor: "#000000"
            }, c.params)
              , n = u.k.B({
                id: j,
                name: j,
                "class": "vjs-tech"
            }, c.attributes);
            e && (e.type && u.f.ed(e.type) ? (a = u.f.Ac(e.src),
            k.rtmpConnection = encodeURIComponent(a.rb),
            k.rtmpStream = encodeURIComponent(a.Ob)) : k.src = encodeURIComponent(u.mc(e.src)));
            u.zb(g, d);
            c.startTime && this.L(function() {
                this.load();
                this.play();
                this.currentTime(c.startTime)
            }
            );
            if (c.iFrameMode === f && !u.Jc) {
                var r = u.e("iframe", {
                    id: j + "_iframe",
                    name: j + "_iframe",
                    className: "vjs-tech",
                    scrolling: "no",
                    marginWidth: 0,
                    marginHeight: 0,
                    frameBorder: 0
                });
                k.readyFunction = "ready";
                k.eventProxyFunction = "events";
                k.errorEventProxyFunction = "errors";
                u.d(r, "load", u.bind(this, function() {
                    var a, d = r.contentWindow;
                    a = r.contentDocument ? r.contentDocument : r.contentWindow.document;
                    a.write(u.f.nc(c.swf, k, q, n));
                    d.player = this.b;
                    d.ready = u.bind(this.b, function(c) {
                        var d = this.h;
                        d.a = a.getElementById(c);
                        u.f.pb(d)
                    }
                    );
                    d.events = u.bind(this.b, function(a, c) {
                        this && "flash" === this.ia && this.j(c)
                    }
                    );
                    d.errors = u.bind(this.b, function(a, c) {
                        u.log("Flash Error", c)
                    }
                    )
                }
                ));
                g.parentNode.replaceChild(r, g)
            } else {
                u.f.Zc(c.swf, g, k, q, n)
            }
        }
    });
    t = u.f.prototype;
    t.D = function() {
        u.r.prototype.D.call(this)
    }
    ;
    t.play = function() {
        this.a.vjs_play()
    }
    ;
    t.pause = function() {
        this.a.vjs_pause()
    }
    ;
    t.src = function(a) {
        u.f.dd(a) ? (a = u.f.Ac(a),
        this.Qd(a.rb),
        this.Rd(a.Ob)) : (a = u.mc(a),
        this.a.vjs_src(a));
        if (this.b.autoplay()) {
            var c = this;
            setTimeout(function() {
                c.play()
            }
            , 0)
        }
    }
    ;
    t.currentSrc = function() {
        var a = this.a.vjs_getProperty("currentSrc");
        if (a == h) {
            var c = this.Od()
              , d = this.Pd();
            c && d && (a = u.f.yd(c, d))
        }
        return a
    }
    ;
    t.load = function() {
        this.a.vjs_load()
    }
    ;
    t.poster = function() {
        this.a.vjs_getProperty("poster")
    }
    ;
    t.buffered = function() {
        return u.tb(0, this.a.vjs_getProperty("buffered"))
    }
    ;
    t.Ta = s(l);
    var Q = u.f.prototype
      , R = "rtmpConnection rtmpStream preload currentTime defaultPlaybackRate playbackRate autoplay loop mediaGroup controller controls volume muted defaultMuted".split(" ")
      , S = "error currentSrc networkState readyState seeking initialTime duration startOffsetTime paused played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks".split(" ");
    function fa() {
        var a = R[T]
          , c = a.charAt(0).toUpperCase() + a.slice(1);
        Q["set" + c] = function(c) {
            return this.a.vjs_setProperty(a, c)
        }
    }
    function U(a) {
        Q[a] = function() {
            return this.a.vjs_getProperty(a)
        }
    }
    var T;
    for (T = 0; T < R.length; T++) {
        U(R[T]),
        fa()
    }
    for (T = 0; T < S.length; T++) {
        U(S[T])
    }
    u.f.isSupported = function() {
        return 10 <= u.f.version()[0]
    }
    ;
    u.f.mb = function(a) {
        if (!a.type) {
            return ""
        }
        a = a.type.replace(/;.*/, "").toLowerCase();
        if (a in u.f.bd || a in u.f.Bc) {
            return "maybe"
        }
    }
    ;
    u.f.bd = {
        "video/flv": "FLV",
        "video/x-flv": "FLV",
        "video/mp4": "MP4",
        "video/m4v": "MP4"
    };
    u.f.Bc = {
        "rtmp/mp4": "MP4",
        "rtmp/flv": "FLV"
    };
    u.f.onReady = function(a) {
        a = u.w(a);
        var c = a.player || a.parentNode.player
          , d = c.h;
        a.player = c;
        d.a = a;
        u.f.pb(d)
    }
    ;
    u.f.pb = function(a) {
        a.w().vjs_getProperty ? a.Ua() : setTimeout(function() {
            u.f.pb(a)
        }
        , 50)
    }
    ;
    u.f.onEvent = function(a, c) {
        u.w(a).player.j(c)
    }
    ;
    u.f.onError = function(a, c) {
        u.w(a).player.j("error");
        u.log("Flash Error", c, a)
    }
    ;
    u.f.version = function() {
        var a = "0,0,0";
        try {
            a = (new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g, ",").match(/^,?(.+),?$/)[1]
        } catch (c) {
            try {
                navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin && (a = (navigator.plugins["Shockwave Flash 2.0"] || navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g, ",").match(/^,?(.+),?$/)[1])
            } catch (d) {}
        }
        return a.split(",")
    }
    ;
    u.f.Zc = function(a, c, d, e, g) {
        a = u.f.nc(a, d, e, g);
        a = u.e("div", {
            innerHTML: a
        }).childNodes[0];
        d = c.parentNode;
        c.parentNode.replaceChild(a, c);
        var j = d.childNodes[0];
        setTimeout(function() {
            j.style.display = "block"
        }
        , 1000)
    }
    ;
    u.f.nc = function(a, c, d, e) {
        var g = ""
          , j = ""
          , k = "";
        c && u.k.ua(c, function(a, c) {
            g += a + "=" + c + "&amp;"
        }
        );
        d = u.k.B({
            movie: a,
            flashvars: g,
            allowScriptAccess: "always",
            allowNetworking: "all"
        }, d);
        u.k.ua(d, function(a, c) {
            j += '<param name="' + a + '" value="' + c + '" />'
        }
        );
        e = u.k.B({
            data: a,
            width: "100%",
            height: "100%"
        }, e);
        u.k.ua(e, function(a, c) {
            k += a + '="' + c + '" '
        }
        );
        return '<object type="application/x-shockwave-flash"' + k + ">" + j + "</object>"
    }
    ;
    u.f.yd = function(a, c) {
        return a + "&" + c
    }
    ;
    u.f.Ac = function(a) {
        var c = {
            rb: "",
            Ob: ""
        };
        if (!a) {
            return c
        }
        var d = a.indexOf("&"), e;
        -1 !== d ? e = d + 1 : (d = e = a.lastIndexOf("/") + 1,
        0 === d && (d = e = a.length));
        c.rb = a.substring(0, d);
        c.Ob = a.substring(e, a.length);
        return c
    }
    ;
    u.f.ed = function(a) {
        return a in u.f.Bc
    }
    ;
    u.f.Qc = /^rtmp[set]?:\/\//i;
    u.f.dd = function(a) {
        return u.f.Qc.test(a)
    }
    ;
    u.Pc = u.c.extend({
        i: function(a, c, d) {
            u.c.call(this, a, c, d);
            if (!a.g.sources || 0 === a.g.sources.length) {
                c = 0;
                for (d = a.g.techOrder; c < d.length; c++) {
                    var e = u.$(d[c])
                      , g = window.videojs[e];
                    if (g && g.isSupported()) {
                        I(a, e);
                        break
                    }
                }
            } else {
                a.src(a.g.sources)
            }
        }
    });
    function V(a) {
        a.Aa = a.Aa || [];
        return a.Aa
    }
    function W(a, c, d) {
        for (var e = a.Aa, g = 0, j = e.length, k, q; g < j; g++) {
            k = e[g],
            k.id() === c ? (k.show(),
            q = k) : d && (k.J() == d && 0 < k.mode()) && k.disable()
        }
        (c = q ? q.J() : d ? d : l) && a.j(c + "trackchange")
    }
    u.X = u.c.extend({
        i: function(a, c) {
            u.c.call(this, a, c);
            this.Q = c.id || "vjs_" + c.kind + "_" + c.language + "_" + u.t++;
            this.xc = c.src;
            this.Wc = c["default"] || c.dflt;
            this.Ad = c.title;
            this.Ld = c.srclang;
            this.fd = c.label;
            this.fa = [];
            this.ec = [];
            this.ga = this.ha = 0;
            this.b.d("fullscreenchange", u.bind(this, this.Rc))
        }
    });
    t = u.X.prototype;
    t.J = p("A");
    t.src = p("xc");
    t.ub = p("Wc");
    t.title = p("Ad");
    t.label = p("fd");
    t.readyState = p("ha");
    t.mode = p("ga");
    t.Rc = function() {
        this.a.style.fontSize = this.b.H ? 140 * (screen.width / this.b.width()) + "%" : ""
    }
    ;
    t.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-" + this.A + " vjs-text-track"
        })
    }
    ;
    t.show = function() {
        X(this);
        this.ga = 2;
        u.c.prototype.show.call(this)
    }
    ;
    t.C = function() {
        X(this);
        this.ga = 1;
        u.c.prototype.C.call(this)
    }
    ;
    t.disable = function() {
        2 == this.ga && this.C();
        this.b.o("timeupdate", u.bind(this, this.update, this.Q));
        this.b.o("ended", u.bind(this, this.reset, this.Q));
        this.reset();
        this.b.V.textTrackDisplay.removeChild(this);
        this.ga = 0
    }
    ;
    function X(a) {
        0 === a.ha && a.load();
        0 === a.ga && (a.b.d("timeupdate", u.bind(a, a.update, a.Q)),
        a.b.d("ended", u.bind(a, a.reset, a.Q)),
        ("captions" === a.A || "subtitles" === a.A) && a.b.V.textTrackDisplay.Z(a))
    }
    t.load = function() {
        0 === this.ha && (this.ha = 1,
        u.get(this.xc, u.bind(this, this.nd), u.bind(this, this.Gb)))
    }
    ;
    t.Gb = function(a) {
        this.error = a;
        this.ha = 3;
        this.j("error")
    }
    ;
    t.nd = function(a) {
        var c, d;
        a = a.split("\n");
        for (var e = "", g = 1, j = a.length; g < j; g++) {
            if (e = u.trim(a[g])) {
                -1 == e.indexOf("--\x3e") ? (c = e,
                e = u.trim(a[++g])) : c = this.fa.length;
                c = {
                    id: c,
                    index: this.fa.length
                };
                d = e.split(" --\x3e ");
                c.startTime = Y(d[0]);
                c.va = Y(d[1]);
                for (d = []; a[++g] && (e = u.trim(a[g])); ) {
                    d.push(e)
                }
                c.text = d.join("<br/>");
                this.fa.push(c)
            }
        }
        this.ha = 2;
        this.j("loaded")
    }
    ;
    function Y(a) {
        var c = a.split(":");
        a = 0;
        var d, e, g;
        3 == c.length ? (d = c[0],
        e = c[1],
        c = c[2]) : (d = 0,
        e = c[0],
        c = c[1]);
        c = c.split(/\s+/);
        c = c.splice(0, 1)[0];
        c = c.split(/\.|,/);
        g = parseFloat(c[1]);
        c = c[0];
        a += 3600 * parseFloat(d);
        a += 60 * parseFloat(e);
        a += parseFloat(c);
        g && (a += g / 1000);
        return a
    }
    t.update = function() {
        if (0 < this.fa.length) {
            var a = this.b.currentTime();
            if (this.Lb === b || a < this.Lb || this.Ma <= a) {
                var c = this.fa, d = this.b.duration(), e = 0, g = l, j = [], k, q, n, r;
                a >= this.Ma || this.Ma === b ? r = this.wb !== b ? this.wb : 0 : (g = f,
                r = this.Db !== b ? this.Db : c.length - 1);
                for (; ; ) {
                    n = c[r];
                    if (n.va <= a) {
                        e = Math.max(e, n.va),
                        n.Ia && (n.Ia = l)
                    } else {
                        if (a < n.startTime) {
                            if (d = Math.min(d, n.startTime),
                            n.Ia && (n.Ia = l),
                            !g) {
                                break
                            }
                        } else {
                            g ? (j.splice(0, 0, n),
                            q === b && (q = r),
                            k = r) : (j.push(n),
                            k === b && (k = r),
                            q = r),
                            d = Math.min(d, n.va),
                            e = Math.max(e, n.startTime),
                            n.Ia = f
                        }
                    }
                    if (g) {
                        if (0 === r) {
                            break
                        } else {
                            r--
                        }
                    } else {
                        if (r === c.length - 1) {
                            break
                        } else {
                            r++
                        }
                    }
                }
                this.ec = j;
                this.Ma = d;
                this.Lb = e;
                this.wb = k;
                this.Db = q;
                a = this.ec;
                c = "";
                d = 0;
                for (e = a.length; d < e; d++) {
                    c += '<span class="vjs-tt-cue">' + a[d].text + "</span>"
                }
                this.a.innerHTML = c;
                this.j("cuechange")
            }
        }
    }
    ;
    t.reset = function() {
        this.Ma = 0;
        this.Lb = this.b.duration();
        this.Db = this.wb = 0
    }
    ;
    u.Ub = u.X.extend();
    u.Ub.prototype.A = "captions";
    u.$b = u.X.extend();
    u.$b.prototype.A = "subtitles";
    u.Vb = u.X.extend();
    u.Vb.prototype.A = "chapters";
    u.bc = u.c.extend({
        i: function(a, c, d) {
            u.c.call(this, a, c, d);
            if (a.g.tracks && 0 < a.g.tracks.length) {
                c = this.b;
                a = a.g.tracks;
                var e;
                for (d = 0; d < a.length; d++) {
                    e = a[d];
                    var g = c
                      , j = e.kind
                      , k = e.label
                      , q = e.language
                      , n = e;
                    e = g.Aa = g.Aa || [];
                    n = n || {};
                    n.kind = j;
                    n.label = k;
                    n.language = q;
                    j = u.$(j || "subtitles");
                    g = new window.videojs[j + "Track"](g,n);
                    e.push(g)
                }
            }
        }
    });
    u.bc.prototype.e = function() {
        return u.c.prototype.e.call(this, "div", {
            className: "vjs-text-track-display"
        })
    }
    ;
    u.Y = u.N.extend({
        i: function(a, c) {
            var d = this.ca = c.track;
            c.label = d.label();
            c.selected = d.ub();
            u.N.call(this, a, c);
            this.b.d(d.J() + "trackchange", u.bind(this, this.update))
        }
    });
    u.Y.prototype.p = function() {
        u.N.prototype.p.call(this);
        W(this.b, this.ca.Q, this.ca.J())
    }
    ;
    u.Y.prototype.update = function() {
        this.selected(2 == this.ca.mode())
    }
    ;
    u.bb = u.Y.extend({
        i: function(a, c) {
            c.track = {
                J: function() {
                    return c.kind
                },
                K: a,
                label: function() {
                    return c.kind + " off"
                },
                ub: s(l),
                mode: s(l)
            };
            u.Y.call(this, a, c);
            this.selected(f)
        }
    });
    u.bb.prototype.p = function() {
        u.Y.prototype.p.call(this);
        W(this.b, this.ca.Q, this.ca.J())
    }
    ;
    u.bb.prototype.update = function() {
        for (var a = V(this.b), c = 0, d = a.length, e, g = f; c < d; c++) {
            e = a[c],
            e.J() == this.ca.J() && 2 == e.mode() && (g = l)
        }
        this.selected(g)
    }
    ;
    u.S = u.R.extend({
        i: function(a, c) {
            u.R.call(this, a, c);
            1 >= this.I.length && this.C()
        }
    });
    u.S.prototype.ta = function() {
        var a = [], c;
        a.push(new u.bb(this.b,{
            kind: this.A
        }));
        for (var d = 0; d < V(this.b).length; d++) {
            c = V(this.b)[d],
            c.J() === this.A && a.push(new u.Y(this.b,{
                track: c
            }))
        }
        return a
    }
    ;
    u.Da = u.S.extend({
        i: function(a, c, d) {
            u.S.call(this, a, c, d);
            this.a.setAttribute("aria-label", "Captions Menu")
        }
    });
    u.Da.prototype.A = "captions";
    u.Da.prototype.qa = "Captions";
    u.Da.prototype.className = "vjs-captions-button";
    u.Ha = u.S.extend({
        i: function(a, c, d) {
            u.S.call(this, a, c, d);
            this.a.setAttribute("aria-label", "Subtitles Menu")
        }
    });
    u.Ha.prototype.A = "subtitles";
    u.Ha.prototype.qa = "Subtitles";
    u.Ha.prototype.className = "vjs-subtitles-button";
    u.Ea = u.S.extend({
        i: function(a, c, d) {
            u.S.call(this, a, c, d);
            this.a.setAttribute("aria-label", "Chapters Menu")
        }
    });
    t = u.Ea.prototype;
    t.A = "chapters";
    t.qa = "Chapters";
    t.className = "vjs-chapters-button";
    t.ta = function() {
        for (var a = [], c, d = 0; d < V(this.b).length; d++) {
            c = V(this.b)[d],
            c.J() === this.A && a.push(new u.Y(this.b,{
                track: c
            }))
        }
        return a
    }
    ;
    t.Ka = function() {
        for (var a = V(this.b), c = 0, d = a.length, e, g, j = this.I = []; c < d; c++) {
            if (e = a[c],
            e.J() == this.A && e.ub()) {
                if (2 > e.readyState()) {
                    this.Id = e;
                    e.d("loaded", u.bind(this, this.Ka));
                    return
                }
                g = e;
                break
            }
        }
        a = this.wa = new u.ma(this.b);
        a.a.appendChild(u.e("li", {
            className: "vjs-menu-title",
            innerHTML: u.$(this.A),
            zd: -1
        }));
        if (g) {
            e = g.fa;
            for (var k, c = 0, d = e.length; c < d; c++) {
                k = e[c],
                k = new u.Xa(this.b,{
                    track: g,
                    cue: k
                }),
                j.push(k),
                a.Z(k)
            }
        }
        0 < this.I.length && this.show();
        return a
    }
    ;
    u.Xa = u.N.extend({
        i: function(a, c) {
            var d = this.ca = c.track
              , e = this.cue = c.cue
              , g = a.currentTime();
            c.label = e.text;
            c.selected = e.startTime <= g && g < e.va;
            u.N.call(this, a, c);
            d.d("cuechange", u.bind(this, this.update))
        }
    });
    u.Xa.prototype.p = function() {
        u.N.prototype.p.call(this);
        this.b.currentTime(this.cue.startTime);
        this.update(this.cue.startTime)
    }
    ;
    u.Xa.prototype.update = function() {
        var a = this.cue
          , c = this.b.currentTime();
        this.selected(a.startTime <= c && c < a.va)
    }
    ;
    u.k.B(u.Fa.prototype.g.children, {
        subtitlesButton: {},
        captionsButton: {},
        chaptersButton: {}
    });
    if ("undefined" !== typeof window.JSON && "function" === window.JSON.parse) {
        u.JSON = window.JSON
    } else {
        u.JSON = {};
        var Z = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        u.JSON.parse = function(a, c) {
            function d(a, e) {
                var k, q, n = a[e];
                if (n && "object" === typeof n) {
                    for (k in n) {
                        Object.prototype.hasOwnProperty.call(n, k) && (q = d(n, k),
                        q !== b ? n[k] = q : delete n[k])
                    }
                }
                return c.call(a, e, n)
            }
            var e;
            a = String(a);
            Z.lastIndex = 0;
            Z.test(a) && (a = a.replace(Z, function(a) {
                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
            }
            ));
            if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) {
                return e = eval("(" + a + ")"),
                "function" === typeof c ? d({
                    "": e
                }, "") : e
            }
            throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")
        }
    }
    u.fc = function() {
        var a, c, d = document.getElementsByTagName("video");
        if (d && 0 < d.length) {
            for (var e = 0, g = d.length; e < g; e++) {
                if ((c = d[e]) && c.getAttribute) {
                    c.player === b && (a = c.getAttribute("data-setup"),
                    a !== h && (a = u.JSON.parse(a || "{}"),
                    v(c, a)))
                } else {
                    u.kb();
                    break
                }
            }
        } else {
            u.Ec || u.kb()
        }
    }
    ;
    u.kb = function() {
        setTimeout(u.fc, 1)
    }
    ;
    "complete" === document.readyState ? u.Ec = f : u.U(window, "load", function() {
        u.Ec = f
    }
    );
    u.kb();
    u.od = function(a, c) {
        u.s.prototype[a] = c
    }
    ;
    var ga = this;
    ga.Ed = f;
    function $(a, c) {
        var d = a.split(".")
          , e = ga;
        !(d[0] in e) && e.execScript && e.execScript("var " + d[0]);
        for (var g; d.length && (g = d.shift()); ) {
            !d.length && c !== b ? e[g] = c : e = e[g] ? e[g] : e[g] = {}
        }
    }
    $("videojs", u);
    $("_V_", u);
    $("videojs.options", u.options);
    $("videojs.players", u.xa);
    $("videojs.TOUCH_ENABLED", u.ac);
    $("videojs.cache", u.ra);
    $("videojs.Component", u.c);
    u.c.prototype.player = u.c.prototype.K;
    u.c.prototype.dispose = u.c.prototype.D;
    u.c.prototype.createEl = u.c.prototype.e;
    u.c.prototype.el = u.c.prototype.w;
    u.c.prototype.addChild = u.c.prototype.Z;
    u.c.prototype.children = u.c.prototype.children;
    u.c.prototype.on = u.c.prototype.d;
    u.c.prototype.off = u.c.prototype.o;
    u.c.prototype.one = u.c.prototype.U;
    u.c.prototype.trigger = u.c.prototype.j;
    u.c.prototype.triggerReady = u.c.prototype.Ua;
    u.c.prototype.show = u.c.prototype.show;
    u.c.prototype.hide = u.c.prototype.C;
    u.c.prototype.width = u.c.prototype.width;
    u.c.prototype.height = u.c.prototype.height;
    u.c.prototype.dimensions = u.c.prototype.Xc;
    u.c.prototype.ready = u.c.prototype.L;
    u.c.prototype.addClass = u.c.prototype.n;
    u.c.prototype.removeClass = u.c.prototype.u;
    $("videojs.Player", u.s);
    u.s.prototype.dispose = u.s.prototype.D;
    u.s.prototype.requestFullScreen = u.s.prototype.ya;
    u.s.prototype.cancelFullScreen = u.s.prototype.ob;
    u.s.prototype.bufferedPercent = u.s.prototype.Ja;
    u.s.prototype.usingNativeControls = u.s.prototype.Rb;
    u.s.prototype.reportUserActivity = u.s.prototype.Mb;
    u.s.prototype.userActive = u.s.prototype.ja;
    $("videojs.MediaLoader", u.Pc);
    $("videojs.TextTrackDisplay", u.bc);
    $("videojs.ControlBar", u.Fa);
    $("videojs.Button", u.q);
    $("videojs.PlayToggle", u.Yb);
    $("videojs.FullscreenToggle", u.Ga);
    $("videojs.BigPlayButton", u.Wa);
    $("videojs.LoadingSpinner", u.Wb);
    $("videojs.CurrentTimeDisplay", u.Ya);
    $("videojs.DurationDisplay", u.Za);
    $("videojs.TimeDivider", u.cc);
    $("videojs.RemainingTimeDisplay", u.fb);
    $("videojs.Slider", u.O);
    $("videojs.ProgressControl", u.eb);
    $("videojs.SeekBar", u.Zb);
    $("videojs.LoadProgressBar", u.ab);
    $("videojs.PlayProgressBar", u.Xb);
    $("videojs.SeekHandle", u.gb);
    $("videojs.VolumeControl", u.ib);
    $("videojs.VolumeBar", u.hb);
    $("videojs.VolumeLevel", u.dc);
    $("videojs.VolumeMenuButton", u.oa);
    $("videojs.VolumeHandle", u.jb);
    $("videojs.MuteToggle", u.da);
    $("videojs.PosterImage", u.cb);
    $("videojs.Menu", u.ma);
    $("videojs.MenuItem", u.N);
    $("videojs.MenuButton", u.R);
    u.R.prototype.createItems = u.R.prototype.ta;
    u.S.prototype.createItems = u.S.prototype.ta;
    u.Ea.prototype.createItems = u.Ea.prototype.ta;
    $("videojs.SubtitlesButton", u.Ha);
    $("videojs.CaptionsButton", u.Da);
    $("videojs.ChaptersButton", u.Ea);
    $("videojs.MediaTechController", u.r);
    u.r.prototype.features = u.r.prototype.m;
    u.r.prototype.m.volumeControl = u.r.prototype.m.Dc;
    u.r.prototype.m.fullscreenResize = u.r.prototype.m.Jd;
    u.r.prototype.m.progressEvents = u.r.prototype.m.Nd;
    u.r.prototype.m.timeupdateEvents = u.r.prototype.m.Sd;
    $("videojs.Html5", u.l);
    u.l.Events = u.l.$a;
    u.l.isSupported = u.l.isSupported;
    u.l.canPlaySource = u.l.mb;
    u.l.prototype.setCurrentTime = u.l.prototype.sd;
    u.l.prototype.setVolume = u.l.prototype.xd;
    u.l.prototype.setMuted = u.l.prototype.vd;
    u.l.prototype.setPreload = u.l.prototype.wd;
    u.l.prototype.setAutoplay = u.l.prototype.rd;
    u.l.prototype.setLoop = u.l.prototype.ud;
    $("videojs.Flash", u.f);
    u.f.isSupported = u.f.isSupported;
    u.f.canPlaySource = u.f.mb;
    u.f.onReady = u.f.onReady;
    $("videojs.TextTrack", u.X);
    u.X.prototype.label = u.X.prototype.label;
    $("videojs.CaptionsTrack", u.Ub);
    $("videojs.SubtitlesTrack", u.$b);
    $("videojs.ChaptersTrack", u.Vb);
    $("videojs.autoSetup", u.fc);
    $("videojs.plugin", u.od);
    $("videojs.createTimeRange", u.tb)
}
)();
(function(c, d) {
    var a = c.document, b;
    b = function() {
        var t = {}, u = {}, j = false, l = {
            ENTER: 13,
            ESC: 27,
            SPACE: 32
        }, p = [], g, m, v, n, s, h, w, r, q, e, f, k, x;
        u = {
            buttons: {
                holder: '<nav class="alertify-buttons">{{buttons}}</nav>',
                submit: '<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',
                ok: '<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',
                cancel: '<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'
            },
            input: '<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',
            message: '<p class="alertify-message">{{message}}</p>',
            log: '<article class="alertify-log{{class}}">{{message}}</article>'
        };
        x = function() {
            var z, B, y = false, A = a.createElement("fakeelement"), C = {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "otransitionend",
                transition: "transitionend"
            };
            for (z in C) {
                if (A.style[z] !== d) {
                    B = C[z];
                    y = true;
                    break
                }
            }
            return {
                type: B,
                supported: y
            }
        }
        ;
        g = function(y) {
            return a.getElementById(y)
        }
        ;
        t = {
            labels: {
                ok: "OK",
                cancel: "Cancel"
            },
            delay: 5000,
            buttonReverse: false,
            buttonFocus: "ok",
            transition: d,
            addListeners: function(B) {
                var E = (typeof v !== "undefined"), I = (typeof m !== "undefined"), F = (typeof k !== "undefined"), y = "", H = this, C, G, A, D, z;
                C = function(J) {
                    if (typeof J.preventDefault !== "undefined") {
                        J.preventDefault()
                    }
                    A(J);
                    if (typeof k !== "undefined") {
                        y = k.value
                    }
                    if (typeof B === "function") {
                        if (typeof k !== "undefined") {
                            B(true, y)
                        } else {
                            B(true)
                        }
                    }
                    return false
                }
                ;
                G = function(J) {
                    if (typeof J.preventDefault !== "undefined") {
                        J.preventDefault()
                    }
                    A(J);
                    if (typeof B === "function") {
                        B(false)
                    }
                    return false
                }
                ;
                A = function(J) {
                    H.hide();
                    H.unbind(a.body, "keyup", D);
                    H.unbind(n, "focus", z);
                    if (E) {
                        H.unbind(v, "click", C)
                    }
                    if (I) {
                        H.unbind(m, "click", G)
                    }
                }
                ;
                D = function(J) {
                    var K = J.keyCode;
                    if ((K === l.SPACE && !F) || (F && K === l.ENTER)) {
                        C(J)
                    }
                    if (K === l.ESC && I) {
                        G(J)
                    }
                }
                ;
                z = function(J) {
                    if (F) {
                        k.focus()
                    } else {
                        if (!I || H.buttonReverse) {
                            v.focus()
                        } else {
                            m.focus()
                        }
                    }
                }
                ;
                this.bind(n, "focus", z);
                this.bind(s, "focus", z);
                if (E) {
                    this.bind(v, "click", C)
                }
                if (I) {
                    this.bind(m, "click", G)
                }
                this.bind(a.body, "keyup", D);
                if (!this.transition.supported) {
                    this.setFocus()
                }
            },
            bind: function(z, A, y) {
                if (typeof z.addEventListener === "function") {
                    z.addEventListener(A, y, false)
                } else {
                    if (z.attachEvent) {
                        z.attachEvent("on" + A, y)
                    }
                }
            },
            handleErrors: function() {
                if (typeof c.onerror !== "undefined") {
                    var y = this;
                    c.onerror = function(B, A, z) {
                        y.error("[" + B + " on line " + z + " of " + A + "]", 0)
                    }
                    ;
                    return true
                } else {
                    return false
                }
            },
            appendButtons: function(y, z) {
                return this.buttonReverse ? z + y : y + z
            },
            build: function(C) {
                var z = ""
                  , A = C.type
                  , B = C.message
                  , y = C.cssClass || "";
                z += '<div class="alertify-dialog">';
                z += '<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>';
                if (t.buttonFocus === "none") {
                    z += '<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'
                }
                if (A === "prompt") {
                    z += '<div id="alertify-form">'
                }
                z += '<article class="alertify-inner">';
                z += u.message.replace("{{message}}", B);
                if (A === "prompt") {
                    z += u.input
                }
                z += u.buttons.holder;
                z += "</article>";
                if (A === "prompt") {
                    z += "</div>"
                }
                z += '<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>';
                z += "</div>";
                switch (A) {
                case "confirm":
                    z = z.replace("{{buttons}}", this.appendButtons(u.buttons.cancel, u.buttons.ok));
                    z = z.replace("{{ok}}", this.labels.ok).replace("{{cancel}}", this.labels.cancel);
                    break;
                case "prompt":
                    z = z.replace("{{buttons}}", this.appendButtons(u.buttons.cancel, u.buttons.submit));
                    z = z.replace("{{ok}}", this.labels.ok).replace("{{cancel}}", this.labels.cancel);
                    break;
                case "alert":
                    z = z.replace("{{buttons}}", u.buttons.ok);
                    z = z.replace("{{ok}}", this.labels.ok);
                    break;
                default:
                    break
                }
                q.className = "alertify alertify-" + A + " " + y;
                r.className = "alertify-cover";
                return z
            },
            close: function(A, C) {
                var D = (C && !isNaN(C)) ? +C : this.delay, y = this, B, z;
                this.bind(A, "click", function() {
                    B(A)
                }
                );
                z = function(E) {
                    E.stopPropagation();
                    y.unbind(this, y.transition.type, z);
                    e.removeChild(this);
                    if (!e.hasChildNodes()) {
                        e.className += " alertify-logs-hidden"
                    }
                }
                ;
                B = function(E) {
                    if (typeof E !== "undefined" && E.parentNode === e) {
                        if (y.transition.supported) {
                            y.bind(E, y.transition.type, z);
                            E.className += " alertify-log-hide"
                        } else {
                            e.removeChild(E);
                            if (!e.hasChildNodes()) {
                                e.className += " alertify-logs-hidden"
                            }
                        }
                    }
                }
                ;
                if (C === 0) {
                    return
                }
                setTimeout(function() {
                    B(A)
                }
                , D)
            },
            dialog: function(C, B, A, D, z) {
                w = a.activeElement;
                var y = function() {
                    if ((e && e.scrollTop !== null ) && (r && r.scrollTop !== null )) {
                        return
                    } else {
                        y()
                    }
                }
                ;
                if (typeof C !== "string") {
                    throw new Error("message must be a string")
                }
                if (typeof B !== "string") {
                    throw new Error("type must be a string")
                }
                if (typeof A !== "undefined" && typeof A !== "function") {
                    throw new Error("fn must be a function")
                }
                this.init();
                y();
                p.push({
                    type: B,
                    message: C,
                    callback: A,
                    placeholder: D,
                    cssClass: z
                });
                if (!j) {
                    this.setup()
                }
                return this
            },
            extend: function(y) {
                if (typeof y !== "string") {
                    throw new Error("extend method must have exactly one paramter")
                }
                return function(z, A) {
                    this.log(z, y, A);
                    return this
                }
            },
            hide: function() {
                var z, y = this;
                p.splice(0, 1);
                if (p.length > 0) {
                    this.setup(true)
                } else {
                    j = false;
                    z = function(A) {
                        A.stopPropagation();
                        y.unbind(q, y.transition.type, z)
                    }
                    ;
                    if (this.transition.supported) {
                        this.bind(q, this.transition.type, z);
                        q.className = "alertify alertify-hide alertify-hidden"
                    } else {
                        q.className = "alertify alertify-hide alertify-hidden alertify-isHidden"
                    }
                    r.className = "alertify-cover alertify-cover-hidden";
                    w.focus()
                }
            },
            init: function() {
                a.createElement("nav");
                a.createElement("article");
                a.createElement("section");
                if (g("alertify-cover") == null ) {
                    r = a.createElement("div");
                    r.setAttribute("id", "alertify-cover");
                    r.className = "alertify-cover alertify-cover-hidden";
                    a.body.appendChild(r)
                }
                if (g("alertify") == null ) {
                    j = false;
                    p = [];
                    q = a.createElement("section");
                    q.setAttribute("id", "alertify");
                    q.className = "alertify alertify-hidden";
                    a.body.appendChild(q)
                }
                if (g("alertify-logs") == null ) {
                    e = a.createElement("section");
                    e.setAttribute("id", "alertify-logs");
                    e.className = "alertify-logs alertify-logs-hidden";
                    a.body.appendChild(e)
                }
                a.body.setAttribute("tabindex", "0");
                this.transition = x()
            },
            log: function(A, z, B) {
                var y = function() {
                    if (e && e.scrollTop !== null ) {
                        return
                    } else {
                        y()
                    }
                }
                ;
                this.init();
                y();
                e.className = "alertify-logs";
                this.notify(A, z, B);
                return this
            },
            notify: function(A, z, B) {
                var y = a.createElement("article");
                y.className = "alertify-log" + ((typeof z === "string" && z !== "") ? " alertify-log-" + z : "");
                y.innerHTML = A;
                e.appendChild(y);
                setTimeout(function() {
                    y.className = y.className + " alertify-log-show"
                }
                , 50);
                this.close(y, B)
            },
            set: function(z) {
                var y;
                if (typeof z !== "object" && z instanceof Array) {
                    throw new Error("args must be an object")
                }
                for (y in z) {
                    if (z.hasOwnProperty(y)) {
                        this[y] = z[y]
                    }
                }
            },
            setFocus: function() {
                if (k) {
                    k.focus();
                    k.select()
                } else {
                    h.focus()
                }
            },
            setup: function(z) {
                var B = p[0], y = this, A;
                j = true;
                A = function(C) {
                    C.stopPropagation();
                    y.setFocus();
                    y.unbind(q, y.transition.type, A)
                }
                ;
                if (this.transition.supported && !z) {
                    this.bind(q, this.transition.type, A)
                }
                q.innerHTML = this.build(B);
                n = g("alertify-resetFocus");
                s = g("alertify-resetFocusBack");
                v = g("alertify-ok") || d;
                m = g("alertify-cancel") || d;
                h = (t.buttonFocus === "cancel") ? m : ((t.buttonFocus === "none") ? g("alertify-noneFocus") : v),
                k = g("alertify-text") || d;
                f = g("alertify-form") || d;
                if (typeof B.placeholder === "string" && B.placeholder !== "") {
                    k.value = B.placeholder
                }
                if (z) {
                    this.setFocus()
                }
                this.addListeners(B.callback)
            },
            unbind: function(z, A, y) {
                if (typeof z.removeEventListener === "function") {
                    z.removeEventListener(A, y, false)
                } else {
                    if (z.detachEvent) {
                        z.detachEvent("on" + A, y)
                    }
                }
            }
        };
        return {
            alert: function(A, z, y) {
                t.dialog(A, "alert", z, "", y);
                return this
            },
            confirm: function(A, z, y) {
                t.dialog(A, "confirm", z, "", y);
                return this
            },
            extend: t.extend,
            init: t.init,
            log: function(z, y, A) {
                t.log(z, y, A);
                return this
            },
            prompt: function(A, z, B, y) {
                t.dialog(A, "prompt", z, B, y);
                return this
            },
            success: function(y, z) {
                t.log(y, "success", z);
                return this
            },
            error: function(y, z) {
                t.log(y, "error", z);
                return this
            },
            set: function(y) {
                t.set(y)
            },
            labels: t.labels,
            debug: t.handleErrors
        }
    }
    ;
    if (typeof define === "function") {
        define([], function() {
            return new b()
        }
        )
    } else {
        if (typeof c.alertify === "undefined") {
            c.alertify = new b()
        }
    }
}
(this));
(function(a) {
    a.fn.appendAt = function(d, b) {
        var c = this.children();
        if (b < 0) {
            this.append(d)
        } else {
            if (b < c.length) {
                a(c[b]).before(d)
            } else {
                this.append(d)
            }
        }
    }
    ;
    a.fn.vMargin = function() {
        return parseInt(this.css("margin-top")) + parseInt(this.css("margin-bottom"))
    }
    ;
    a.fn.hMargin = function() {
        return parseInt(this.css("margin-left")) + parseInt(this.css("margin-right"))
    }
    ;
    a.fn.vPadding = function() {
        return parseInt(this.css("padding-top")) + parseInt(this.css("padding-bottom"))
    }
    ;
    a.fn.hPadding = function() {
        return parseInt(this.css("padding-left")) + parseInt(this.css("padding-right"))
    }
    ;
    a.fn.layoutWidth = function() {
        return this.outerWidth() + this.hMargin()
    }
    ;
    a.fn.layoutHeight = function() {
        return this.outerHeight() + this.vMargin()
    }
    ;
    a.browser.chrome = /chrom(e|ium)/.test(navigator.userAgent.toLowerCase())
}
)(jQuery);
(function() {
    Date.monthNames = ["", "", "", "", "", "", "", "", "", "", "", ""];
    Date.dateNames = (function() {
        var a = _.range(1, 31 + 1);
        _.each(a, function(c, b, d) {
            d[b] = c + ""
        }
        );
        return a
    }
    )();
    Date.dayNames = ["", "", "", "", "", "", ""];
    Date.hourNames = (function() {
        var a = _.range(0, 24);
        _.each(a, function(c, b, d) {
            d[b] = c + ""
        }
        );
        return a
    }
    )();
    Date.prototype.getMonsday = function() {
        var a = new Date();
        a.setTime(this.getTime());
        a.clearTime();
        a.setDate(a.getDate() - (a.getDay() === 0 ? 6 : a.getDay() - 1));
        return a
    }
}
)();
alertify.reset = function() {
    alertify.set({
        labels: {
            ok: "OK",
            cancel: "Cancel"
        },
        delay: 5000,
        buttonReverse: false,
        buttonFocus: "ok"
    })
}
;
andrea.blink.declare("andrea.grace");
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.constants.AppConst");
    var a = andrea.grace.constants.AppConst;
    a.MODEL_GRACE = "MODEL_GRACE";
    a.MEDIATOR_DATA_DISCOVERY = "MEDIATOR_DATA_DISCOVERY";
    a.MEDIATOR_ANALYSIS_SRC_DIM = "MEDIATOR_ANALYSIS_SRC_DIM";
    a.MEDIATOR_ANALYSIS_SRC_MEA = "MEDIATOR_ANALYSIS_SRC_MEA";
    a.MEDIATOR_ANALYSIS_DES_DIM = "MEDIATOR_ANALYSIS_DES_DIM";
    a.MEDIATOR_ANALYSIS_DES_MEA = "MEDIATOR_ANALYSIS_DES_MEA";
    a.MEDIATOR_ANALYSIS_RESULT = "MEDIATOR_ANALYSIS_RESULT";
    a.MEDIATOR_VIZ_NAVIGATOR = "MEDIATOR_VIZ_NAVIGATOR";
    a.ACTION_CHANGE_DATA_PROVIDER = "ACTION_CHANGE_DATA_PROVIDER";
    a.ACTION_RUN_ANALYSIS = "ACTION_RUN_ANALYSIS";
    a.ACTION_SAVE_COLLABORATION = "ACTION_SAVE_COLLABORATION";
    a.ACTION_LOAD_COLLABORATION = "ACTION_LOAD_COLLABORATION";
    a.NOTIFICATION_DATA_PROVIDER_CHANGED = "NOTIFICATION_DATA_PROVIDER_CHANGED";
    a.NOTIFICATION_VIZ_CONTEXT_CHANGED = "NOTIFICATION_VIZ_CONTEXT_CHANGED";
    a.NOTIFICATION_VIZ_CONTEXT_APPLIED = "NOTIFICATION_VIZ_CONTEXT_APPLIED";
    a.NOTIFICATION_VIZ_CONTEXT_RESET = "NOTIFICATION_VIZ_CONTEXT_RESET";
    a.NOTIFICATION_VIEW_PASTE_TO = "NOTIFICATION_VIEW_PASTE_TO";
    a.NOTIFICATION_ACTION_SAVE_COLLABORATION_START = "NOTIFICATION_ACTION_SAVE_COLLABORATION_START";
    a.NOTIFICATION_ACTION_SAVE_COLLABORATION_COMPLETE = "NOTIFICATION_ACTION_SAVE_COLLABORATION_COMPLETE"
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.constants.ShelfType");
    var a = b.constants.ShelfType;
    a.SRC_DIM = "srcDim";
    a.SRC_MEA = "srcMea";
    a.DES_DIM = "desDimX";
    a.DES_VALUE = "desMeaValueY";
    a.PROC_FILTER = "procFilter";
    a.like = function(d, c) {
        return d.substring(0, 3) === c.substring(0, 3)
    }
    ;
    a.src = function(c) {
        return c && c.substring(0, 3) === "src"
    }
    ;
    a.des = function(c) {
        return c && c.substring(0, 3) === "des"
    }
    ;
    a.proc = function(c) {
        return c && c.substring(0, 4) === "proc"
    }
    ;
    a.dim = function(c) {
        return c === a.SRC_DIM || c === a.DES_DIM
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.constants.AnalysisType");
    var a = b.constants.AnalysisType;
    a.DIMENSION = "dimension";
    a.MEASURE = "measure"
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.constants.ValueType");
    var b = a.constants.ValueType;
    b.NULL = "null";
    b.STRING = "string";
    b.NUMBER = "number";
    b.DATE = "date";
    b.GEO = "geo"
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.constants.VizType");
    var a = b.constants.VizType;
    a.RECOMMEND = "RECOMMEND";
    a.BAR = "BAR";
    a.STACKED_BAR = "STACKED_BAR";
    a.COLUMN = "COLUMN";
    a.STACKED_COLUMN = "STACKED_COLUMN";
    a.LINE = "LINE";
    a.AREA = "AREA";
    a.RADAR = "RADAR";
    a.PIE = "PIE";
    a.WATERFALL = "WATERFALL";
    a.SCATTER = "SCATTER";
    a.TABLE = "TABLE";
    a.GEO = "GEO";
    a.TREE_MAP = "TREE_MAP";
    a._MANIFESTS = (function() {
        var d = function(h, j, f, e, g) {
            return {
                type: h,
                title: j,
                required: {
                    numDimensions: f,
                    numMeasures: e
                },
                icon: g ? b.Settings.dataDiscovery.folder + g : ""
            }
        }
        ;
        var c = {};
        c[a.RECOMMEND] = d(a.RECOMMEND, "", 0, 0, "");
        c[a.COLUMN] = d(a.COLUMN, "", 0, 1, "./assets/navigator/column.png", "");
        c[a.BAR] = d(a.BAR, "", 0, 1, "./assets/navigator/bar.png", "");
        c[a.RADAR] = d(a.RADAR, "", 1, 1, "./assets/navigator/radar.png", "");
        c[a.SCATTER] = d(a.SCATTER, "", 1, 1, "./assets/navigator/scatter.png", "");
        c[a.LINE] = d(a.LINE, "", 1, 1, "./assets/navigator/line.png", "");
        c[a.AREA] = d(a.AREA, "", 1, 1, "./assets/navigator/area.png", "");
        c[a.PIE] = d(a.PIE, "", 1, 1, "./assets/navigator/pie.png", "");
        c[a.STACKED_COLUMN] = d(a.STACKED_COLUMN, "", 2, 1, "./assets/navigator/stackedColumn.png", "");
        c[a.STACKED_BAR] = d(a.STACKED_BAR, "", 2, 1, "./assets/navigator/stackedBar.png", "");
        return c
    }
    )();
    a.manifest = function(c) {
        return a._MANIFESTS[c]
    }
    ;
    a.vertical = function(c) {
        return c === a.BAR || c === a.STACKED_BAR
    }
    ;
    a.horizontal = function(c) {
        return c === a.COLUMN || c === a.STACKED_COLUMN || c === a.LINE || c === a.AREA
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.constants.TaobaoAPI");
    var a = b.constants.TaobaoAPI = {
        trade: {}
    };
    a.trade.status = {
        TRADE_NO_CREATE_PAY: "",
        WAIT_BUYER_PAY: "",
        SELLER_CONSIGNED_PART: "",
        WAIT_SELLER_SEND_GOODS: "",
        WAIT_BUYER_CONFIRM_GOODS: "",
        TRADE_BUYER_SIGNED: "",
        TRADE_FINISHED: "",
        TRADE_CLOSED: "",
        TRADE_CLOSED_BY_TAOBAO: ""
    };
    a.trade.type = {
        fixed: "",
        auction: "",
        guarantee_trade: "",
        auto_delivery: "",
        independent_simple_trade: "",
        independent_shop_trade: "",
        ec: "",
        cod: "",
        fenxiao: "",
        game_equipment: "",
        shopex_trade: "ShopEX",
        netcn_trade: "",
        external_trade: "",
        step: ""
    };
    a.trade.shipping_type = {
        free: "",
        post: "",
        express: "",
        ems: "EMS",
        virtual: "",
        "25": "",
        "26": ""
    };
    a.trade.trade_from = {
        WAP: "",
        HITAO: "",
        TOP: "TOP",
        TAOBAO: "",
        JHS: ""
    };
    a.isKey = function(c, d) {
        return a[c] != null  && a[c][d] != null 
    }
    ;
    a.toCaption = function(d, f, g) {
        if (a.isKey(f, g)) {
            if (g === "trade_from") {
                var e = g.split(",");
                if (e.length > 1) {
                    var c = [];
                    _.each(e, function(h) {
                        c.push(a.toCaption(d, f, h))
                    }
                    );
                    return c.join("")
                }
            }
            return a[f][g][d]
        } else {
            return d
        }
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.constants.JingdongAPI");
    var b = a.constants.JingdongAPI = {
        order: {},
        coupon: {}
    };
    b.order.pay_type = {
        "1": "",
        "2": "",
        "3": "",
        "4": "",
        "5": "",
        "6": ""
    };
    b.order.delivery_type = {
        "1": "",
        "2": "",
        "3": "",
        "*": ""
    };
    b.order.order_state = {
        WAIT_SELLER_STOCK_OUT: "",
        SEND_TO_DISTRIBUTION_CENER: "",
        DISTRIBUTION_CENTER_RECEIVED: "",
        WAIT_GOODS_RECEIVE_CONFIRM: "",
        RECEIPTS_CONFIRM: "",
        WAIT_SELLER_DELIVERY: "",
        FINISHED_L: "",
        TRADE_CANCELED: "",
        LOCKED: ""
    };
    b.coupon.coupon_type = {
        "20": "",
        "28": "",
        "29": "",
        "30": "",
        "34": "",
        "35": "()",
        "39": "",
        "41": "",
        "52": "",
        "100": ""
    };
    b.isKey = function(c, d) {
        return b[c] != null  && b[c][d] != null 
    }
    ;
    b.toCaption = function(d, f, g) {
        if (b.isKey(f, g)) {
            if (g === "trade_from") {
                var e = g.split(",");
                if (e.length > 1) {
                    var c = [];
                    _.each(e, function(h) {
                        c.push(b.toCaption(d, f, h))
                    }
                    );
                    return c.join("")
                }
            }
            return b[f][g][d]
        } else {
            return d
        }
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.operation.OperationPriorityBaseline");
    var b = a.operation.OperationPriorityBaseline;
    b.DISPLAY_ONLY = 0;
    b.DEFAULT_OPERATION = 10000;
    b.USER_SPECIFICATION = 20000
}
)();
(function(c) {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.operation.OperationType");
    var a = b.operation.OperationType;
    a.CARD_REMOVE = "CARD_REMOVE";
    a.CARD_ADD_TO_DIMENSION = "CARD_ADD_TO_DIMENSION";
    a.CARD_ADD_TO_MEASURE = "CARD_ADD_TO_MEASURE";
    a.CALC_COUNT = "CALC_COUNT";
    a.CALC_UNIQ_COUNT = "CALC_UNIQ_COUNT";
    a.CALC_SUM = "CALC_SUM";
    a.CALC_AVG = "CALC_AVG";
    a.CALC_MAX = "CALC_MAX";
    a.CALC_MIN = "CALC_MIN";
    a.SORT_NONE = "SORT_NONE";
    a.SORT_ASCEND = "SORT_ASCEND";
    a.SORT_DESCEND = "SORT_DESCEND";
    a.SORT_ALPHABET_ASCEND = "SORT_ALPHABET_ASCEND";
    a.SORT_ALPHABET_DESCEND = "SORT_ALPHABET_DESCEND";
    a.DRILL_YEAR = "DRILL_YEAR";
    a.DRILL_MONTH = "DRILL_MONTH";
    a.DRILL_WEEK = "DRILL_WEEK";
    a.DRILL_DATE = "DRILL_DATE";
    a.GROUP_MONTH = "GROUP_MONTH";
    a.GROUP_DATE = "GROUP_DATE";
    a.GROUP_DAY = "GROUP_DAY";
    a.GROUP_HOUR = "GROUP_HOUR"
}
)(jQuery);
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.operation.OperationClassification");
    var b = a.operation.OperationClassification;
    b.CARD_OPERATION = "cardOperation";
    b.CALCULATE = "calculate";
    b.SORT = "sort";
    b.DRILL = "drill";
    b.GROUP = "group";
    b.exclusive = function(d, c) {
        if (d === c) {
            return true
        } else {
            if ((d === b.DRILL || d === b.GROUP) && (c === b.DRILL || c === b.GROUP)) {
                return true
            } else {
                return false
            }
        }
    }
}
)();
(function(d) {
    var c = andrea.grace;
    var e = c.operation.OperationClassification;
    var b = c.operation.OperationType;
    andrea.blink.declare("andrea.grace.operation.Operation");
    var a = c.operation.Operation = function(g, f) {
        this.id = _.uniqueId("operationID_");
        this.type = g;
        this.priority = f;
        this.name = a._TYPE_TO_NAME[this.type];
        this.abbreviation = a._TYPE_TO_ABBREVIATION[this.type];
        this.classification = a._TYPE_TO_CLASSIFICATION[this.type];
        this.classificationName = a._CLASSIFICATION_TO_NAME[this.classification]
    }
    ;
    a._TYPE_TO_NAME = {};
    a._TYPE_TO_ABBREVIATION = {};
    a._TYPE_TO_CLASSIFICATION = {};
    a._CLASSIFICATION_TO_TYPES = {};
    a._CLASSIFICATION_TO_NAME = {};
    a._loadClass = function() {
        var j = function(n, m, l, p) {
            a._TYPE_TO_CLASSIFICATION[m] = n;
            a._TYPE_TO_NAME[m] = l;
            a._TYPE_TO_ABBREVIATION[m] = p;
            if (!a._CLASSIFICATION_TO_TYPES[n]) {
                a._CLASSIFICATION_TO_TYPES[n] = []
            }
            a._CLASSIFICATION_TO_TYPES[n].push(m)
        }
        ;
        var h = function(m, l) {
            a._CLASSIFICATION_TO_NAME[m] = l
        }
        ;
        h(e.CARD_OPERATION, "");
        h(e.CALCULATE, "");
        h(e.SORT, "");
        h(e.DRILL, "");
        h(e.GROUP, "...");
        j(e.CARD_OPERATION, b.CARD_ADD_TO_DIMENSION, "\uf067 ", "");
        j(e.CARD_OPERATION, b.CARD_ADD_TO_MEASURE, "\uf067 ", "");
        j(e.CARD_OPERATION, b.CARD_REMOVE, "\uf00d ", "");
        j(e.CALCULATE, b.CALC_COUNT, "", "");
        j(e.CALCULATE, b.CALC_UNIQ_COUNT, "", "");
        j(e.CALCULATE, b.CALC_SUM, " ", "");
        j(e.CALCULATE, b.CALC_AVG, "", "");
        j(e.CALCULATE, b.CALC_MAX, "", "Max");
        j(e.CALCULATE, b.CALC_MIN, "", "Min");
        j(e.SORT, b.SORT_NONE, "", "");
        j(e.SORT, b.SORT_ASCEND, "\uf160 ", "\uf160");
        j(e.SORT, b.SORT_DESCEND, "\uf161 ", "\uf161");
        j(e.SORT, b.SORT_ALPHABET_ASCEND, "\uf15d ", "\uf15d");
        j(e.SORT, b.SORT_ALPHABET_DESCEND, "\uf15e ", "\uf15e");
        var g = new Date();
        j(e.DRILL, b.DRILL_YEAR, " (" + g.format("yyyy") + ")", "");
        j(e.DRILL, b.DRILL_MONTH, " (" + g.format("yyyy/M") + ")", "");
        var k = g.getMonsday();
        var f = new Date();
        f.setTime(k.getTime() + 7 * 24 * 3600 * 1000);
        j(e.DRILL, b.DRILL_WEEK, " (" + k.format("yyyy/M/d") + " - " + f.format("M/d") + ")", "");
        j(e.DRILL, b.DRILL_DATE, " (" + g.format("yyyy/M/d") + ")", "");
        j(e.GROUP, b.GROUP_MONTH, " (1-12)", "");
        j(e.GROUP, b.GROUP_DATE, " (1-31)", "");
        j(e.GROUP, b.GROUP_DAY, " (1-7)", "");
        j(e.GROUP, b.GROUP_HOUR, " (0-23)", "")
    }
    ;
    a._loadClass();
    a.getTypes = function(f) {
        return a._CLASSIFICATION_TO_TYPES[f]
    }
    ;
    a.toJSON = function(f) {
        return {
            id: f.id,
            type: f.type,
            priority: f.priority,
            name: f.name,
            abbreviation: f.abbreviation,
            classification: f.classification,
            classificationName: f.classificationName
        }
    }
    ;
    a.fromJSON = function(g) {
        var f = new a();
        f.id = g.id;
        f.type = g.type;
        f.priority = g.priority;
        f.name = g.name;
        f.abbreviation = g.abbreviation;
        f.classification = g.classification;
        f.classificationName = g.classificationName;
        c.operation.OperationFactory.register(f);
        return f
    }
}
)(jQuery);
(function(d) {
    var b = andrea.grace;
    var a = b.operation.Operation;
    var e = b.operation.OperationPriorityBaseline;
    andrea.blink.declare("andrea.grace.operation.OperationFactory");
    var c = b.operation.OperationFactory;
    if (!c._count) {
        c._count = 0
    }
    if (!c._mapping) {
        c._mapping = {}
    }
    c.produce = function(f, g) {
        var h = new a(f,g + c._count);
        c._count++;
        c._mapping[h.id] = h;
        return h
    }
    ;
    c.get = function(f) {
        return c._mapping[f]
    }
    ;
    c.register = function(f) {
        if (!c._mapping[f.id]) {
            c._count++;
            c._mapping[f.id] = f
        }
    }
}
)(jQuery);
(function(e) {
    var c = andrea.grace;
    var b = c.operation.OperationType;
    var a = c.operation.Operation;
    var d = c.operation.OperationFactory;
    var g = c.operation.OperationClassification;
    var h = c.operation.OperationPriorityBaseline;
    andrea.blink.declare("andrea.grace.operation.OperationGroup");
    var f = c.operation.OperationGroup = function(j) {
        this._operations = null ;
        this._typeToOperation = null ;
        this._initialize(j)
    }
    ;
    f.createByTypes = function(k, m) {
        if (m) {
            m = h.DISPLAY_ONLY
        }
        var l = [];
        for (var j = 0; j < k.length; j++) {
            var n = d.produce(k[j]);
            l.push(n.id)
        }
        return new f(l)
    }
    ;
    f.createByClassification = function(k, l) {
        var j = a.getTypes(k);
        if (l) {
            l.splice(0, 0, j);
            j = _.without.apply(null , l)
        }
        return f.createByTypes(j)
    }
    ;
    f.prototype._initialize = function(k) {
        this._operations = [];
        this._typeToOperation = {};
        if (!k) {
            return
        }
        var j;
        for (j = 0; j < k.length; j++) {
            var m = k[j];
            var l = d.get(m);
            this._operations.push(l);
            this._typeToOperation[l.type] = l
        }
    }
    ;
    f.prototype.operations = function() {
        return this._operations
    }
    ;
    f.prototype.mapIDs = function() {
        return _.map(this._operations, function(j) {
            return j.id
        }
        )
    }
    ;
    f.prototype.mapNames = function() {
        return _.map(this._operations, function(j) {
            return j.name
        }
        )
    }
    ;
    f.prototype.mapAbbrs = function() {
        return _.map(this._operations, function(j) {
            return j.abbreviation
        }
        )
    }
    ;
    f.prototype.get = function(j) {
        return this._typeToOperation[j]
    }
    ;
    f.prototype.ascend = function() {
        return this.get(b.SORT_ASCEND) || this.get(b.SORT_ALPHABET_ASCEND)
    }
    ;
    f.prototype.descend = function() {
        return this.get(b.SORT_DESCEND) || this.get(b.SORT_ALPHABET_DESCEND)
    }
    ;
    f.prototype.has = function(j) {
        return this._typeToOperation[j] !== undefined
    }
    ;
    f.prototype.hasClassification = function(j) {
        return _.map(this._operations, function(k) {
            return k.classification
        }
        ).indexOf(j) != -1
    }
    ;
    f.prototype.calculator = function() {
        if (this.has(b.CALC_COUNT)) {
            return new c.calculator.Count()
        } else {
            if (this.has(b.CALC_UNIQ_COUNT)) {
                return new c.calculator.UniqCount()
            } else {
                if (this.has(b.CALC_SUM)) {
                    return new c.calculator.Sum()
                } else {
                    if (this.has(b.CALC_AVG)) {
                        return new c.calculator.Avg()
                    } else {
                        if (this.has(b.CALC_MAX)) {
                            return new c.calculator.Max()
                        } else {
                            if (this.has(b.CALC_MIN)) {
                                return new c.calculator.Min()
                            }
                        }
                    }
                }
            }
        }
        return null 
    }
    ;
    f.prototype.addOperation = function(k) {
        var j = d.get(k);
        this._operations = _.filter(this._operations, function(l) {
            return !g.exclusive(l.classification, j.classification)
        }
        );
        this._operations.push(j)
    }
    ;
    f.prototype.removeOperation = function(k) {
        var j = d.get(k);
        this._operations = _.without(this._operations, j);
        delete this._typeToOperation[j.type]
    }
    ;
    f.toJSON = function(j) {
        return {
            _operations: c.utils.SerializeUtil.batchToJSON(j._operations, a.toJSON),
            _typeToOperation: j._typeToOperation
        }
    }
    ;
    f.fromJSON = function(k) {
        var j = new f();
        j._operations = c.utils.SerializeUtil.batchFromJSON(k._operations, a.fromJSON);
        j._typeToOperation = k._typeToOperation;
        return j
    }
}
)(jQuery);
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.models.value.ValueBase");
    var a = b.models.value.ValueBase = function(c, d) {
        this._raw = c;
        this._value = d;
        this._quantified = null ;
        this._caption = null 
    }
    ;
    a.prototype.raw = function() {
        return this._raw
    }
    ;
    a.prototype.value = function() {
        return this._value
    }
    ;
    a.prototype.notNull = function() {
        return true
    }
    ;
    a.prototype.quantified = function() {
        throw new Error("StringValue does not quantifiable.")
    }
    ;
    a.prototype.caption = function() {}
    ;
    a.prototype.toString = function() {
        return this._value.toString()
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.models.value.BooleanValue");
    var b = a.models.value.BooleanValue = function(c, d) {
        b.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(b, andrea.grace.models.value.ValueBase);
    b._falseInstance = new b(false,false);
    b._trueInstance = new b(true,true);
    b.falseInstance = function() {
        return b._falseInstance
    }
    ;
    b.trueInstance = function() {
        return b._trueInstance
    }
    ;
    b.prototype.caption = function() {
        if (this._value) {
            return ""
        } else {
            return ""
        }
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.models.value.DateValue");
    var a = b.models.value.DateValue = function(c, d) {
        a.superclass.constructor.apply(this, arguments);
        this._captionsByFormat = {};
        a._instances[c] = this
    }
    ;
    andrea.blink.extend(a, andrea.grace.models.value.ValueBase);
    a._instances = {};
    a.instance = function(c) {
        return a._instances[c]
    }
    ;
    a.prototype.quantified = function() {
        if (this._quantified === null ) {
            this._quantified = this._value.getTime()
        }
        return this._quantified
    }
    ;
    a.CAPTION_DRILL_YEAR = "CAPTION_DRILL_YEAR";
    a.CAPTION_DRILL_MONTH = "CAPTION_DRILL_MONTH";
    a.CAPTION_DRILL_WEEK = "CAPTION_DRILL_WEEK";
    a.CAPTION_DRILL_DATE = "CAPTION_DRILL_DATE";
    a.CAPTION_GROUP_MONTH = "CAPTION_GROUP_MONTH";
    a.CAPTION_GROUP_DATE = "CAPTION_GROUP_DATE";
    a.CAPTION_GROUP_DAY = "CAPTION_GROUP_DAY";
    a.CAPTION_GROUP_HOUR = "CAPTION_GROUP_HOUR";
    a.prototype.caption = function(d) {
        if (!d) {
            d = a.CAPTION_DRILL_DATE
        }
        var c;
        if (!this._captionsByFormat[d]) {
            if (d === a.CAPTION_DRILL_YEAR) {
                c = this._value.format("yyyy")
            } else {
                if (d === a.CAPTION_DRILL_MONTH) {
                    c = this._value.format("yyyy/M")
                } else {
                    if (d === a.CAPTION_DRILL_DATE) {
                        c = this._value.format("yyyy/M/d")
                    } else {
                        if (d === a.CAPTION_DRILL_WEEK) {
                            var f = this._value.getMonsday();
                            var e = new Date();
                            e.setTime(f.getTime() + 7 * 24 * 3600 * 1000);
                            c = f.format("yyyy/M/d") + "-" + e.format("M/d")
                        } else {
                            if (d === a.CAPTION_GROUP_MONTH) {
                                c = Date.monthNames[this._value.getMonth()]
                            } else {
                                if (d === a.CAPTION_GROUP_DATE) {
                                    c = Date.dateNames[this._value.getDate() - 1]
                                } else {
                                    if (d === a.CAPTION_GROUP_DAY) {
                                        c = Date.dayNames[this._value.getDay()]
                                    } else {
                                        if (d === a.CAPTION_GROUP_HOUR) {
                                            c = Date.hourNames[this._value.getHours()]
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            this._captionsByFormat[d] = c
        }
        return this._captionsByFormat[d]
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.models.value.NullValue");
    var a = b.models.value.NullValue = function(c, d) {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.grace.models.value.ValueBase);
    a._instance = new a();
    a.instance = function() {
        return a._instance
    }
    ;
    a.prototype.notNull = function() {
        return false
    }
    ;
    a.prototype.quantified = function() {
        return 0
    }
    ;
    a.prototype.caption = function() {
        return "{}"
    }
    ;
    a.prototype.toString = function() {
        return ""
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.models.value.NumberValue");
    var a = b.models.value.NumberValue = function(c, d) {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.grace.models.value.ValueBase);
    a.prototype.quantified = function() {
        return this._value
    }
    ;
    a.prototype.caption = function() {
        if (this._caption === null ) {
            var c = this._value;
            if (c != parseInt(c)) {
                this._caption = $.number(c, 2)
            } else {
                this._caption = $.number(c, 0)
            }
        }
        return this._caption
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.models.value.StringValue");
    var a = b.models.value.StringValue = function(c, d) {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.grace.models.value.ValueBase);
    a.prototype.caption = function() {
        return this._value
    }
}
)();
(function() {
    var c = andrea.grace;
    andrea.blink.declare("andrea.grace.models.value.supportClasses.QuantifiedHelper");
    var b = c.models.value.DateValue;
    var a = c.models.value.NumberValue;
    var d = c.models.value.supportClasses.QuantifiedHelper = {};
    d.TYPE_DATE = "quantified_typeDate";
    d.TYPE_NUMBER = "quantified_typeNumber";
    d.fromQuantified = function(f, e) {
        if (f === d.TYPE_DATE) {
            var g = new Date();
            g.setTime(e);
            return new b(e.toString(),g)
        } else {
            if (f === d.TYPE_NUMBER) {
                return new a(e.toString(),e)
            }
        }
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.utils.URLUtil");
    var c = a.utils.URLUtil;
    var b = null ;
    c.hashPairs = function() {
        if (b === null ) {
            b = {};
            var g = window.location.hash.slice(1);
            var f = g.split("&");
            for (var e in f) {
                var h = f[e].split("=");
                if (h.length == 2) {
                    var d = h[0];
                    if (d) {
                        b[d] = decodeURIComponent(h[1])
                    }
                }
            }
            g = window.location.search.slice(1);
            f = g.split("&");
            for (var e in f) {
                var h = f[e].split("=");
                if (h.length == 2) {
                    var d = h[0];
                    if (d && (b[d] == null  || b[d] === "")) {
                        b[d] = decodeURIComponent(h[1])
                    }
                }
            }
        }
        return b
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.utils.FilterUtil");
    var b = a.utils.FilterUtil;
    b.filter = function(e, g) {
        if (!g || g.length === 0) {
            return e
        }
        var f = [];
        for (i = 0; i < e.numRows; i++) {
            var c = e.getRValues(i);
            var d = true;
            _.each(g, function(h) {
                d = d && h.filter.filter(c[h.source.index])
            }
            );
            if (!d) {
                continue
            }
            f.push(c)
        }
        return new a.models.DataProvider(f)
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.utils.ConverterType");
    var a = b.utils.ConverterType;
    a.ANY = "any";
    a.BOOLEAN = "boolean";
    a.STRING = "string";
    a.NUMBER = "number";
    a.DATE_IN_EXCEL = "dataInExcel";
    a.DATE_IN_TEXT = "dateInText";
    a.DATE_IN_MS = "dateInMS";
    a._dateFormats = (function() {
        var c = [];
        c.push("yyyy/MM/dd");
        c.push("yyyy/M/d");
        c.push("yy/MM/dd");
        c.push("yy/M/d");
        c.push("MM/dd/yyyy");
        c.push("M/d/yyyy");
        c.push("MM/dd/yy");
        c.push("M/d/yy");
        c.reverse();
        return c
    }
    )();
    a.getDateFormats = function() {
        return a._dateFormats
    }
    ;
    a._monthFormats = (function() {
        var c = [];
        c.push("yyyy/M");
        c.push("yy/M");
        c.reverse();
        return c
    }
    )();
    a.getMonthFormats = function() {
        return a._monthFormats
    }
}
)();
(function() {
    var g = andrea.grace;
    var f = g.utils.ConverterType;
    var c = g.models.value.DateValue;
    var e = g.models.value.NullValue;
    var h = g.models.value.BooleanValue;
    var a = g.models.value.NumberValue;
    var b = g.models.value.StringValue;
    andrea.blink.declare("andrea.grace.utils.DataConvertUtil");
    var d = g.utils.DataConvertUtil;
    d.match = function(j, m) {
        var l = null ;
        var k = null ;
        if (j) {
            l = d._convertNumber(j);
            if (l.notNull()) {
                if (m && (l.value() >= 32874 && l.value() <= 47848)) {
                    l = d._convertDateInExcel(j);
                    k = f.DATE_IN_EXCEL
                } else {
                    k = f.NUMBER
                }
            }
            if (!l.notNull()) {
                l = d._convertDateInText(j);
                k = f.DATE_IN_TEXT
            }
            if (!l.notNull()) {
                l = d._convertBoolean(j);
                k = f.BOOLEAN
            }
            if (!l.notNull()) {
                l = d._convertString(j);
                k = f.STRING
            }
        } else {
            k = f.ANY;
            l = e.instance()
        }
        return {
            type: k,
            value: l
        }
    }
    ;
    d.getConverter = function(k, j) {
        if (k === f.BOOLEAN) {
            return d._convertBoolean
        } else {
            if (k === f.NUMBER) {
                return d._convertNumber
            } else {
                if (k === f.DATE_IN_TEXT) {
                    return d._convertDateInText
                } else {
                    if (k === f.DATE_IN_EXCEL) {
                        return d._convertDateInExcel
                    } else {
                        if (k === f.DATE_IN_MS) {
                            return d._convertDateInMS
                        } else {
                            if (k === f.STRING) {
                                return d._convertString
                            } else {
                                return null 
                            }
                        }
                    }
                }
            }
        }
    }
    ;
    d._convertString = function(j) {
        if (j != null ) {
            return new b(j,_.str.trim(j.toString()))
        } else {
            return e.instance()
        }
    }
    ;
    d._convertBoolean = function(j) {
        if (j === false) {
            return new h.falseInstance()
        } else {
            if (j === true) {
                return new h.trueInstance()
            } else {
                return e.instance()
            }
        }
    }
    ;
    d._convertNumber = function(j) {
        if (j != null ) {
            var k = _.str.trim(j.toString());
            if (!isNaN(k)) {
                return new a(j,Number(k))
            } else {
                if (k.length > 1 && k.substr(k.length - 1, 1) === "%") {
                    k = k.substr(0, k.length - 1);
                    if (!isNaN(k)) {
                        return new a(j,Number(k))
                    }
                }
            }
        } else {
            return e.instance()
        }
        return e.instance()
    }
    ;
    d._convertDateInMS = function(j) {
        if (!j) {
            return e.instance()
        }
        return new c(j,new Date(j))
    }
    ;
    d._convertDateInText = function(q) {
        if (!q) {
            return e.instance()
        }
        var t = _.str.trim(q.toString());
        if (t.length < 6 || isNaN(t.substr(0, 1)) || isNaN(t.substr(t.length - 1, 1))) {
            return e.instance()
        }
        t = t.replace(/[_-]/g, "/");
        if (t.indexOf("/") === -1) {
            return e.instance()
        }
        var j = c.instance(q);
        if (j) {
            return j
        }
        var r;
        if (t.indexOf(" ") !== -1) {
            if (t.indexOf(":") === -1) {
                return e.instance()
            } else {
                if (t.indexOf(":") === t.lastIndexOf(":")) {
                    r = "H:m"
                } else {
                    r = "H:m:s"
                }
            }
        }
        var k = null ;
        if (d._preferDateTest) {
            k = Date.parseString(t, d._preferDateTest)
        }
        var p;
        var l = t.split("/");
        if (l.length === 3) {
            p = f.getDateFormats()
        } else {
            if (l.length === 2) {
                p = f.getMonthFormats()
            }
        }
        for (var m = p.length - 1; m >= 0 && !k; m--) {
            var n = p[m];
            if (r) {
                n = n + " " + r
            }
            k = Date.parseString(t, n);
            if (k) {
                d._preferDateTest = n;
                break
            }
        }
        if (k) {
            return new c(q,k)
        } else {
            return e.instance()
        }
    }
    ;
    d._preferDateTest = null ;
    d._convertDateInExcel = function(l) {
        if (!l) {
            return e.instance()
        }
        var m = _.str.trim(l.toString());
        if (isNaN(m)) {
            return e.instance()
        }
        var j = c.instance(l);
        if (j) {
            return j
        }
        excelTime = parseFloat(m);
        if (excelTime > d._WRONG_DATE_IN_EXCEL_FORMAT) {
            excelTime = excelTime - 1
        }
        var p = d._EXCEL_BASE_TIME - d._DAY_IN_MILLISECONDS;
        var n = p + excelTime * d._DAY_IN_MILLISECONDS;
        var k = new Date();
        k.setTime(n + d._getTimezoneOffsetMS());
        return new c(l,k)
    }
    ;
    d._EXCEL_BASE_TIME = -2208988800000;
    d._WRONG_DATE_IN_EXCEL_FORMAT = 60;
    d._DAY_IN_MILLISECONDS = 86400000;
    d._TIMEZONE_OFFSET_MS = 0;
    d._createAndReadTimezoneOffset = function() {
        d._TIMEZONE_OFFSET_MS = new Date().getTimezoneOffset() * 60 * 1000;
        d._getTimezoneOffsetMS = d._readTimezoneOffset;
        return d._readTimezoneOffset()
    }
    ;
    d._readTimezoneOffset = function() {
        return d._TIMEZONE_OFFSET_MS
    }
    ;
    d._getTimezoneOffsetMS = d._createAndReadTimezoneOffset
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.utils.ColorUtil");
    var b = a.utils.ColorUtil;
    b.hexToRgb = function(e) {
        var d = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        e = e.replace(d, function(h, k, j, f) {
            return k + k + j + j + f + f
        }
        );
        var c = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);
        return c ? {
            r: parseInt(c[1], 16),
            g: parseInt(c[2], 16),
            b: parseInt(c[3], 16)
        } : null 
    }
    ;
    b.rgbToHex = function(e, d, c) {
        return "#" + b._componentToHex(e) + b._componentToHex(d) + b._componentToHex(c)
    }
    ;
    b._componentToHex = function(e) {
        var d = e.toString(16);
        return d.length == 1 ? "0" + d : d
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.utils.Stopwatch");
    var a = b.utils.Stopwatch = function(d, c) {
        this._s = null ;
        this._e = null ;
        this._laps = null ;
        this.type = d;
        if (c === true) {
            this.start()
        }
    }
    ;
    a.prototype.start = function() {
        this._s = new Date().getTime();
        this._laps = []
    }
    ;
    a.prototype.lap = function(d) {
        var c = this._laps;
        c.push(new Date().getTime());
        if (d === true) {
            this._e = c[c.length - 1]
        }
        if (c.length > 1) {
            return c[c.length - 1] - c[c.length - 2]
        } else {
            return c[0] - this._s
        }
    }
    ;
    a.prototype.total = function() {
        return this._e - this._s
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.utils.SerializeUtil");
    var a = b.utils.SerializeUtil;
    a.batchToJSON = function(f, d) {
        if (_.isArray(f)) {
            var c = [];
            for (var e = 0; e < f.length; e++) {
                c.push(d.call(null , f[e]))
            }
            return c
        } else {
            if (f) {
                return d.call(null , f)
            } else {
                return null 
            }
        }
    }
    ;
    a.batchFromJSON = function(f, d) {
        if (_.isArray(f)) {
            var c = [];
            for (var e = 0; e < f.length; e++) {
                c.push(d.call(null , f[e]))
            }
            return c
        } else {
            if (f) {
                return d.call(null , f)
            } else {
                return null 
            }
        }
    }
}
)();
(function(c) {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.managers.Log");
    var a = b.managers.Log;
    a.INTERACTION = "interaction";
    a.PERFORMANCE = "performance";
    a.LINE_SPLITTER = "%LINE_SPLITTER%";
    a._start = new Date().getTime();
    a._uid = a._start + "_" + _.random(0, 10000);
    a.user = null ;
    a.console = function() {
        console.log(arguments)
    }
    ;
    a.interaction = function(d, e) {
        a._log("info", a.INTERACTION, [d, e].join(","))
    }
    ;
    a.performance = function(d, e) {
        a._log("info", a.PERFORMANCE, [d, e].join(","))
    }
    ;
    c(window).on("beforeunload", function() {
        a.interaction("close", (new Date().getTime() - a._start) / 1000);
        a._releaseCache()
    }
    );
    a._logCache = null ;
    a._log = function(h, e, d) {
        var f = [];
        f.push("grace_" + b.Settings.version);
        f.push("log_" + b.Settings.log.version);
        f.push(a.user);
        f.push(a._uid);
        f.push(a._time());
        var g = [f.join(","), e, d].join(",");
        if (b.Settings.log.console && console) {
            console.log(h, g)
        }
        if (!a._logCache) {
            a._logCache = {};
            _.delay(a._releaseCache, 10 * 1000)
        }
        if (!a._logCache[h]) {
            a._logCache[h] = []
        }
        a._logCache[h].push(g)
    }
    ;
    a._logServer = b.Settings.log.url;
    a._releaseCache = function() {
        if (!a._logCache || !a._logServer) {
            return
        }
        for (var e in a._logCache) {
            var d = a._logCache[e].join(a.LINE_SPLITTER);
            c.ajax({
                dataType: "json",
                url: a._logServer,
                data: {
                    level: e,
                    msg: d
                },
                type: "POST"
            }).fail(function() {
                a._logServer = null 
            }
            )
        }
        a._logCache = null 
    }
    ;
    a._time = function() {
        var f = new Date();
        var e = f.getTime().toString();
        return f.format("yyyy/MM/dd HH:mm:ss") + "," + e.substr(e.length - 3)
    }
}
)(jQuery);
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.helpers.PageTransition");
    var a = b.helpers.PageTransition = function(e, d, c) {
        this._$outPage = e["$page"];
        this._outClasses = e.classes.join(" ");
        this._outDelay = e.delay;
        this._$inPage = d["$page"];
        this._inClasses = d.classes.join(" ");
        this._inDelay = d.delay;
        this._endCallback = c;
        this._inEnded = false;
        this._outEnded = false
    }
    ;
    a.prototype.$outPage = function() {
        return this._$outPage
    }
    ;
    a.prototype.$inPage = function() {
        return this._$inPage
    }
    ;
    a.prototype.play = function() {
        if (this._outClasses) {
            var d = $.proxy(function() {
                this._$outPage.addClass(this._outClasses).on("webkitAnimationEnd", $.proxy(function() {
                    this._$outPage.off("webkitAnimationEnd");
                    this._inEnded = true;
                    this._animationEndHandler()
                }
                , this))
            }
            , this);
            if (this._outDelay) {
                _.delay(d, this._outDelay)
            } else {
                d()
            }
        } else {
            this._inEnded = true;
            this._animationEndHandler()
        }
        if (this._inClasses) {
            var c = $.proxy(function() {
                this._$inPage.show(0);
                this._$inPage.addClass(this._inClasses).on("webkitAnimationEnd", $.proxy(function() {
                    this._$inPage.off("webkitAnimationEnd");
                    this._outEnded = true;
                    this._animationEndHandler()
                }
                , this))
            }
            , this);
            if (this._inDelay) {
                this._$inPage.hide(0);
                _.delay(c, this._inDelay)
            } else {
                c()
            }
        } else {
            this._outEnded = true;
            this._animationEndHandler()
        }
    }
    ;
    a.prototype._animationEndHandler = function() {
        if (!this._inEnded || !this._outEnded) {
            return
        }
        this._$outPage.removeClass(this._outClasses);
        this._$inPage.removeClass(this._inClasses);
        this._inEnded = false;
        this._outEnded = false;
        if (this._endCallback) {
            this._endCallback.call(this)
        }
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.calculator.supportClasses.ICalculator");
    var a = b.calculator.supportClasses.ICalculator = function() {}
    ;
    a.prototype.addFactor = function(c) {}
    ;
    a.prototype.calculate = function() {
        return 0
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.calculator.Sum");
    var a = b.calculator.Sum = function() {
        this._sum = 0
    }
    ;
    andrea.blink.extend(a, b.calculator.supportClasses.ICalculator);
    a.prototype.addFactor = function(c) {
        c = parseFloat(c);
        if (!isNaN(c)) {
            this._sum = parseFloat((this._sum + c).toFixed(4))
        }
    }
    ;
    a.prototype.calculate = function() {
        return this._sum
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.calculator.Max");
    var b = a.calculator.Max = function() {
        this._max = 0
    }
    ;
    andrea.blink.extend(b, a.calculator.supportClasses.ICalculator);
    b.prototype.addFactor = function(c) {
        if (!isNaN(c)) {
            this._max = Math.max(this._max, c)
        }
    }
    ;
    b.prototype.calculate = function() {
        return this._max
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.calculator.Min");
    var a = b.calculator.Min = function() {
        this._max = Number.MAX_VALUE
    }
    ;
    andrea.blink.extend(a, b.calculator.supportClasses.ICalculator);
    a.prototype.addFactor = function(c) {
        if (!isNaN(c)) {
            this._max = Math.min(this._max, c)
        }
    }
    ;
    a.prototype.calculate = function() {
        return this._max
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.calculator.Avg");
    var a = b.calculator.Avg = function() {
        this._sumAlternate = 0;
        this._count = 0
    }
    ;
    andrea.blink.extend(a, b.calculator.supportClasses.ICalculator);
    a.prototype.addFactor = function(c) {
        if (!isNaN(c)) {
            this._sumAlternate += Math.round(c * 1000000)
        }
        this._count++
    }
    ;
    a.prototype.calculate = function() {
        if (this._count === 0) {
            return 0
        } else {
            return Math.round(this._sumAlternate / this._count) / 1000000
        }
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.calculator.Count");
    var a = b.calculator.Count = function() {
        this._count = 0
    }
    ;
    andrea.blink.extend(a, b.calculator.supportClasses.ICalculator);
    a.prototype.addFactor = function(c) {
        this._count++
    }
    ;
    a.prototype.calculate = function() {
        return this._count
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.calculator.UniqCount");
    var b = a.calculator.UniqCount = function() {
        this._count = 0;
        this._mapping = {}
    }
    ;
    andrea.blink.extend(b, a.calculator.supportClasses.ICalculator);
    b.prototype.addFactor = function(c) {
        if (!this._mapping[c]) {
            this._mapping[c] = true;
            this._count++
        }
    }
    ;
    b.prototype.calculate = function() {
        return this._count
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.filter.IFilter");
    var a = b.filter.IFilter = function() {}
    ;
    a.prototype.filter = function(c) {
        return false
    }
    ;
    a.prototype.type = function() {
        return undefined
    }
    ;
    a.toJSON = function(c) {
        var d = c.type();
        if (d === "RangeFilter") {
            return b.filter.RangeFilter.toJSON(c)
        } else {
            if (d === "TextFilter") {
                return b.filter.TextFilter.toJSON(c)
            }
        }
    }
    ;
    a.fromJSON = function(c) {
        var d = c.type;
        if (d === "RangeFilter") {
            return b.filter.RangeFilter.fromJSON(c)
        } else {
            if (d === "TextFilter") {
                return b.filter.TextFilter.fromJSON(c)
            }
        }
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.filter.TextFilter");
    var b = a.filter.TextFilter = function(c, e) {
        var d = this._options = {};
        _.each(c, function(f) {
            d[f.caption()] = true
        }
        );
        this.nullable = e
    }
    ;
    andrea.blink.extend(b, a.filter.IFilter);
    b.prototype.type = function() {
        return "TextFilter"
    }
    ;
    b.prototype.filter = function(c) {
        return this._options[c.caption()]
    }
    ;
    b.prototype.addOption = function(c) {
        this._options[c.caption()] = true
    }
    ;
    b.prototype.removeOption = function(c) {
        this._options[c.caption()] = false
    }
    ;
    b.toJSON = function(c) {
        return {
            type: c.type(),
            options: c._options,
            nullable: c.nullable
        }
    }
    ;
    b.fromJSON = function(d) {
        var c = new b([],d.quantifiedType);
        c._options = d.options;
        return c
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.filter.RangeFilter");
    var b = a.models.value.supportClasses.QuantifiedHelper;
    var c = a.filter.RangeFilter = function(d, f, e) {
        this._from = null ;
        this._to = null ;
        this._min = null ;
        this._max = null ;
        this.optionValues(d);
        this.nullable = f;
        this._quantifiedType = e
    }
    ;
    andrea.blink.extend(c, a.filter.IFilter);
    c.prototype.optionValues = function(d) {
        this._from = Number.MAX_VALUE;
        this._to = -Number.MAX_VALUE;
        _.each(d, $.proxy(function(f) {
            var e = f.quantified();
            this._from = Math.min(this._from, e);
            this._to = Math.max(this._to, e)
        }
        , this));
        this._min = this._from;
        this._max = this._to
    }
    ;
    c.prototype.type = function() {
        return "RangeFilter"
    }
    ;
    c.prototype.filter = function(e) {
        var d = e.quantified();
        return this._max >= d && this._min <= d
    }
    ;
    c.prototype.from = function(d) {
        return this._from
    }
    ;
    c.prototype.to = function(d) {
        return this._to
    }
    ;
    c.prototype.min = function(d) {
        if (arguments.length > 0) {
            this._min = d;
            return this
        } else {
            return this._min
        }
    }
    ;
    c.prototype.max = function(d) {
        if (arguments.length > 0) {
            this._max = d;
            return this
        } else {
            return this._max
        }
    }
    ;
    c.prototype.fromQuantified = function(d) {
        return b.fromQuantified(this._quantifiedType, d)
    }
    ;
    c.toJSON = function(d) {
        return {
            type: d.type(),
            from: d._from,
            to: d._to,
            min: d._min,
            max: d._max,
            nullable: d.nullable,
            quantifiedType: d._quantifiedType
        }
    }
    ;
    c.fromJSON = function(e) {
        var d = new c([],e.nullable,e.quantifiedType);
        d._from = e.from;
        d._to = e.to;
        d._min = e.min;
        d._max = e.max;
        return d
    }
}
)();
(function(b) {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.managers.PopUpManager");
    var c = a.managers.PopUpManager;
    c.createPopUp = function(f, g) {
        var h = b("body");
        var j = b(document);
        var e = b("<div/>").addClass("grace-popup-layer").appendTo(h);
        if (g) {
            e.width(j.width());
            e.height(j.height())
        }
        var d = b(f.dom());
        d.appendTo(e);
        return f
    }
    ;
    c.removePopUp = function(e) {
        var d = b(e.dom());
        d.parent().empty().detach()
    }
    ;
    c.centerPopUp = function(e) {
        var d = b(e.dom());
        var f = b("body");
        var g = f.children().eq(0);
        d.css({
            left: (g.width() - d.width()) / 2 + "px",
            top: (g.height() - d.height()) / 2 - 36 + "px"
        })
    }
}
)(jQuery);
(function(e) {
    var d = andrea.grace;
    andrea.blink.declare("andrea.grace.managers.SerializeManager");
    var c = d.utils.SerializeUtil;
    var b = d.managers.Log;
    var a = d.managers.SerializeManager = function() {
        this._serializing = {};
        this._deserializing = null ;
        this._requestedSerializations = []
    }
    ;
    a._instance = null ;
    a.instance = function() {
        if (!a._instance) {
            a._instance = new a()
        }
        return a._instance
    }
    ;
    a.prototype.serializable = function() {
        return this._serializing.dsInfo !== null  && this._serializing.dsInfo !== undefined
    }
    ;
    a.prototype.serialize = function(f, g) {
        if (!this._serializing.dsInfo) {
            this._requestedSerializations.push(arguments);
            return
        }
        _.extend(this._serializing, {
            layout: f
        });
        e.ajax({
            url: d.Settings.nodeServer + "/collaboration/create",
            type: "POST",
            data: {
                collaboration: JSON.stringify(this._serializing)
            }
        }).done(e.proxy(function(h) {
            g(h.sn)
        }
        , this)).fail(e.proxy(function() {
            b.console("serialize collaboration fail.")
        }
        , this))
    }
    ;
    a.prototype.deserialize = function(f) {
        e.ajax({
            url: d.Settings.nodeServer + "/collaboration/get",
            dataType: "jsonp",
            data: {
                sn: f
            }
        }).done(e.proxy(function(g) {
            this._deserializing = g.collaboration;
            d.api.config.dataDiscovery.layout = this._deserializing.layout;
            d.api.dataSource.load(this._deserializing.dsInfo)
        }
        , this)).fail(e.proxy(function() {
            b.console("deserialize visualization fail.")
        }
        , this))
    }
    ;
    a.prototype.loadVizContext = function(k) {
        if (this._deserializing) {
            var g = d.models.vo.ShelvedAnalysis;
            var f = {
                vizType: this._deserializing.vizType,
                analysisDimesions: c.batchFromJSON(this._deserializing.analysisDimesions, g.fromJSON),
                analysisDatas: c.batchFromJSON(this._deserializing.analysisDatas, g.fromJSON),
                analysisFilters: c.batchFromJSON(this._deserializing.analysisFilters, g.fromJSON)
            };
            if (this._deserializing.title) {
                var j = document.title.split(" - ");
                j[j.length - 1] = this._deserializing.title;
                document.title = j.join(" - ");
                var h = d.views.analysisResult.viz.highCharts.supportClasses.HighChartsOption;
                h.title = this._deserializing.title
            }
            k(f)
        }
    }
    ;
    a.prototype.saveDataSource = function(f) {
        this._serializing.dsInfo = f;
        if (this._serializing.dsInfo && this._requestedSerializations.length) {
            _.each(this._requestedSerializations, e.proxy(function(g) {
                this.serialize.apply(this, g)
            }
            , this));
            this._requestedSerializations = []
        }
    }
    ;
    a.prototype.saveVizContext = function(k, g, j, f, l) {
        var h = d.models.vo.ShelvedAnalysis;
        _.extend(this._serializing, {
            vizType: k,
            analysisDimesions: c.batchToJSON(g, h.toJSON),
            analysisDatas: c.batchToJSON(j, h.toJSON),
            analysisFilters: c.batchToJSON(f, h.toJSON),
            title: l
        })
    }
    ;
    a.prototype.saveViz = function(f) {
        this._serializing.viz = f
    }
}
)(jQuery);
(function() {
    var e = andrea.grace;
    andrea.blink.declare("andrea.grace.models.vo.Analysis");
    var c = e.constants.ShelfType;
    var d = e.utils.DataConvertUtil;
    var f = e.constants.ValueType;
    var b = e.constants.AnalysisType;
    var a = e.models.vo.Analysis = function(g) {
        this.id = g ? g : _.uniqueId("analysisID_");
        this.index = null ;
        this.name = null ;
        this._valueType = null ;
        this.quantifiable = false;
        this.analysisType = null ;
        this.numUniqueValue = null ;
        this.dateSpan = null 
    }
    ;
    a.prototype.valueType = function(g) {
        if (arguments.length > 0) {
            this._valueType = g;
            this.quantifiable = this._valueType === f.NUMBER || this._valueType === f.DATE;
            return this
        } else {
            return this._valueType
        }
    }
    ;
    a.toJSON = function(g) {
        return {
            id: g.id,
            index: g.index,
            name: g.name,
            _valueType: g._valueType,
            quantifiable: g.quantifiable,
            analysisType: g.analysisType,
            numUniqueValue: g.numUniqueValue,
            dateSpan: g.dateSpan,
        }
    }
    ;
    a.fromJSON = function(h) {
        var g = new a();
        g.id = h.id;
        g.index = h.index;
        g.name = h.name;
        g._valueType = h._valueType;
        g.quantifiable = h.quantifiable;
        g.analysisType = h.analysisType;
        g.numUniqueValue = h.numUniqueValue;
        g.dateSpan = h.dateSpan;
        return g
    }
}
)();
(function() {
    var c = andrea.grace;
    var e = c.constants.ValueType;
    var a = c.constants.AnalysisType;
    var d = c.operation.OperationClassification;
    andrea.blink.declare("andrea.grace.models.vo.ShelvedAnalysis");
    var b = c.models.vo.ShelvedAnalysis = function(g, f) {
        this.id = g;
        this.source = f;
        this.operationGroup = null ;
        this.visualized = false;
        this.numPartialVisualized = 0;
        this.filter = null 
    }
    ;
    b.prototype.isDateSeries = function() {
        return this.source.valueType() === e.DATE && this.operationGroup.hasClassification(d.DRILL)
    }
    ;
    b.prototype.multiply = function(g) {
        var f = {};
        if (g && g.source && g.source.numUniqueValue) {
            f.numUniqueValue = this.source.numUniqueValue * g.source.numUniqueValue
        } else {
            f.numUniqueValue = this.source.numUniqueValue
        }
        return f
    }
    ;
    b.toJSON = function(f) {
        var g = {
            id: f.id,
            source: c.models.vo.Analysis.toJSON(f.source),
            operationGroup: c.operation.OperationGroup.toJSON(f.operationGroup),
            visualized: f.visualized,
            numPartialVisualized: f.numPartialVisualized
        };
        if (f.filter) {
            g.filter = c.filter.IFilter.toJSON(f.filter)
        }
        return g
    }
    ;
    b.fromJSON = function(g) {
        var f = new b();
        f.id = g.id;
        f.source = c.models.vo.Analysis.fromJSON(g.source);
        f.operationGroup = c.operation.OperationGroup.fromJSON(g.operationGroup);
        f.visualized = g.visualized;
        f.numPartialVisualized = g.numPartialVisualized;
        if (g.filter) {
            f.filter = c.filter.IFilter.fromJSON(g.filter)
        }
        return f
    }
}
)();
(function(d) {
    var c = andrea.grace;
    var b = c.models.value.NullValue;
    andrea.blink.declare("andrea.grace.models.DataProvider");
    var a = c.models.DataProvider = function(e) {
        this._values2d = e;
        this.numRows = 0;
        this.numColumns = 0;
        this._columnBased = null ;
        this._build()
    }
    ;
    andrea.blink.extend(a, andrea.blink.mvc.Model);
    a.prototype._build = function() {
        var k, h;
        var g;
        var e = [];
        this._columnBased = {
            values2d: [],
            uniqueValues2d: [],
            notNullValue2d: [],
            notNullUniqueValues2d: [],
            hasNull2d: []
        };
        this.numRows = this._values2d.length;
        this.numColumns = this.numRows > 0 ? this._values2d[0].length : 0;
        for (h = 0; h < this.numColumns; h++) {
            this._columnBased.values2d[h] = [];
            this._columnBased.uniqueValues2d[h] = [];
            this._columnBased.notNullValue2d[h] = [];
            this._columnBased.notNullUniqueValues2d[h] = [];
            this._columnBased.hasNull2d[h] = false;
            e[h] = []
        }
        for (k = 0; k < this.numRows; k++) {
            g = this.getRValues(k);
            for (h = 0; h < this.numColumns; h++) {
                var f = g[h];
                var l = f.toString();
                this._columnBased.hasNull2d[h] = this._columnBased.hasNull2d[h] || !f.notNull();
                this._columnBased.values2d[h].push(f);
                if (f.notNull()) {
                    this._columnBased.notNullValue2d[h].push(f)
                }
                if (!e[h][l]) {
                    e[h][l] = true;
                    if (f.notNull()) {
                        this._columnBased.uniqueValues2d[h].push(f);
                        this._columnBased.notNullUniqueValues2d[h].push(f)
                    }
                }
            }
        }
        for (h = 0; h < this.numColumns; h++) {
            if (this._columnBased.hasNull2d[h]) {
                this._columnBased.uniqueValues2d[h].push(b.instance())
            }
        }
    }
    ;
    a.prototype.getRValues = function(e) {
        return this._values2d[e]
    }
    ;
    a.prototype.getCValues = function(e, g, f) {
        if (g && f) {
            return this._columnBased.notNullUniqueValues2d[e]
        } else {
            if (!g && f) {
                return this._columnBased.notNullValue2d[e]
            } else {
                if (g && !f) {
                    return this._columnBased.uniqueValues2d[e]
                } else {
                    if (!g && !f) {
                        return this._columnBased.values2d[e]
                    }
                }
            }
        }
    }
    ;
    a.prototype.isCHasNull = function(e) {
        return this._columnBased.hasNull2d[e]
    }
}
)(jQuery);
(function(f) {
    var e = andrea.grace;
    andrea.blink.declare("andrea.grace.models.DataDiscoveryModel");
    var d = e.constants.ShelfType;
    var a = andrea.grace.constants.AppConst;
    var c = e.constants.VizType;
    var b = e.models.DataDiscoveryModel = function() {
        b.superclass.constructor.apply(this, arguments);
        b._instance = this;
        this.raw = null ;
        this.analyses = null ;
        this.dataProvider = null ;
        this._analysisFilters = [];
        this._analysisDimesions = [];
        this._analysisDatas = [];
        this._vizType = c.RECOMMEND
    }
    ;
    andrea.blink.extend(b, andrea.blink.mvc.Model);
    b._instance = null ;
    b.instance = function() {
        return b._instance
    }
    ;
    b.prototype.hackNotify = function(g, h) {
        this._notify(g, h)
    }
    ;
    b.prototype.setDataProvider = function(h, g, j) {
        this.raw = h;
        this.analyses = g;
        this.dataProvider = j;
        this._vizType = c.RECOMMEND;
        this._analysisFilters = [];
        this._analysisDimesions = [];
        this._analysisDatas = [];
        this._notify(a.NOTIFICATION_DATA_PROVIDER_CHANGED)
    }
    ;
    b.prototype.vizType = function(g) {
        if (arguments.length > 0) {
            if (this._vizType !== g) {
                this._vizType = g;
                this._deferNotify(a.NOTIFICATION_VIZ_CONTEXT_CHANGED)
            }
        } else {
            return this._vizType
        }
    }
    ;
    b.prototype.analysisFilters = function(g) {
        if (arguments.length > 0) {
            this._analysisFilters = g || [];
            this._deferNotify(a.NOTIFICATION_VIZ_CONTEXT_CHANGED)
        } else {
            return this._analysisFilters
        }
    }
    ;
    b.prototype.analysisDimesions = function(g) {
        if (arguments.length > 0) {
            this._analysisDimesions = g || [];
            this._deferNotify(a.NOTIFICATION_VIZ_CONTEXT_CHANGED)
        } else {
            return this._analysisDimesions
        }
    }
    ;
    b.prototype.analysisDatas = function(g) {
        if (arguments.length > 0) {
            this._analysisDatas = g || [];
            this._deferNotify(a.NOTIFICATION_VIZ_CONTEXT_CHANGED)
        } else {
            return this._analysisDatas
        }
    }
    ;
    b.prototype.resetVizContext = function(k, h, j, g) {
        this.vizType(k);
        this.analysisDimesions(h);
        this.analysisDatas(j);
        this.analysisFilters(g);
        this._deferNotify(a.NOTIFICATION_VIZ_CONTEXT_RESET)
    }
    ;
    b.prototype.invalidateShelvedAnalysis = function() {
        this._deferNotify(a.NOTIFICATION_VIZ_CONTEXT_APPLIED)
    }
    ;
    b.prototype.getAnalyses = function(j) {
        var g = [];
        for (var h = 0; h < j.length; h++) {
            g.push(this.getAnalysis(j[h]))
        }
        return g
    }
    ;
    b.prototype.getAnalysis = function(g) {
        return this._get(g, this.analyses)
    }
    ;
    b.prototype.getShelvedAnalysis = function(h) {
        var g = this._get(h, this._analysisFilters);
        if (!g) {
            g = this._get(h, this._analysisDimesions)
        }
        if (!g) {
            g = this._get(h, this._analysisDatas)
        }
        return g
    }
    ;
    b.prototype._get = function(j, g) {
        for (var h = 0; h < g.length; h++) {
            if (g[h].id === j) {
                return g[h]
            }
        }
        return null 
    }
}
)(jQuery);
(function() {
    var l = andrea.grace;
    andrea.blink.declare("andrea.grace.actions.ChangeDataProviderAction");
    var m = l.utils.ConverterType;
    var j = l.constants.ValueType;
    var b = l.models.value.NullValue;
    var e = andrea.grace.constants.AnalysisType;
    var k = andrea.grace.constants.AppConst;
    var d = l.models.vo.Analysis;
    var a = l.models.DataProvider;
    var h = l.utils.DataConvertUtil;
    var c = l.utils.Stopwatch;
    var f = l.managers.Log;
    var g = l.actions.ChangeDataProviderAction = function() {
        g.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(g, andrea.blink.mvc.Action);
    g.prototype.execute = function(O) {
        g.superclass.execute.apply(this, arguments);
        _.each(O.columnDescriptors, function(Z, Y) {
            if (_.isString(Z)) {
                O.columnDescriptors[Y] = {
                    name: Z
                }
            }
        }
        );
        var Q = {
            columnDescriptors: O.columnDescriptors,
            rows: O.rows,
            source: O.source
        };
        var P, N;
        var H = Q.source === "excel";
        var v = Q.columnDescriptors;
        v.push({
            id: "numRecords",
            name: "#",
            converterType: m.NUMBER,
            analysisType: e.MEASURE
        });
        var y = v.length;
        var R = Q.rows;
        var F = R.length;
        f.interaction("parseColumnRows", [y, F].join(","));
        if (F === 0) {
            return
        }
        var x = new c([y, F].join(","),true);
        var A = [];
        for (N = 0; N < y; N++) {
            var S = v[N];
            var U = new d(S.id);
            U.index = N;
            U.name = S.name;
            U.analysisType = S.analysisType;
            A[N] = U
        }
        var V = [];
        var T = null ;
        var J = null ;
        var D = [];
        var E;
        for (P = F - 1; P >= 0; P--) {
            V[P] = [];
            var u = R[P];
            u.push(1);
            for (N = y - 1; N >= 0; N--) {
                var C = u[N];
                E = D[N];
                if (!E) {
                    D[N] = E = {
                        numByType: {}
                    };
                    E.numByType[m.ANY] = 0
                }
                var X = v[N].converterType;
                if (X) {
                    if (C != null ) {
                        if (!E.fn) {
                            E.fn = h.getConverter(X)
                        }
                        J = E.fn.call(null , C)
                    } else {
                        J = b.instance();
                        X = m.ANY
                    }
                } else {
                    var K = H;
                    if (E.numByType && E.numByType[m.NUMBER] && E.numByType[m.NUMBER] > 3) {
                        K = false
                    }
                    var q = h.match(C, K);
                    X = q.type;
                    J = q.value
                }
                if (!E.numByType[X]) {
                    E.numByType[X] = 0
                }
                E.numByType[X]++;
                V[P][N] = J
            }
        }
        f.performance("parseDataProvider", [x.type, "parse", x.lap()].join(","));
        for (N = 0; N < y; N++) {
            U = A[N];
            if (!U.name) {
                U.name = "" + (N + 1)
            }
            if (!U.valueType()) {
                var w = false;
                var I = false;
                var s = null ;
                E = D[N];
                if (E.numByType) {
                    for (X in E.numByType) {
                        var n = E.numByType[X];
                        var G = E.numByType[m.ANY];
                        if (n / F === 1) {
                            w = true
                        }
                        if (X === m.ANY) {
                            continue
                        }
                        if (n / (F - G) > 0.5) {
                            if (X === m.DATE_IN_EXCEL || X === m.DATE_IN_TEXT || X === m.DATE_IN_MS) {
                                U.valueType(j.DATE)
                            } else {
                                if (X === m.NUMBER) {
                                    U.valueType(j.NUMBER)
                                } else {
                                    if (X === m.STRING) {
                                        U.valueType(j.STRING)
                                    }
                                }
                            }
                            if (!w) {
                                s = X;
                                if ((n + G) / F === 1) {
                                    I = true
                                }
                            }
                            break
                        }
                    }
                }
                if (!U.valueType()) {
                    U.valueType(j.STRING)
                }
                if (!w && s) {
                    var B = h.getConverter(s);
                    for (P = F - 1; P >= 0; P--) {
                        C = R[P][N];
                        if (!C || !I) {
                            V[P][N] = B.call(null , C)
                        }
                    }
                } else {}
            }
            if (!U.analysisType) {
                if (U.valueType() === j.NUMBER) {
                    U.analysisType = e.MEASURE
                } else {
                    U.analysisType = e.DIMENSION
                }
            }
        }
        f.performance("parseDataProvider", [x.type, "rinse", x.lap()].join(","));
        var r = new a(V);
        var M = [];
        var z = [];
        for (N = 0; N < y; N++) {
            U = A[N];
            U.numUniqueValue = r.getCValues(N, true, false).length;
            if (U.valueType() === j.DATE) {
                var L = _.sortBy(r.getCValues(N, true, true), function(Y) {
                    return Y.quantified()
                }
                );
                var t = L[0];
                var W = L[L.length - 1];
                U.dateSpan = W.quantified() - t.quantified()
            }
            if (U.analysisType === e.MEASURE) {
                z.push(U.name)
            } else {
                if (U.analysisType === e.DIMENSION) {
                    M.push(U.name)
                }
            }
        }
        var p = this._getModel(k.MODEL_GRACE);
        p.setDataProvider(Q, A, r);
        f.performance("parseDataProvider", [x.type, "setDataProvider", x.lap(true), x.total()].join(","));
        f.interaction("parsedDimensions", [M].join(","));
        f.interaction("parsedMeasures", [z].join(","))
    }
}
)();
(function() {
    var e = andrea.grace;
    andrea.blink.declare("andrea.grace.actions.RunAnalysisAction");
    var b = andrea.grace.constants.AppConst;
    var c = e.constants.ShelfType;
    var d = e.models.vo.ShelvedAnalysis;
    var a = e.actions.RunAnalysisAction = function() {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.blink.mvc.Action);
    a.prototype.execute = function(l) {
        a.superclass.execute.apply(this, arguments);
        var j;
        var m = c;
        var g = this._getModel(b.MODEL_GRACE);
        if (l.shelfType) {
            var h = l.shelfType;
            var f = l.shelvedContexts;
            if (!f) {
                return
            }
            var k = [];
            _.each(f, function(p) {
                var n = g.getShelvedAnalysis(p.shelvedAnalysisID);
                if (!n) {
                    n = new d(p.shelvedAnalysisID,g.getAnalysis(p.analysisID))
                }
                n.operationGroup = p.operationGroup;
                n.filter = p.filter;
                k.push(n)
            }
            );
            if (h === m.DES_DIM) {
                if (!_.isEqual(k, g.analysisDimesions())) {
                    g.analysisDimesions(k)
                }
            } else {
                if (h === m.DES_VALUE) {
                    if (!_.isEqual(k, g.analysisDatas())) {
                        g.analysisDatas(k)
                    }
                } else {
                    if (h === m.PROC_FILTER) {
                        g.analysisFilters(k)
                    }
                }
            }
        } else {
            if (l.vizType) {
                g.vizType(l.vizType)
            }
        }
    }
}
)();
(function() {
    var e = andrea.grace;
    andrea.blink.declare("andrea.grace.actions.SaveCollaborationAction");
    var c = andrea.grace.constants.AppConst;
    var b = e.managers.Log;
    var a = e.managers.SerializeManager;
    var d = e.actions.SaveCollaborationAction = function() {
        d.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(d, andrea.blink.mvc.Action);
    d.prototype.execute = function(g) {
        d.superclass.execute.apply(this, arguments);
        var f = this._getModel(c.MODEL_GRACE);
        f.hackNotify(c.NOTIFICATION_ACTION_SAVE_COLLABORATION_START);
        a.instance().saveVizContext(f._vizType, f.analysisDimesions(), f.analysisDatas(), f.analysisFilters(), g.title);
        a.instance().serialize(g.layout, function(h) {
            f.hackNotify(c.NOTIFICATION_ACTION_SAVE_COLLABORATION_COMPLETE, {
                sn: h
            })
        }
        )
    }
}
)();
(function() {
    var d = andrea.grace;
    andrea.blink.declare("andrea.grace.actions.LoadCollaborationAction");
    var c = andrea.grace.constants.AppConst;
    var b = d.managers.Log;
    var a = d.managers.SerializeManager;
    var e = d.actions.LoadCollaborationAction = function() {
        e.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(e, andrea.blink.mvc.Action);
    e.prototype.execute = function(g) {
        e.superclass.execute.apply(this, arguments);
        var f = this._getModel(c.MODEL_GRACE);
        a.instance().loadVizContext(function(h) {
            f.resetVizContext(h.vizType, h.analysisDimesions, h.analysisDatas, h.analysisFilters)
        }
        )
    }
}
)();
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.events.ShelfEvent");
    var b = a.views.analysisContainer.events.ShelfEvent = function(c, e, d) {
        b.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(b, andrea.blink.events.Event);
    b.CARD_COPIED = "cardCopied";
    b.CARD_SHELVED = "cardShelved";
    b.HELPER_DROPPED = "helperDropped"
}
)();
(function() {
    var c = andrea.grace;
    var b = c.helpers.PageTransition;
    andrea.blink.declare("andrea.grace.views.components.MoreButton");
    var a = c.views.components.MoreButton = function(e) {
        a.superclass.constructor.apply(this, arguments);
        var d = this._$dom.children();
        this._$p1 = $(d[0]);
        this._$p2 = $(d[1]);
        _.defer($.proxy(function() {
            this._onTop(this._$p1)
        }
        , this));
        this._$dom.addClass("grace-morebutton");
        this._$p1.addClass("grace-morebutton-page");
        this._$p2.addClass("grace-morebutton-page");
        this._$dom.hover($.proxy(this.showP2, this), $.proxy(this.showP1, this))
    }
    ;
    andrea.blink.extend(a, andrea.blink.mvc.View);
    a.prototype._onTop = function(d) {
        this._$p1.removeClass("pt-page-onTop");
        this._$p2.removeClass("pt-page-onTop");
        d.addClass("pt-page-onTop");
        this._$p1.css("width", this._$dom.width());
        this._$p1.css("height", this._$dom.height());
        this._$p2.css("width", this._$dom.width());
        this._$p2.css("height", this._$dom.height())
    }
    ;
    a.prototype.showP1 = function() {
        var d = new b({
            "$page": this._$p2,
            classes: ["pt-page-moveToBottom"]
        },{
            "$page": this._$p1,
            classes: ["pt-page-moveFromTop"]
        },function() {}
        );
        this._onTop(d.$inPage());
        d.play()
    }
    ;
    a.prototype.showP2 = function() {
        var d = new b({
            "$page": this._$p1,
            classes: ["pt-page-moveToTop"]
        },{
            "$page": this._$p2,
            classes: ["pt-page-moveFromBottom"]
        },function() {}
        );
        this._onTop(d.$inPage());
        d.play()
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.PopUpEvent");
    var a = b.views.popUp.PopUpEvent = function(c, e, d) {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.blink.events.Event);
    a.POPUP_OPENED = "popupOpened";
    a.POPUP_CLOSED = "popupClosed"
}
)();
(function(c) {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.PopUpBase");
    var e = b.managers.PopUpManager;
    var a = b.views.popUp.PopUpEvent;
    var d = b.views.popUp.PopUpBase = function(f) {
        d.superclass.constructor.apply(this, arguments);
        this.$dom().bind("selectstart", function() {
            return false
        }
        );
        this._classVisible = null ;
        this._visibleAnimationDuration = 600;
        this._$dock = null 
    }
    ;
    andrea.blink.extend(d, andrea.blink.mvc.View);
    d.prototype.$dock = function() {
        return this._$dock
    }
    ;
    d.prototype.open = function(g, h) {
        this._$dock = g;
        var j = this;
        var f = c(this._dom);
        f.css({
            position: "absolute",
            left: g.offset().left,
            top: g.offset().top + g.outerHeight()
        });
        if (this._classVisible) {
            _.defer(function() {
                f.addClass(j._classVisible)
            }
            )
        }
        e.createPopUp(this, h);
        this.dispatchEvent(new a(a.POPUP_OPENED,this))
    }
    ;
    d.prototype.close = function(g) {
        var h = this;
        var f = c(this._dom);
        if (g == null ) {
            g = 1
        }
        if (this._classVisible) {
            f.removeClass(this._classVisible);
            g = this._visibleAnimationDuration
        }
        if (g > 0) {
            setTimeout(function() {
                e.removePopUp(h)
            }
            , g)
        } else {
            e.removePopUp(h)
        }
        this.dispatchEvent(new a(a.POPUP_CLOSED,this))
    }
    ;
    d.prototype.closeImmediately = function() {
        this.close(0)
    }
}
)(jQuery);
(function(b) {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.HoverPopUpBase");
    var c = a.views.popUp.HoverPopUpBase = function(d) {
        c.superclass.constructor.apply(this, arguments);
        this._hover = null ;
        this._click = null ;
        this._mousedown = null ;
        this._mouseup = null 
    }
    ;
    andrea.blink.extend(c, a.views.popUp.PopUpBase);
    c.prototype.open = function(d) {
        c.superclass.open.apply(this, arguments);
        this._closeByHover(true);
        this._closeByClick(true)
    }
    ;
    c.prototype.close = function() {
        c.superclass.close.apply(this, arguments);
        this._closeByHover(false);
        this._closeByClick(false)
    }
    ;
    c.prototype._closeByClick = function(d) {
        if (d) {
            var f = this;
            var e = this._click = b.proxy(function(g) {
                if (this._$dom[0] != g.target && !b.contains(this._$dom[0], g.target)) {
                    if (this._$dock[0] != g.target && !b.contains(this._$dock[0], g.target)) {
                        this.close()
                    }
                }
            }
            , this);
            b(document.body).on("click", e).on("touchstart", e)
        } else {
            b(document.body).off("click", this._click).off("touchstart", this._click)
        }
    }
    ;
    c.prototype._closeByHover = function(g) {
        if (g) {
            var l = this;
            var d = true;
            var h = false;
            var k = function() {
                if (h) {
                    return
                }
                setTimeout(function() {
                    if (!d) {
                        l.close()
                    }
                }
                , 120)
            }
            ;
            var f = this._hover = function(m) {
                if (m.type === "mouseenter") {
                    d = true
                } else {
                    if (m.type === "mouseleave") {
                        d = false;
                        k()
                    }
                }
            }
            ;
            var e = this._mousedown = function() {
                h = true
            }
            ;
            var j = this._mouseup = function() {
                h = false;
                if (!d) {
                    k()
                }
            }
            ;
            this._$dock.on("hover", f);
            this._$dom.on("hover", f);
            this._$dom.on("mousedown", e);
            b(document.body).on("mouseup", j)
        } else {
            this._$dock.off("hover", this._hover);
            this._$dom.off("hover", this._hover);
            this._$dom.off("mousedown", this._mousedown);
            b(document.body).off("mouseup", this._mouseup)
        }
    }
}
)(jQuery);
(function(c) {
    var b = andrea.grace;
    var d = b.managers.PopUpManager;
    andrea.blink.declare("andrea.grace.views.popUp.Loading");
    var a = b.views.popUp.Loading = function(f, e) {
        a.superclass.constructor.apply(this, arguments);
        this._classVisible = "grace-loading-visible";
        this._visibleAnimationDuration = 300;
        this._$spin = null ;
        this._spinner = null ;
        this._label = e;
        this._percent = 0;
        this._$label = null ;
        this._createChildren()
    }
    ;
    andrea.blink.extend(a, b.views.popUp.PopUpBase);
    a.prototype.open = function(e, f) {
        a.superclass.open.apply(this, arguments);
        if (this._label == null ) {
            this._$dom.width(90);
            this._$dom.height(90)
        } else {
            this._$dom.width(90);
            this._$dom.height(105);
            this._$label = c("<div/>").addClass("grace-loading-label").appendTo(this._$dom);
            this._validateLabel()
        }
        this._$spin.width(this._$dom.width());
        this._$spin.height(90);
        this._spinner = new Spinner({
            color: "#ffffff"
        });
        this._spinner.spin(this._$spin[0]);
        d.centerPopUp(this, e)
    }
    ;
    a.prototype.percent = function(e) {
        this._percent = e;
        this._validateLabel()
    }
    ;
    a.prototype._validateLabel = function() {
        var e = Math.min(99, Math.round(this._percent * 100)) + "%";
        if (this._label) {
            e = this._label + ": " + e
        }
        this._$label.text(e)
    }
    ;
    a.prototype._createChildren = function() {
        this._$dom.addClass("grace-loading");
        this._$spin = c("<div/>").addClass("grace-loading-spin").appendTo(this._$dom)
    }
}
)(jQuery);
(function(d) {
    var c = andrea.grace;
    var b = c.models.value.NullValue;
    andrea.blink.declare("andrea.grace.views.popUp.filter.dataProvider.TextValuesProxy");
    var a = c.views.popUp.filter.dataProvider.TextValuesProxy = function(f, e, g) {
        this.filter = f;
        this._dp = _.sortBy(e, function(h) {
            return h.caption()
        }
        );
        this._hasNull = g
    }
    ;
    a.prototype.checked = function(e, f) {
        if (arguments.length > 1) {
            if (f) {
                this.filter.addOption(e)
            } else {
                this.filter.removeOption(e)
            }
        } else {
            return this.filter.filter(e)
        }
    }
    ;
    a.prototype.length = function() {
        return this._dp.length
    }
    ;
    a.prototype.getItemAt = function(e) {
        return this._dp[e]
    }
    ;
    a.prototype.getCaption = function(e) {
        return e.caption()
    }
    ;
    a.prototype.getNullItem = function() {
        if (this._hasNull) {
            b.instance()
        } else {
            return null 
        }
    }
}
)(jQuery);
(function(d) {
    var c = andrea.grace;
    var a = c.models.value.NullValue;
    andrea.blink.declare("andrea.grace.views.popUp.filter.dataProvider.RangeValuesProxy");
    var b = c.views.popUp.filter.dataProvider.RangeValuesProxy = function(f, e, g) {
        this.filter = f;
        this.filter.optionValues(e);
        this._hasNull = g
    }
    ;
    b.prototype.from = function(e) {
        return this.filter.from.apply(this.filter, arguments)
    }
    ;
    b.prototype.to = function(e) {
        return this.filter.to.apply(this.filter, arguments)
    }
    ;
    b.prototype.min = function(e) {
        return this.filter.min.apply(this.filter, arguments)
    }
    ;
    b.prototype.max = function(e) {
        return this.filter.max.apply(this.filter, arguments)
    }
    ;
    b.prototype.getNullItem = function() {
        if (this._hasNull) {
            a.instance()
        } else {
            return null 
        }
    }
    ;
    b.prototype.getMinCaption = function(e) {
        return this.filter.fromQuantified(this.min()).caption()
    }
    ;
    b.prototype.getMaxCaption = function(e) {
        return this.filter.fromQuantified(this.max()).caption()
    }
}
)(jQuery);
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.filter.FilterEvent");
    var a = b.views.popUp.filter.FilterEvent = function(c, e, d) {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.blink.events.Event);
    a.ITEM_SELECTED = "itemSelected"
}
)();
(function(d) {
    var c = andrea.grace;
    var b = c.views.popUp.filter.FilterEvent;
    andrea.blink.declare("andrea.grace.views.popUp.filter.PopUpTextFilter");
    var a = c.views.popUp.filter.PopUpTextFilter = function(f, e) {
        a.superclass.constructor.apply(this, arguments);
        this._$dom.addClass("grace-text-filter");
        this._classVisible = "grace-text-filter-visible";
        this._dataProvider = e
    }
    ;
    andrea.blink.extend(a, c.views.popUp.HoverPopUpBase);
    a.create = function(e) {
        var f = new a(d("<div/>")[0],e);
        f._createChildren();
        return f
    }
    ;
    a.prototype._createChildren = function() {
        var l = this;
        var g = this._dataProvider;
        var j = d("<ul/>").appendTo(this._$dom);
        var h;
        var n;
        var q = function(s, t) {
            var w = d("<li/>");
            var v = _.uniqueId("checkbox_");
            var u = d('<input type="checkbox"/>').appendTo(w).attr({
                id: v,
                checked: s
            });
            var r = d("<label/>").appendTo(w).attr({
                "for": v
            }).addClass("grace-text-ellipsis");
            d("<span/>").appendTo(r).attr({
                usage: "icon"
            });
            d("<span/>").appendTo(r).text(t);
            w.on("change", function(z) {
                var A;
                w = d(this);
                var B = d('li[__all="false"]', j);
                var y = f(w);
                var x = w.attr("__all") === "true";
                if (x) {
                    for (h = 0; h < B.length; h++) {
                        w = B.eq(h);
                        A = w.data("__item");
                        l._dataProvider.checked(A, y);
                        d("input", w).attr("checked", y)
                    }
                } else {
                    A = w.data("__item");
                    if (A.notNull()) {
                        l._dataProvider.checked(A, y);
                        k()
                    }
                }
                l.dispatchEvent(new b(b.ITEM_SELECTED,l))
            }
            );
            return w
        }
        ;
        var f = function(r) {
            return d("input", r).attr("checked") === "checked"
        }
        ;
        var k = function() {
            var t = d('li[__all="false"]', j);
            var r = true;
            for (h = 0; h < t.length; h++) {
                var s = t.eq(h);
                r = r && f(s)
            }
            d("input", d('li[__all="true"]', j)).attr("checked", r)
        }
        ;
        var m;
        m = q(true, "");
        m.attr("__all", true).appendTo(j);
        d("<div/>").appendTo(j);
        var p = d("<ul/>").appendTo(d("<li/>").appendTo(j).addClass("grace-text-filter-li-ascontainer")).addClass("fancy-scrollbar");
        for (h = 0; h < g.length(); h++) {
            n = g.getItemAt(h);
            m = q(g.checked(n), g.getCaption(n));
            m.attr("__all", false).data("__item", n);
            m.appendTo(p)
        }
        var e = g.getNullItem();
        if (e) {
            m = q(g.checked(e), g.getCaption(e));
            m.attr("__all", false).appendTo(j);
            d("<div/>").appendTo(j)
        }
        _.defer(function() {
            j.removeClass("grace-text-filter-animation");
            j.width(p.width());
            _.defer(function() {
                j.addClass("grace-text-filter-animation")
            }
            )
        }
        );
        k()
    }
}
)(jQuery);
(function(c) {
    var b = andrea.grace;
    var a = b.views.popUp.filter.FilterEvent;
    andrea.blink.declare("andrea.grace.views.popUp.filter.PopUpRangeFilter");
    var d = b.views.popUp.filter.PopUpRangeFilter = function(f, e) {
        d.superclass.constructor.apply(this, arguments);
        this._$dom.addClass("grace-range-filter");
        this._classVisible = "grace-range-filter-visible";
        this._dataProvider = e;
        this._itemSelectRequested = false
    }
    ;
    andrea.blink.extend(d, b.views.popUp.HoverPopUpBase);
    d.create = function(e) {
        var f = new d(c("<div/>")[0],e);
        f._createChildren();
        return f
    }
    ;
    d.prototype.close = function(e) {
        if (this._itemSelectRequested) {
            this.dispatchEvent(new a(a.ITEM_SELECTED,this))
        }
        d.superclass.close.apply(this, arguments)
    }
    ;
    d.prototype._createChildren = function() {
        var l = this;
        var k = this._dataProvider;
        var f = c("<div/>").addClass("grace-range-filter-label");
        f.appendTo(this._$dom);
        var j = c("<div/>").addClass("grace-range-filter-slider");
        var g = c("<div/>").slider({
            range: true,
            min: k.from(),
            max: k.to(),
            values: [k.min(), k.max()],
            slide: function(m, n) {
                k.min(n.values[0]);
                k.max(n.values[1]);
                e(true);
                h()
            }
        }).appendTo(j);
        j.appendTo(this._$dom);
        l._itemSelectRequested = false;
        var h = function() {
            if (!l._itemSelectRequested) {
                l._itemSelectRequested = true;
                _.delay(function() {
                    l._itemSelectRequested = false;
                    l.dispatchEvent(new a(a.ITEM_SELECTED,l))
                }
                , 300)
            }
        }
        ;
        var e = function() {
            f.text([k.getMinCaption(), k.getMaxCaption()].join(" - "))
        }
        ;
        e(false)
    }
}
)(jQuery);
(function(c) {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.menu.dataProvider.OperationGroupProxy");
    var a = b.views.popUp.menu.dataProvider.OperationGroupProxy = function(d) {
        this._operationGroups = d
    }
    ;
    a.prototype.length = function() {
        return this._operationGroups.length
    }
    ;
    a.prototype.groupLength = function(d) {
        return this._operationGroups[d].operations().length
    }
    ;
    a.prototype.getItem = function(e, d) {
        return this._operationGroups[e].operations()[d]
    }
}
)(jQuery);
(function(c) {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.menu.dataProvider.AnalysesProxy");
    var a = b.views.popUp.menu.dataProvider.AnalysesProxy = function(d) {
        this._analyses = d
    }
    ;
    a.prototype.length = function() {
        return 1
    }
    ;
    a.prototype.groupLength = function(d) {
        if (d === 0) {
            return this._analyses.length
        } else {
            return 0
        }
    }
    ;
    a.prototype.getItem = function(e, d) {
        if (e === 0) {
            return this._analyses[d]
        } else {
            return null 
        }
    }
}
)(jQuery);
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.menu.MenuEvent");
    var b = a.views.popUp.menu.MenuEvent = function(c, e, d) {
        b.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(b, andrea.blink.events.Event);
    b.ITEM_SELECTED = "itemSelected"
}
)();
(function(c) {
    var b = andrea.grace;
    var d = b.views.popUp.menu.MenuEvent;
    andrea.blink.declare("andrea.grace.views.popUp.menu.PopUpMenu");
    var a = b.views.popUp.menu.PopUpMenu = function(e) {
        a.superclass.constructor.apply(this, arguments);
        this._$dom.addClass("grace-menu");
        this._classVisible = "grace-menu-visible";
        this._dataProvider = null 
    }
    ;
    andrea.blink.extend(a, b.views.popUp.HoverPopUpBase);
    a.create = function(e) {
        var f = new a(c("<div/>"));
        f._createChildren(e);
        return f
    }
    ;
    a.prototype._createChildren = function(e) {
        this._dataProvider = e;
        this._createMenu(this._dataProvider, c(this._dom))
    }
    ;
    a.prototype._createMenu = function(g, q) {
        var m = this;
        var n = function(j) {
            p = c(j.currentTarget);
            m.dispatchEvent(new d(d.ITEM_SELECTED,m,{
                item: p.data("__item")
            }));
            m.close()
        }
        ;
        var l = c("<ul/>").appendTo(q);
        var k, h;
        var e;
        for (k = 0; k < g.length(); k++) {
            if (k !== 0) {
                c("<div/>").appendTo(l)
            }
            for (h = 0; h < g.groupLength(k); h++) {
                var p = c("<li/>").appendTo(l);
                var f = c("<a/>").appendTo(p);
                e = g.getItem(k, h);
                p.data({
                    __item: e
                }).click(n);
                f.text(e.name)
            }
        }
    }
}
)(jQuery);
(function(f) {
    var z = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.supportClasses.ShelfBase");
    var h = z.models.DataDiscoveryModel;
    var E = z.constants.ValueType;
    var n = z.models.value.NumberValue;
    var F = z.models.value.DateValue;
    var l = andrea.grace.constants.AnalysisType;
    var D = z.views.analysisContainer.events.ShelfEvent;
    var j = z.models.vo.Analysis;
    var q = z.constants.ShelfType;
    var p = z.views.popUp.menu.PopUpMenu;
    var A = z.views.popUp.menu.dataProvider.OperationGroupProxy;
    var w = z.views.popUp.menu.dataProvider.AnalysesProxy;
    var m = z.views.popUp.PopUpEvent;
    var u = z.operation.OperationFactory;
    var e = z.views.popUp.menu.MenuEvent;
    var c = z.operation.OperationGroup;
    var b = z.operation.OperationClassification;
    var s = z.operation.OperationPriorityBaseline;
    var a = z.operation.OperationType;
    var r = z.models.value.supportClasses.QuantifiedHelper;
    var k = z.filter.TextFilter;
    var v = z.utils.FilterUtil;
    var y = z.views.popUp.filter.dataProvider.TextValuesProxy;
    var d = z.views.popUp.filter.PopUpTextFilter;
    var C = z.filter.RangeFilter;
    var B = z.views.popUp.filter.dataProvider.RangeValuesProxy;
    var g = z.views.popUp.filter.PopUpRangeFilter;
    var x = z.views.popUp.filter.FilterEvent;
    var t = z.views.analysisContainer.supportClasses.ShelfBase = function(I) {
        t.superclass.constructor.apply(this, arguments);
        var J = this;
        this._$ph = f("<div/>").addClass("grace-analysis-card_placeholder");
        this._popUpMenu = null ;
        this._popUpFilter = null ;
        this._trashMenu = null ;
        this._type = null ;
        this._layout = null ;
        this._initialization();
        this.helperGetAnalysis = null ;
        f(this._dom).css({}).addClass("grace-analysis-contaier");
        this._$trashBin = null ;
        this._$cards = null ;
        var H;
        H = f(this._dom);
        H = f("<div/>").appendTo(H).addClass("grace-analysis-titleArea grace-analysis-clearfix");
        H = f("<div/>").appendTo(H).addClass("grace-analysis-title");
        f("<h2/>").appendTo(H).addClass("grace-analysis-title-text");
        if (q.src(this._type)) {
            this._$trashBin = f("<span/>").appendTo(H).attr("title", "");
            this._$trashBin.addClass(["grace-analysis-operation", "grace-analysis-title-operation", "grace-analysis-title-operation-recycleBin"].join(" "))
        }
        H = f(this._dom);
        H = f("<div/>").appendTo(H).addClass("grace-analysis-cardArea");
        var G = this._$cards = f("<div/>").appendTo(H).addClass("grace-analysis-cards fancy-scrollbar");
        if (this._layout === "horizontal") {
            G.addClass("grace-analysis-cards-horizontal")
        }
        if (J._layout === "vertical") {
            f("<div/>").appendTo(H).addClass("grace-analysis-cardArea-gradientTop");
            f("<div/>").appendTo(H).addClass("grace-analysis-cardArea-gradientBottom")
        }
        f(this._dom).droppable({
            tolerance: "pointer",
            accept: function(L) {
                var N = L.attr("__shelfType");
                var M = J._type;
                var K = J.helperGetAnalysis(L.attr("__analysisID"));
                if (q.src(M)) {
                    if (M === q.SRC_MEA) {
                        if (q.src(N) && K.valueType() === E.NUMBER) {
                            return true
                        }
                    } else {
                        if (q.src(N)) {
                            return true
                        }
                    }
                } else {
                    if (q.des(M)) {
                        if (M === q.DES_DIM) {
                            if (K.analysisType === l.DIMENSION) {
                                return true
                            }
                        } else {
                            return true
                        }
                    } else {
                        if (q.proc(M)) {
                            return true
                        }
                    }
                }
                return false
            },
            activate: function(L) {
                var K = f(L.currentTarget);
                var N = K.attr("__shelfType");
                var M = J._type;
                if (N !== M) {
                    f(this).addClass("grace-analysis-contaier_dropAcceptable")
                }
            },
            deactivate: function(K) {
                f(this).removeClass("grace-analysis-contaier_dropAcceptable");
                J._$ph.detach()
            },
            drop: function(L, M) {
                var O = M.helper.attr("__shelfType");
                var N = J._type;
                J._$ph.detach();
                M.helper.attr("__toContainerType", N);
                var K = null ;
                if (O === N) {
                    K = M.helper.attr("__shelvedAnalysisID")
                }
                J.dispatchEvent(new D(D.HELPER_DROPPED,J,{
                    analysisID: M.helper.attr("__analysisID"),
                    "$helper": M.helper,
                    from: O,
                    to: N
                }));
                J.dispatchEvent(new D(D.CARD_SHELVED,J,{
                    shelvedContexts: J.getShelvedContexts()
                }))
            },
            over: function(L, M) {
                M.helper.attr("__overContainerType", J._type);
                J._$ph.attr("__toIndex", "");
                var K = J._$cards;
                J._$ph.appendTo(K).css({
                    width: M.helper.outerWidth() + "px",
                    height: M.helper.outerHeight() + "px"
                });
                if (J._layout === "horizontal") {
                    J._$ph.addClass("grace-analysis-card_horizontal")
                }
                M.helper.on("event-drag", function() {
                    var O = [];
                    var R = -1;
                    J._traversalCards(function(T) {
                        var U = f(this);
                        if (U.attr("__dragging") === "true") {
                            R = O.length
                        }
                        O.push({
                            top: U.offset().top,
                            left: U.offset().left
                        })
                    }
                    , true, false);
                    var S;
                    if (J._layout === "vertical") {
                        S = "top"
                    } else {
                        if (J._layout === "horizontal") {
                            S = "left"
                        }
                    }
                    var Q = M.helper.offset()[S];
                    for (i = -1; i < O.length; i++) {
                        var P = i < 0 ? Number.MIN_VALUE : O[i][S];
                        var N = i === O.length - 1 ? Number.MAX_VALUE : O[i + 1][S];
                        if (Q > P && Q <= N) {
                            if (J._$ph.attr("__toIndex") !== i + 1 + "") {
                                J._$ph.detach();
                                J._$ph.attr("__toIndex", i + 1);
                                if (R === -1 || (R !== i + 1 && R !== i)) {
                                    K.appendAt(J._$ph, i + 1)
                                }
                            }
                            break
                        }
                    }
                }
                ).removeClass("grace-analysis-card_draggingHelper_noDrop").addClass("grace-analysis-card_draggingHelper_grabbing")
            },
            out: function(K, L) {
                var M = L.helper.attr("__overContainerType");
                if (J._type === M) {
                    L.helper.off("event-drag").addClass("grace-analysis-card_draggingHelper_noDrop").removeClass("grace-analysis-card_draggingHelper_grabbing")
                }
                J._$ph.detach()
            }
        })
    }
    ;
    andrea.blink.extend(t, andrea.blink.mvc.View);
    t.OPERATION_DISPLAY_SPLITTER = " | ";
    t.prototype.getShelvedContexts = function() {
        var G = [];
        this._traversalCards(function(I) {
            var J = f(this);
            var H = {
                analysisID: J.attr("__analysisID"),
                shelvedAnalysisID: J.attr("__shelvedAnalysisID"),
                operationGroup: new c(JSON.parse(J.attr("__operationIDs"))),
                filter: J.data("__filter")
            };
            G.push(H)
        }
        , true, true);
        return G
    }
    ;
    t.prototype._traversalCards = function(N, K, O) {
        var G = this._$cards;
        var I = G.children();
        var M = 0;
        for (var L = 0; L < I.length; L++) {
            var J = I[L];
            var H = f(J);
            if (K && J === this._$ph[0]) {
                continue
            }
            if (O && H.attr("__dragging") === "true") {
                continue
            }
            N.call(J, M);
            M++
        }
    }
    ;
    t.prototype._setTitle = function(H) {
        var G = f(this._dom).find("h2");
        G.text(H)
    }
    ;
    t.prototype._setRequired = function(H) {
        var G = f(this._dom).find("h2");
        if (H) {
            G.addClass("grace-analysis-title-text_required")
        } else {
            G.removeClass("grace-analysis-title-text_required")
        }
    }
    ;
    t.prototype.addSuffix = function(H) {
        var G = f(this._dom).find("h2");
        if (H) {
            G.addClass("grace-analysis-title-text_suffix").attr({
                __suffix: H
            })
        } else {
            G.removeClass("grace-analysis-title-text_suffix")
        }
    }
    ;
    t.prototype.type = function(G) {
        if (arguments.length > 0) {
            this._type = G
        } else {
            return this._type
        }
    }
    ;
    t.prototype.dropAnalysis = function(G, J, M, L) {
        var H, I;
        if (M === L) {
            H = J.attr("__shelvedAnalysisID")
        }
        if (J.attr("__operationIDs") && J.attr("__shelfType") === this._type) {
            I = JSON.parse(J.attr("__operationIDs"))
        }
        var K = this._addCardAt(G, parseInt(this._$ph.attr("__toIndex")), H, I)
    }
    ;
    t.prototype.addCard = function(H, G) {
        var I, K;
        if (G) {
            I = G.id
        }
        if (G && G.operationGroup) {
            K = G.operationGroup.mapIDs()
        }
        var J;
        if (G && G.filter) {
            J = G.filter
        }
        return this._addCardAt(H, -1, I, K, J)
    }
    ;
    t.prototype._getOperationInfo = function() {
        return {
            availableOGs: [],
            defaultTypes: []
        }
    }
    ;
    t.prototype._addCardAt = function(Z, K, aa, N, O) {
        var T = this;
        var X = this._$cards;
        var J = f("<div/>").addClass(["grace-analysis-card", "grace-analysis-card-transition"].join(" "));
        if (this._layout === "horizontal") {
            J.addClass("grace-analysis-card_horizontal")
        }
        J.width("");
        X.appendAt(J, K);
        var aa;
        if (!aa) {
            aa = _.uniqueId("shelvedAnalysisID_")
        }
        J.data({
            __analysis: Z
        });
        J.attr({
            __analysisID: Z.id,
            __shelvedAnalysisID: aa,
            __shelfType: this._type
        });
        var W = f("<div/>").appendTo(J).addClass("grace-analysis-card-text grace-text-ellipsis").text(Z.name);
        W.on("mouseenter", function() {
            var ab = f(this);
            if (this.offsetWidth < this.scrollWidth && !J.attr("title")) {
                J.attr("title", ab.text())
            }
        }
        ).on("mouseleave", function() {
            J.attr("title", "")
        }
        );
        var Y = this._getOperationInfo(Z);
        var V = Y.availableOGs;
        var Q = Y.defaultTypes;
        var M = function(ab) {
            return false
        }
        ;
        var U = function(ad, ab, ae, ac) {
            var af = f("<span/>").appendTo(J);
            af.addClass(["grace-analysis-operation", "grace-analysis-card-operation"].join(" "));
            af.addClass(["grace-analysis-card-operation-" + ad, "grace-analysis-card-operation-" + ab].join(" "));
            if (ae) {
                af.attr("title", ae)
            }
            af.on("click", function(ag) {
                if (ac && ac.click) {
                    ac.click(ag)
                }
            }
            ).on("mouseenter", function(ag) {
                if (ac && ac.mouseenter) {
                    ac.mouseenter(ag)
                }
            }
            ).on("mousedown", function(ag) {
                ag.stopPropagation()
            }
            );
            return af
        }
        ;
        var R = function() {
            return U("remove", 1, "", {
                click: function() {
                    T._hide(J, function() {
                        J.detach();
                        T.dispatchEvent(new D(D.CARD_SHELVED,T))
                    }
                    )
                }
            })
        }
        ;
        var S;
        if (q.proc(this._type)) {
            R();
            if (O) {
                J.data("__filter", O)
            } else {
                var I = this._model().dataProvider.getCValues(Z.index, true, false);
                var L = this._model().dataProvider.isCHasNull(Z.index);
                if (Z.quantifiable) {
                    if (Z.valueType() === E.DATE) {
                        J.data("__filter", new C(I,L,r.TYPE_DATE))
                    } else {
                        if (Z.valueType() === E.NUMBER) {
                            J.data("__filter", new C(I,L,r.TYPE_NUMBER))
                        }
                    }
                } else {
                    J.data("__filter", new k(I,L))
                }
            }
            S = U("filter", 2, "", {
                mouseenter: function(ab) {
                    T._createPopUpFilter(Z, J, S)
                }
            })
        } else {
            if (q.des(this._type)) {
                R();
                if (V && V.length > 0) {
                    S = U("dropDown", 2, "", {
                        mouseenter: function(ab) {
                            T._createPopUpMenu(V, Z, J, S)
                        }
                    })
                }
            } else {
                if (q.src(this._type)) {
                    var P = f.proxy(function(ac, ab) {
                        if (!ab) {
                            if (this._type === q.SRC_DIM) {
                                ab = q.DES_DIM
                            } else {
                                if (this._type === q.SRC_MEA) {
                                    ab = q.DES_VALUE
                                }
                            }
                        }
                        this.dispatchEvent(new D(D.CARD_COPIED,this,{
                            analysis: J.data("__analysis"),
                            pasteTo: ab
                        }))
                    }
                    , this);
                    S = U("addToAnalysis", 1, "", {
                        click: P
                    });
                    J.on("dblclick", P);
                    S = U("addToFilter", 2, "", {
                        click: function(ab) {
                            P(ab, q.PROC_FILTER)
                        }
                    });
                    var H = f.proxy(function() {
                        this._addToTrash(J)
                    }
                    , this);
                    S = U("moveToTrash", 3, "", {
                        click: H
                    })
                }
            }
        }
        if (!N || N.length === 0) {
            N = c.createByTypes(Q).mapIDs()
        }
        if (!N) {
            N = []
        }
        this._setOperations(N, J);
        if (q.src(this._type)) {
            if (this._type === q.SRC_DIM) {
                Z.analysisType = l.DIMENSION
            } else {
                if (this._type === q.SRC_MEA) {
                    Z.analysisType = l.MEASURE
                }
            }
        }
        if (q.dim(this._type) && q.src(this._type)) {
            var G;
            if (Z.valueType() === E.DATE) {
                G = "\uf073"
            } else {
                if (Z.numUniqueValue !== null ) {
                    G = Z.numUniqueValue
                }
            }
            if (G) {
                W.addClass("grace-analysis-card-text_suffix").attr({
                    __suffix: G
                })
            }
        }
        J.addClass("grace-analysis-card_asSource");
        if (Z.analysisType === l.DIMENSION) {
            J.addClass("grace-analysis-card_asDimension")
        } else {
            if (Z.analysisType === l.MEASURE) {
                J.addClass("grace-analysis-card_asMeasure")
            }
        }
        J.draggable({
            containment: f("#divDataDiscovery"),
            helper: function(ab) {
                var ac = f(this).clone();
                ac.width(f(this).width()).addClass("grace-analysis-card_draggingHelper");
                ac.removeClass("grace-analysis-card_asSource grace-analysis-card_asDimension grace-analysis-card_asMeasure");
                ac.removeClass("grace-analysis-card-transition");
                ac.appendTo(f("body"));
                return ac
            },
            start: function(ab, ac) {
                f(this).addClass("grace-analysis-card_disabled").attr({
                    __dragging: "true"
                });
                ac.helper.addClass("grace-analysis-card_draggingHelper_grabbing")
            },
            stop: function(ab, ac) {
                f(this).removeClass("grace-analysis-card_disabled").attr({
                    __dragging: "false"
                });
                ac.helper.removeClass("grace-analysis-card_draggingHelper_grabbing");
                var ae = ac.helper.attr("__shelfType");
                var ad = ac.helper.attr("__toContainerType");
                if (ad) {
                    if (q.like(ae, ad)) {
                        f(this).detach()
                    } else {
                        if (q.des(ae) && q.proc(ad)) {
                            f(this).detach()
                        } else {
                            if (q.proc(ae) && q.des(ad)) {
                                f(this).detach()
                            }
                        }
                    }
                } else {
                    if (q.des(ae)) {
                        f(this).detach()
                    }
                }
                ac.helper.off("event-drag");
                T.dispatchEvent(new D(D.CARD_SHELVED,T,{
                    shelvedContexts: T.getShelvedContexts()
                }))
            },
            drag: function(ab, ac) {
                ac.helper.trigger("event-drag")
            }
        });
        if (this._animationActivated) {
            J.width(J.width());
            this._show(J)
        }
        return J
    }
    ;
    t.prototype._addOperation = function(G, J) {
        var I = u.produce(G, s.USER_SPECIFICATION);
        var H = new c(JSON.parse(J.attr("__operationIDs")));
        H.addOperation(I.id);
        this._setOperations(H.mapIDs(), J)
    }
    ;
    t.prototype._setOperations = function(M, N) {
        var H = N.find(".grace-analysis-card-text");
        var L = JSON.stringify(M);
        if (L) {
            var I = N.attr("__operationIDs");
            if (!I) {
                N.attr({
                    __operationIDs: L
                })
            } else {
                if (I !== L) {
                    N.attr({
                        __shelvedAnalysisID: _.uniqueId("shelvedAnalysisID_"),
                        __operationIDs: L
                    })
                }
            }
            var K = new c(M);
            var J = K.mapAbbrs();
            J = _.without(J, "");
            var G = J.join(t.OPERATION_DISPLAY_SPLITTER);
            if (G && q.des(this._type)) {
                H.addClass("grace-analysis-card-text_prefix").attr({
                    __prefix: G
                })
            } else {
                H.removeClass("grace-analysis-card-text_prefix")
            }
        } else {
            N.removeAttr("__operationIDs");
            H.removeClass("grace-analysis-card-text_prefix")
        }
    }
    ;
    t.prototype._model = function() {
        return h.instance()
    }
    ;
    t.prototype._createPopUpFilter = function(P, H, I) {
        if (this._popUpFilter) {
            if (this._popUpFilter.$dock() === I) {
                return
            } else {
                this._popUpFilter.closeImmediately()
            }
        }
        var N = this;
        this._showOperation(true, H, I);
        H.find(".grace-analysis-card-text").addClass("grace-analysis-card-text-shrink");
        var L = this._model();
        var J = [];
        var M = this.getShelvedContexts();
        _.each(M, function(S) {
            var R = L.getShelvedAnalysis(S.shelvedAnalysisID);
            if (R.id !== H.attr("__shelvedAnalysisID")) {
                J.push(R)
            }
        }
        );
        var K = v.filter(L.dataProvider, J);
        var Q = K.getCValues(P.index, true, true);
        var G = K.isCHasNull(P.index);
        if (P.quantifiable) {
            this._popUpFilter = g.create(new B(H.data("__filter"),Q,G))
        } else {
            this._popUpFilter = d.create(new y(H.data("__filter"),Q,G))
        }
        var O = false;
        this._popUpFilter.addEventListener(x.ITEM_SELECTED, function(R) {
            N.dispatchEvent(new D(D.CARD_SHELVED,N))
        }
        );
        this._popUpFilter.addEventListener(m.POPUP_CLOSED, function(R) {
            this._showOperation(false, H, I);
            H.find(".grace-analysis-card-text").removeClass("grace-analysis-card-text-shrink");
            N._popUpFilter.removeAllEventListeners();
            N._popUpFilter = null 
        }
        , this);
        this._popUpFilter.open(I)
    }
    ;
    t.prototype._showOperation = function(G, I, H) {
        if (G) {
            I.find(".grace-analysis-card-text").addClass("grace-analysis-card-text-shrink");
            H.addClass("grace-analysis-card-operation-show")
        } else {
            I.find(".grace-analysis-card-text").removeClass("grace-analysis-card-text-shrink");
            H.removeClass("grace-analysis-card-operation-show")
        }
    }
    ;
    t.prototype._createPopUpMenu = function(G, H, K, J) {
        if (this._popUpMenu) {
            return
        }
        var I = this;
        this._showOperation(true, K, J);
        this._popUpMenu = p.create(new A(G));
        this._popUpMenu.addEventListener(e.ITEM_SELECTED, function(M) {
            var L = M.data.item;
            I._addOperation(L.type, K);
            I.dispatchEvent(new D(D.CARD_SHELVED,I))
        }
        );
        this._popUpMenu.addEventListener(m.POPUP_CLOSED, function(L) {
            this._showOperation(false, K, J);
            I._popUpMenu.removeAllEventListeners();
            I._popUpMenu = null 
        }
        , this);
        this._popUpMenu.open(J)
    }
    ;
    t.prototype.updateShelvedAnalyses = function(H) {
        var I = this;
        var G = 0;
        this._traversalCards(function(K) {
            var L = f(this);
            var J = H(L.attr("__shelvedAnalysisID"));
            if (J && J.visualized) {
                G++
            }
        }
        , true, true);
        this._traversalCards(function(K) {
            var L = f(this);
            var J = H(L.attr("__shelvedAnalysisID"));
            if (J) {
                if (G > 0 && !J.visualized) {
                    L.addClass("grace-analysis-card_disabled")
                } else {
                    L.removeClass("grace-analysis-card_disabled")
                }
                I._setOperations(J.operationGroup.mapIDs(), L)
            }
        }
        , true, true)
    }
    ;
    t.prototype._addToTrash = function(K) {
        var G = K.data("__analysis");
        var H = this._$cards.data("__trash") || [];
        if (H.length === 0) {
            var J = this._$trashBin;
            var I = f.proxy(function(L) {
                if (L.type === "mouseenter" && !this._trashMenu) {
                    var M = this._trashMenu = p.create(new w(this._$cards.data("__trash")));
                    M.addEventListener(e.ITEM_SELECTED, function(N) {
                        this._removeFromTrash(N.data.item)
                    }
                    , this);
                    M.addEventListener(m.POPUP_CLOSED, function(N) {
                        M.removeAllEventListeners();
                        this._trashMenu = null 
                    }
                    , this);
                    M.open(J)
                }
            }
            , this);
            this._show(J).on("hover", I)
        }
        H.push(G);
        this._$cards.data("__trash", H);
        this._hide(K, f.proxy(function() {
            K.detach()
        }
        , this))
    }
    ;
    t.prototype._removeFromTrash = function(G) {
        var H = this._$cards.data("__trash") || [];
        H = _.without(H, G);
        if (H.length === 0) {
            this._hide(this._$trashBin).off("hover")
        }
        this._$cards.data("__trash", H);
        this._addCardAt(G, 0)
    }
    ;
    t.prototype._hide = function(G, H) {
        G.width(G.width());
        if (f(":visible", G).length > 0) {
            return G.show(0).hide("explode", {
                easing: "easeOutSine"
            }, 180, H)
        } else {
            return G.hide()
        }
    }
    ;
    t.prototype._show = function(G, H) {
        if (f(":visible", G).length > 0) {
            return G.hide(0).show("explode", {
                easing: "easeInSine"
            }, 300, H)
        } else {
            return G.show()
        }
    }
    ;
    t.prototype.removeAll = function() {
        this._$cards.empty()
    }
    ;
    t.prototype._validateSize = function() {
        var G = this.size();
        var H = G.height - 36;
        this._$cards.css({
            "max-height": H + "px",
            height: H + "px"
        })
    }
}
)(jQuery);
(function(d) {
    var c = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.supportClasses.ShelfBaseMediator");
    var a = c.constants.AppConst;
    var f = c.views.analysisContainer.events.ShelfEvent;
    var b = c.views.popUp.VizNavigatorEvent;
    var e = c.views.analysisContainer.supportClasses.ShelfBaseMediator = function(g) {
        e.superclass.constructor.apply(this, arguments);
        this._view = g;
        this._model = null 
    }
    ;
    andrea.blink.extend(e, andrea.blink.mvc.ViewMediator);
    e.prototype.init = function() {
        var h = this;
        this._model = this._getModel(a.MODEL_GRACE);
        this._view.helperGetAnalysis = function(j) {
            return h._model.getAnalysis(j)
        }
        ;
        var g = function() {
            h._action(a.ACTION_RUN_ANALYSIS, {
                shelfType: h._view.type(),
                shelvedContexts: h._view.getShelvedContexts()
            })
        }
        ;
        this._view.addEventListener(f.CARD_SHELVED, function(j) {
            g()
        }
        , this);
        this._view.addEventListener(f.HELPER_DROPPED, function(k) {
            var j = h._model.getAnalysis(k.data.analysisID);
            h._view.dropAnalysis(j, k.data.$helper, k.data.from, k.data.to)
        }
        );
        this._view.addEventListener(f.CARD_COPIED, function(j) {
            h._model.hackNotify(a.NOTIFICATION_VIEW_PASTE_TO, {
                analysis: j.data.analysis,
                targetShelfType: j.data.pasteTo
            })
        }
        );
        this._subscribe(a.NOTIFICATION_VIEW_PASTE_TO, function(j) {
            if (h._view.type() === j.data.targetShelfType) {
                h._view.addCard(j.data.analysis)
            }
            g()
        }
        );
        this._subscribe(a.NOTIFICATION_DATA_PROVIDER_CHANGED, function(j) {
            h._dataProviderChangedHandler(j)
        }
        );
        this._subscribe(a.NOTIFICATION_VIZ_CONTEXT_APPLIED, function(j) {
            h._view.updateShelvedAnalyses(function(k) {
                return h._model.getShelvedAnalysis(k)
            }
            )
        }
        );
        this._subscribe(a.NOTIFICATION_VIZ_CONTEXT_RESET, function(k) {
            var j = h._modelAnalyses();
            if (j && j.length) {
                _.each(j, function(l) {
                    h._view.addCard(l.source, l)
                }
                );
                h._view.updateShelvedAnalyses(function(l) {
                    return h._model.getShelvedAnalysis(l)
                }
                )
            }
        }
        )
    }
    ;
    e.prototype._modelAnalyses = function() {
        return []
    }
    ;
    e.prototype._dataProviderChangedHandler = function(g) {
        this._view.removeAll()
    }
}
)(jQuery);
(function() {
    var e = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.source.SrcDimensionShelf");
    var a = e.constants.AnalysisType;
    var b = e.constants.ShelfType;
    var g = e.operation.OperationClassification;
    var d = e.operation.OperationType;
    var f = e.operation.OperationGroup;
    var c = e.views.analysisContainer.source.SrcDimensionShelf = function(h) {
        c.superclass.constructor.apply(this, arguments);
        this._setTitle("");
        $(this._dom).css({})
    }
    ;
    andrea.blink.extend(c, e.views.analysisContainer.supportClasses.ShelfBase);
    c.prototype._initialization = function() {
        this._type = b.SRC_DIM;
        this._layout = "vertical"
    }
}
)();
(function(d) {
    var c = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.source.SrcDimensionShelfMediator");
    var b = c.constants.AppConst;
    var a = andrea.grace.constants.AnalysisType;
    var e = c.views.analysisContainer.source.SrcDimensionShelfMediator = function() {
        e.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(e, c.views.analysisContainer.supportClasses.ShelfBaseMediator);
    e.prototype.init = function() {
        e.superclass.init.apply(this, arguments)
    }
    ;
    e.prototype._dataProviderChangedHandler = function() {
        e.superclass._dataProviderChangedHandler.apply(this, arguments);
        this._view.deactivateAnimation();
        var g = this._getModel(b.MODEL_GRACE);
        for (var h = 0; h < g.analyses.length; h++) {
            var f = g.analyses[h];
            if (f.analysisType === a.DIMENSION) {
                this._view.addCard(f)
            }
        }
        this._view.activateAnimation()
    }
}
)(jQuery);
(function() {
    var d = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.source.SrcMeasureShelf");
    var a = d.constants.AnalysisType;
    var b = d.constants.ShelfType;
    var g = d.operation.OperationClassification;
    var c = d.operation.OperationType;
    var f = d.operation.OperationGroup;
    var e = d.views.analysisContainer.source.SrcMeasureShelf = function(h) {
        e.superclass.constructor.apply(this, arguments);
        this._setTitle("")
    }
    ;
    andrea.blink.extend(e, d.views.analysisContainer.supportClasses.ShelfBase);
    e.prototype._initialization = function() {
        this._type = b.SRC_MEA;
        this._layout = "vertical"
    }
}
)();
(function(e) {
    var d = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.source.SrcMeasureShelfMediator");
    var b = d.constants.AppConst;
    var a = andrea.grace.constants.AnalysisType;
    var c = d.views.analysisContainer.source.SrcMeasureShelfMediator = function() {
        c.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(c, d.views.analysisContainer.supportClasses.ShelfBaseMediator);
    c.prototype.init = function() {
        c.superclass.init.apply(this, arguments)
    }
    ;
    c.prototype._dataProviderChangedHandler = function() {
        c.superclass._dataProviderChangedHandler.apply(this, arguments);
        this._view.deactivateAnimation();
        var g = this._getModel(b.MODEL_GRACE);
        this._view.addSuffix(g.dataProvider.numRows);
        for (var h = 0; h < g.analyses.length; h++) {
            var f = g.analyses[h];
            if (f.analysisType === a.MEASURE) {
                this._view.addCard(f)
            }
        }
        this._view.activateAnimation()
    }
}
)(jQuery);
(function() {
    var g = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.destination.DesDimensionShelf");
    var d = g.constants.AnalysisType;
    var f = g.constants.ValueType;
    var b = g.constants.ShelfType;
    var a = g.operation.OperationType;
    var k = g.operation.OperationGroup;
    var j = g.operation.OperationClassification;
    var l = a;
    var e = k;
    var h = j;
    var c = g.views.analysisContainer.destination.DesDimensionShelf = function(m) {
        c.superclass.constructor.apply(this, arguments);
        this._setTitle("");
        this._setRequired(true)
    }
    ;
    andrea.blink.extend(c, g.views.analysisContainer.supportClasses.ShelfBase);
    c.prototype._initialization = function() {
        this._type = b.DES_DIM;
        this._layout = "horizontal"
    }
    ;
    c.prototype._getOperationInfo = function(n) {
        var m;
        var p;
        if (n.valueType() === f.DATE) {
            m = c.OGS_DATE;
            p = [l.SORT_ASCEND];
            if (n.dateSpan < 86400000 * (365 / 2 + 1)) {
                p.push(l.DRILL_DATE)
            } else {
                if (n.dateSpan < 86400000 * (365 * 1)) {
                    p.push(l.DRILL_WEEK)
                } else {
                    if (n.dateSpan < 86400000 * (365 * 5)) {
                        p.push(l.DRILL_MONTH)
                    } else {
                        p.push(l.DRILL_YEAR)
                    }
                }
            }
        } else {
            m = c.OGS_DEFAULT;
            p = [l.SORT_NONE]
        }
        return {
            availableOGs: m,
            defaultTypes: p
        }
    }
    ;
    c.OGS_DATE = null ;
    c.OGS_DEFAULT = null ;
    c._loadClass = function() {
        var m;
        m = [];
        m.push(e.createByTypes([l.SORT_ASCEND, l.SORT_DESCEND]));
        m.push(e.createByClassification(h.DRILL));
        m.push(e.createByClassification(h.GROUP));
        c.OGS_DATE = m;
        m = [];
        m.push(e.createByTypes([l.SORT_NONE, l.SORT_ALPHABET_ASCEND, l.SORT_ALPHABET_DESCEND]));
        c.OGS_DEFAULT = m
    }
    ;
    c._loadClass()
}
)();
(function(d) {
    var c = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.destination.DesDimensionShelfMediator");
    var a = c.constants.AppConst;
    var b = c.views.analysisContainer.destination.DesDimensionShelfMediator = function() {
        b.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(b, c.views.analysisContainer.supportClasses.ShelfBaseMediator);
    b.prototype.init = function() {
        b.superclass.init.apply(this, arguments)
    }
    ;
    b.prototype._modelAnalyses = function() {
        return this._model.analysisDimesions()
    }
}
)(jQuery);
(function() {
    var e = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.destination.DesMeasureShelf");
    var c = e.constants.AnalysisType;
    var b = e.constants.ShelfType;
    var a = e.operation.OperationType;
    var j = e.operation.OperationGroup;
    var h = e.operation.OperationClassification;
    var g = e.operation.OperationFactory;
    var l = a;
    var d = j;
    var f = h;
    var k = e.views.analysisContainer.destination.DesMeasureShelf = function(m) {
        k.superclass.constructor.apply(this, arguments);
        this._setTitle("");
        this._setRequired(true)
    }
    ;
    andrea.blink.extend(k, e.views.analysisContainer.supportClasses.ShelfBase);
    k.prototype._initialization = function() {
        this._type = b.DES_VALUE;
        this._layout = "horizontal"
    }
    ;
    k.prototype._getOperationInfo = function(n) {
        var m;
        var p;
        if (n.analysisType === c.DIMENSION) {
            m = k.OGS_DIMENSION;
            p = [l.CALC_COUNT]
        } else {
            if (n.analysisType === c.MEASURE) {
                m = k.OGS_MEASURE;
                p = [l.CALC_SUM]
            }
        }
        return {
            availableOGs: m,
            defaultTypes: p
        }
    }
    ;
    k.OGS_DIMENSION = null ;
    k.OGS_MEASURE = null ;
    k._loadClass = function() {
        var m;
        m = [];
        m.push(d.createByTypes([l.CALC_UNIQ_COUNT, l.CALC_COUNT]));
        m.push(d.createByTypes([l.SORT_NONE, l.SORT_ASCEND, l.SORT_DESCEND]));
        k.OGS_DIMENSION = m;
        m = [];
        m.push(d.createByTypes([l.CALC_SUM, l.CALC_AVG, l.CALC_MAX, l.CALC_MIN]));
        m.push(d.createByTypes([l.SORT_NONE, l.SORT_ASCEND, l.SORT_DESCEND]));
        k.OGS_MEASURE = m
    }
    ;
    k._loadClass()
}
)();
(function(d) {
    var c = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.destination.DesMeasureShelfMediator");
    var b = c.constants.AppConst;
    var a = c.views.analysisContainer.destination.DesMeasureShelfMediator = function() {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, c.views.analysisContainer.supportClasses.ShelfBaseMediator);
    a.prototype.init = function() {
        a.superclass.init.apply(this, arguments)
    }
    ;
    a.prototype._modelAnalyses = function() {
        return this._model.analysisDatas()
    }
}
)(jQuery);
(function() {
    var d = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.processor.FilterShelf");
    var a = d.constants.AnalysisType;
    var b = d.constants.ShelfType;
    var c = d.views.analysisContainer.processor.FilterShelf = function(e) {
        c.superclass.constructor.apply(this, arguments);
        this._setTitle("")
    }
    ;
    andrea.blink.extend(c, d.views.analysisContainer.supportClasses.ShelfBase);
    c.prototype._initialization = function() {
        this._type = b.PROC_FILTER;
        this._layout = "vertical"
    }
}
)();
(function(c) {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.processor.FilterShelfMediator");
    var a = b.constants.AppConst;
    var d = b.views.analysisContainer.processor.FilterShelfMediator = function() {
        d.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(d, b.views.analysisContainer.supportClasses.ShelfBaseMediator);
    d.prototype.init = function() {
        d.superclass.init.apply(this, arguments)
    }
    ;
    d.prototype._modelAnalyses = function() {
        return this._model.analysisFilters()
    }
}
)(jQuery);
(function(c) {
    var b = andrea.grace;
    var a = b.constants.VizType;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.VizFactory");
    var d = b.views.analysisResult.viz.VizFactory;
    d.produce = function(l, g, f) {
        var e;
        var j = b.views.analysisResult.viz.placeHolder;
        var k = b.views.analysisResult.viz.highCharts;
        var h = b.views.analysisResult.viz.googleCharts;
        if (g === a.SCATTER) {
            return new k.Scatter(l,"scatter",g)
        } else {
            if (g === a.BAR || g === a.STACKED_BAR) {
                return new k.BasicXY(l,"bar",g)
            } else {
                if (g === a.COLUMN || g === a.STACKED_COLUMN) {
                    return new k.BasicXY(l,"column",g)
                } else {
                    if (g === a.LINE || g === a.RADAR) {
                        return new k.BasicXY(l,"line",g)
                    } else {
                        if (g === a.AREA) {
                            return new k.BasicXY(l,"area",g)
                        } else {
                            if (g === a.PIE) {
                                return new k.Pie(l,"pie",g)
                            } else {
                                return new j.VizPH(l,f)
                            }
                        }
                    }
                }
            }
        }
    }
}
)(jQuery);
(function(c) {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.VizBase");
    var a = b.views.analysisResult.viz.VizBase = function(d) {
        a.superclass.constructor.apply(this, arguments);
        this._$dom = c(d);
        this._$dom.addClass("grace-result-viz")
    }
    ;
    andrea.blink.extend(a, andrea.blink.mvc.View);
    a.prototype.render = function(d, e, f) {
        a._renderingCache = null ;
        return true
    }
    ;
    a._renderingCache = null ;
    a.prototype.toJSON = function() {
        return null 
    }
    ;
    a.prototype._addMessage = function(d) {}
    ;
    a.prototype._removeMessages = function(d) {}
    ;
    a._MESSAGES = {}
}
)(jQuery);
(function(d) {
    var c = andrea.grace;
    var a = c.constants.VizType;
    var b = c.views.analysisResult.viz.VizBase;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.placeHolder.VizPH");
    var e = c.views.analysisResult.viz.placeHolder.VizPH = function(g, f) {
        e.superclass.constructor.apply(this, arguments);
        this._selectedVizType = f
    }
    ;
    andrea.blink.extend(e, b);
    e.prototype.render = function(h, j, p) {
        b._renderingCache = null ;
        var g = d("<div/>").appendTo(this._$dom).addClass("grace-result-viz-placeHolder-hint");
        var m = d("<span/>").appendTo(g);
        d("<br/>").appendTo(g);
        d("<br/>").appendTo(g);
        var l = d("<span/>").appendTo(g);
        if (h && h.numRows === 0) {
            m.text("");
            l.text("")
        } else {
            if (this._selectedVizType === a.RECOMMEND) {
                m.text("");
                l.text("")
            } else {
                var f = a.manifest(this._selectedVizType);
                var k = f.required;
                var n = "";
                if (k.numDimensions > 0) {
                    n = n + k.numDimensions + ""
                }
                if (k.numMeasures > 0) {
                    n = n + k.numMeasures + ""
                }
                m.text(f.title + n);
                l.text("")
            }
        }
        g.css({
            left: (this._$dom.width() - g.width()) / 2 + "px",
            top: (this._$dom.height() - g.height()) / 2 + "px"
        });
        return true
    }
}
)(jQuery);
(function() {
    var d = andrea.grace;
    var f = d.constants.ValueType;
    var c = d.operation.OperationType;
    var b = d.models.value.NullValue;
    var a = d.models.value.DateValue;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.highCharts.supportClasses.ValueQuery");
    var e = andrea.grace.views.analysisResult.viz.highCharts.supportClasses.ValueQuery = function(j, h, g) {
        this._dataProvider = j;
        this._sa = h;
        this._a = this._sa.source;
        this._names = null ;
        this._captionParams = [];
        this._initialize();
        this._allNames = this._names;
        this._names = this._names.slice(0, g)
    }
    ;
    e.prototype._initialize = function() {
        var g = this._dataProvider.getCValues(this._a.index, true, true);
        var h = {
            values: g,
            hasNull: this._dataProvider.isCHasNull(this._a.index)
        };
        if (this._a.valueType() === f.STRING) {
            this._names = this._generateNames(h)
        } else {
            if (this._a.valueType() === f.NUMBER) {
                this._names = this._generateNames(h)
            } else {
                if (this._a.valueType() === f.DATE) {
                    if (this._sa.operationGroup.has(c.DRILL_YEAR)) {
                        this._captionParams = [a.CAPTION_DRILL_YEAR];
                        this._names = this._generateDateDrillNames(h, function(j) {
                            j.setMonth(0);
                            j.setDate(1)
                        }
                        , function(j, k) {
                            return j.getFullYear() < k.getFullYear()
                        }
                        , function(j) {
                            j.setFullYear(j.getFullYear() + 1)
                        }
                        )
                    } else {
                        if (this._sa.operationGroup.has(c.DRILL_MONTH)) {
                            this._captionParams = [a.CAPTION_DRILL_MONTH];
                            this._names = this._generateDateDrillNames(h, function(j) {
                                j.setDate(1)
                            }
                            , function(j, k) {
                                return j.getFullYear() * 12 + j.getMonth() < k.getFullYear() * 12 + k.getMonth()
                            }
                            , function(j) {
                                j.setMonth(j.getMonth() + 1)
                            }
                            )
                        } else {
                            if (this._sa.operationGroup.has(c.DRILL_WEEK)) {
                                this._captionParams = [a.CAPTION_DRILL_WEEK];
                                this._names = this._generateDateDrillNames(h, function(j) {}
                                , function(j, k) {
                                    return Math.floor(j.getMonsday().getTime() / 7 / 24 / 3600 / 1000) < Math.floor(k.getMonsday().getTime() / 7 / 24 / 3600 / 1000)
                                }
                                , function(j) {
                                    j.setDate(j.getDate() + 7)
                                }
                                )
                            } else {
                                if (this._sa.operationGroup.has(c.DRILL_DATE)) {
                                    this._captionParams = [a.CAPTION_DRILL_DATE];
                                    this._names = this._generateDateDrillNames(h, function(j) {}
                                    , function(j, k) {
                                        return Math.floor(j.getTime() / 24 / 3600 / 1000) < Math.floor(k.getTime() / 24 / 3600 / 1000)
                                    }
                                    , function(j) {
                                        j.setDate(j.getDate() + 1)
                                    }
                                    )
                                } else {
                                    if (this._sa.operationGroup.has(c.GROUP_MONTH)) {
                                        this._captionParams = [a.CAPTION_GROUP_MONTH];
                                        this._names = this._generateSortedNames(h, _.clone(Date.monthNames))
                                    } else {
                                        if (this._sa.operationGroup.has(c.GROUP_DATE)) {
                                            this._captionParams = [a.CAPTION_GROUP_DATE];
                                            this._names = this._generateSortedNames(h, _.clone(Date.dateNames))
                                        } else {
                                            if (this._sa.operationGroup.has(c.GROUP_DAY)) {
                                                this._captionParams = [a.CAPTION_GROUP_DAY];
                                                this._names = this._generateSortedNames(h, _.clone(Date.dayNames))
                                            } else {
                                                if (this._sa.operationGroup.has(c.GROUP_HOUR)) {
                                                    this._captionParams = [a.CAPTION_GROUP_HOUR];
                                                    this._names = this._generateSortedNames(h, _.clone(Date.hourNames))
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    ;
    e.prototype._generateNames = function(j) {
        var h = j.values;
        var g;
        if (this._sa.operationGroup.ascend()) {
            h = _.sortBy(h, function(l) {
                l.caption.apply(l, this._captionParams)
            }
            )
        } else {
            if (this._sa.operationGroup.descend()) {
                h = _.sortBy(h, function(l) {
                    l.caption.apply(l, this._captionParams)
                }
                );
                h.reverse()
            }
        }
        var k = [];
        _.each(h, function(l) {
            k.push(l.caption.apply(l, this._captionParams))
        }
        );
        if (j.hasNull) {
            g = b.instance();
            k.push(g.caption.apply(g, this._captionParams))
        }
        return k
    }
    ;
    e.prototype._generateDateDrillNames = function(g, k, j, r) {
        var s = g.values;
        var h = _.sortBy(s, function(t) {
            return t.quantified()
        }
        );
        if (h.length === 0) {
            return []
        }
        var n = h[0];
        var p = h[h.length - 1];
        var l = new Date();
        l.setTime(n.value().getTime());
        k(l);
        var m = [];
        while (true) {
            var q = new a("",l);
            m.push(q.caption.apply(q, this._captionParams));
            if (!j(l, p.value())) {
                break
            }
            r(l)
        }
        return this._generateSortedNames(g, m)
    }
    ;
    e.prototype._generateSortedNames = function(h, j) {
        if (this._sa.operationGroup.has(c.SORT_DESCEND)) {
            j.reverse()
        }
        if (h.hasNull) {
            var g = b.instance();
            j.push(g.caption.apply(g, this._captionParams))
        }
        return j
    }
    ;
    e.prototype.queryIndex = function(k) {
        var g = k[this._a.index];
        var j = g.caption.apply(g, this._captionParams);
        var h = this._names.indexOf(j);
        if (h === -1 && this._allNames.indexOf(j) === -1) {}
        return h
    }
    ;
    e.prototype.names = function() {
        return this._names
    }
}
)();
(function() {
    var a = andrea.grace;
    var b = a.operation.OperationGroup;
    var d = andrea.grace.views.analysisResult.viz.highCharts.supportClasses.ValueQuery;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.highCharts.supportClasses.HighChartsOption");
    var c = andrea.grace.views.analysisResult.viz.highCharts.supportClasses.HighChartsOption;
    c.title = null ;
    c.genMain = function(f) {
        var e = {
            chart: {
                type: f
            },
            title: {
                text: c.title
            },
            credits: {
                enabled: false
            },
            navigation: {
                buttonOptions: {
                    enabled: false
                }
            },
            exporting: {
                filename: "chart",
                type: "image/jpeg"
            }
        };
        c.title = null ;
        return e
    }
    ;
    c.genLegend = function(e) {
        var f = null ;
        if (e) {
            f = {
                layout: "vertical",
                align: "left",
                verticalAlign: "middle"
            }
        } else {
            f = {
                enabled: false
            }
        }
        return {
            legend: f
        }
    }
    ;
    c._visualize = function(f, g) {
        var e = null ;
        if (g < f.length) {
            e = f[g];
            e.visualized = true
        }
        return e
    }
    ;
    c._setVisualized = function(g) {
        if (!g) {
            return
        }
        if (!_.isArray(g)) {
            g = [g]
        }
        for (var f = 0; f < g.length; f++) {
            var e = g[f];
            e.visualized = true
        }
    }
    ;
    c.dataConfig = function(L, p, u, x, y, m) {
        var D, H, F;
        var z;
        var h;
        var I, w, E;
        var G, s, C;
        var B, q;
        var k;
        var v;
        var A;
        var e = [];
        var r = [];
        var n = function(f) {
            e.push(f);
            r.push(f.ascend());
            r.push(f.descend())
        }
        ;
        if (p) {
            n(p.operationGroup)
        }
        if (u) {
            n(u.operationGroup)
        }
        for (E = 0; E < x.length; E++) {
            n(x[E].operationGroup)
        }
        r = _.without(r, undefined);
        r.sort(function(M, f) {
            return M.priority - f.priority
        }
        );
        r.pop();
        _.each(e, function(f) {
            _.each(r, function(M) {
                f.removeOperation(M.id)
            }
            )
        }
        );
        if (!p) {
            if (y) {
                v = function(M, f) {
                    return f
                }
                ;
                G = x.length;
                C = 1
            } else {
                v = function(M, f) {
                    return 0
                }
                ;
                G = 1;
                C = x.length
            }
        } else {
            B = new d(L,p,m);
            v = function(M, f) {
                return B.queryIndex(M)
            }
            ;
            G = B.names().length;
            C = x.length
        }
        if (!u) {
            A = function(f) {
                return 0
            }
            ;
            s = 1
        } else {
            q = new d(L,u,m);
            A = function(f) {
                return q.queryIndex(f)
            }
            ;
            s = q.names().length
        }
        var l = [];
        for (I = 0; I < G; I++) {
            l[I] = {
                name: y ? c.saToDisplay(x[I]) : (B ? B.names()[I] : c.saToDisplay(x[0])),
                data: []
            };
            for (w = 0; w < s; w++) {
                l[I].data[w] = {
                    name: q ? q.names()[w] : "",
                    data: []
                };
                for (E = 0; E < C; E++) {
                    H = y ? I : E;
                    z = x[H].operationGroup;
                    l[I].data[w].data[E] = z.calculator();
                    if (!k && (z.ascend() || z.descend())) {
                        k = {
                            si: I,
                            di: E,
                            ascend: z.ascend()
                        }
                    }
                }
            }
        }
        for (D = 0; D < L.numRows; D++) {
            var j = L.getRValues(D);
            for (H = 0; H < x.length; H++) {
                I = v(j, H);
                w = A(j);
                E = y ? 0 : H;
                if (I === -1 || w === -1 || E === -1) {
                    continue
                }
                l[I].data[w].data[E].addFactor(j[x[H].source.index].value())
            }
        }
        var K = true;
        for (I = 0; I < G; I++) {
            for (w = 0; w < s; w++) {
                for (E = 0; E < C; E++) {
                    var t = l[I].data[w].data[E].calculate();
                    l[I].data[w].data[E] = t;
                    K = K && t >= 0
                }
            }
        }
        var J = {
            allPositive: K
        };
        if (q) {
            J.categories = q.names()
        }
        J.series = l;
        if (k && J.categories) {
            var g = [];
            for (D = 0; D < s; D++) {
                o = {
                    category: J.categories[D],
                    series: []
                };
                for (I = 0; I < J.series.length; I++) {
                    o.series[I] = J.series[I].data[D]
                }
                g.push(o)
            }
            g.sort(function(M, f) {
                return M.series[k.si].data[k.di] - f.series[k.si].data[k.di]
            }
            );
            if (!k.ascend) {
                g.reverse()
            }
            J.categories = [];
            for (I = 0; I < J.series.length; I++) {
                J.series[I].data = []
            }
            for (D = 0; D < s; D++) {
                o = g[D];
                J.categories.push(o.category);
                for (I = 0; I < J.series.length; I++) {
                    J.series[I].data.push(o.series[I])
                }
            }
        }
        return J
    }
    ;
    c.OPERATION_DISPLAY_SPLITTER = " | ";
    c.OPERATION_DISPLAY_SPLITTER_ABBR = "|";
    c.saToDisplay = function(e) {
        var f = e.operationGroup.mapNames().join(c.OPERATION_DISPLAY_SPLITTER);
        if (f) {
            return e.source.name + " (" + f + ")"
        } else {
            return e.source.name
        }
    }
    ;
    c.saToDisplayAbbr = function(e) {
        var f = e.operationGroup.mapAbbrs().join(c.OPERATION_DISPLAY_SPLITTER_ABBR);
        if (f) {
            return e.source.name + "(" + f + ")"
        } else {
            return e.source.name
        }
    }
}
)();
(function(f) {
    var e = andrea.grace;
    var g = andrea.grace.views.analysisResult.viz.highCharts.supportClasses.HighChartsOption;
    var c = e.constants.VizType;
    var d = e.views.analysisResult.viz.VizBase;
    var a = e.managers.Log;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.highCharts.HighChartsBase");
    var b = e.views.analysisResult.viz.highCharts.HighChartsBase = function(k, h, j) {
        b.superclass.constructor.apply(this, arguments);
        this._chartType = h;
        this._vizType = j;
        this._$highcharts = null ;
        this._highConfig = null ;
        this._validateSize()
    }
    ;
    andrea.blink.extend(b, d);
    b.prototype.highConfig = function() {
        return g.genMain(this._chartType)
    }
    ;
    b.prototype._setVisualized = function(j, l, k, m, h) {
        g._setVisualized(l);
        g._setVisualized(k);
        g._setVisualized(m)
    }
    ;
    b.prototype.render = function(l, n, q) {
        var k = g.genMain(this._chartType);
        var p = {
            array: this.dataConfigArgs(l, n, q)
        };
        var r = function(u, w, v, x, t, s) {
            p.object = {
                dataProvider: u,
                seriesSA: w,
                categorySA: v,
                dataSAs: x,
                isSeriesByDatas: t,
                turboThreshold: s
            }
        }
        ;
        r.apply(this, p.array);
        this._setVisualized.apply(this, p.array);
        var j = b.checkOutdate(this._vizType, p);
        if (!j.render) {
            return false
        }
        var h = g.dataConfig.apply(null , p.array);
        this.completeHighConfig(k, h, l, n, q);
        k.plotOptions = k.plotOptions || {};
        k.plotOptions.series = k.plotOptions.series || {};
        k.plotOptions.series.turboThreshold = p.object.turboThreshold;
        k.plotOptions.series.stickyTracking = false;
        if (!j.animation) {
            k.plotOptions.series.animation = false
        }
        if (h.allPositive) {
            k.xAxis = k.xAxis || {};
            k.xAxis.min = 0;
            if (!k.yAxis) {
                k.yAxis = {};
                k.yAxis.min = 0
            } else {
                for (var m = 0; m < k.yAxis.length; m++) {
                    k.yAxis[m].min = 0
                }
            }
        }
        this._highConfig = JSON.parse(JSON.stringify(k));
        this._$highcharts.highcharts(k);
        return true
    }
    ;
    b.prototype.dataConfigArgs = function(h, j, k) {}
    ;
    b.prototype.completeHighConfig = function(k, j, h, l, m) {}
    ;
    b.prototype._validateSize = function() {
        var h = this.size();
        this._$dom.css({
            height: h.height + "px",
            width: h.width + "px"
        });
        if (this._$highcharts) {
            this._$highcharts.empty().detach()
        }
        this._$highcharts = f("<div/>").appendTo(this._$dom);
        this._$highcharts.css({
            height: h.height + "px",
            width: h.width + "px"
        });
        if (this._highConfig) {
            this._$highcharts.highcharts(this._highConfig)
        }
    }
    ;
    b.prototype.toJSON = function() {
        return {
            type: "highcharts",
            highConfig: this._highConfig
        }
    }
    ;
    b.checkOutdate = function(m, j) {
        var n = function(p) {
            if (p != null ) {
                return JSON.parse(JSON.stringify(p))
            } else {
                return null 
            }
        }
        ;
        var l = {
            vizType: m,
            numRows: j.object.dataProvider.numRows,
            seriesSA: n(j.object.seriesSA),
            categorySA: n(j.object.categorySA),
            dataSAs: n(j.object.dataSAs),
            isSeriesByDatas: j.object.isSeriesByDatas
        };
        var h = d._renderingCache;
        var k;
        if (!h) {
            k = {
                render: true,
                animation: true
            }
        } else {
            if (!_.isEqual(h, l)) {
                k = {
                    render: true,
                    animation: h.numRows === l.numRows
                }
            } else {
                k = {
                    render: false
                }
            }
        }
        if (k.render) {
            d._renderingCache = l
        }
        return k
    }
}
)(jQuery);
(function(c) {
    var b = andrea.grace;
    var a = b.constants.VizType;
    var e = andrea.grace.views.analysisResult.viz.highCharts.supportClasses.HighChartsOption;
    var f = b.calculator.supportClasses.CalculatorFactory;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.highCharts.Pie");
    var d = b.views.analysisResult.viz.highCharts.Pie = function(g) {
        d.superclass.constructor.apply(this, [g, "pie", a.PIE])
    }
    ;
    andrea.blink.extend(d, b.views.analysisResult.viz.highCharts.HighChartsBase);
    d.prototype.dataConfigArgs = function(h, j, k) {
        var g = b.Settings.dataDiscovery.highcharts.turboThreshold.pie;
        return [h, null , j[0], k.slice(0, 1), false, g]
    }
    ;
    d.prototype.completeHighConfig = function(h, g, k, q, r) {
        h.xAxis = {
            title: {
                text: q[0].source.name
            },
            categories: g.categories
        };
        for (var m = 0; m < g.series.length; m++) {
            var n = g.series[m].data;
            for (var l = 0; l < n.length; l++) {
                n[l].y = n[l].data[0]
            }
        }
        h.series = g.series;
        h.tooltip = {
            hideDelay: 240
        };
        h.plotOptions = {
            series: {
                dataLabels: {
                    enabled: true,
                    formatter: function() {
                        return "<b>" + this.point.name + "</b>: " + this.percentage.toFixed(2) + " %"
                    }
                }
            }
        };
        if (h.series.length > 50) {
            this._addMessage("W001");
            var p = this;
            _.delay(function() {
                this._removeMessages()
            }
            , 300)
        } else {}
    }
}
)(jQuery);
(function(d) {
    var c = andrea.grace;
    var e = andrea.grace.views.analysisResult.viz.highCharts.supportClasses.HighChartsOption;
    var b = c.constants.VizType;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.highCharts.BasicXY");
    var a = c.views.analysisResult.viz.highCharts.BasicXY = function(h, f, g) {
        a.superclass.constructor.apply(this, arguments);
        this._chartType = f;
        this._vizType = g;
        this._isSeriesByDatas = false
    }
    ;
    andrea.blink.extend(a, c.views.analysisResult.viz.highCharts.HighChartsBase);
    a.prototype.dataConfigArgs = function(g, h, j) {
        var j;
        var f = c.Settings.dataDiscovery.highcharts.turboThreshold.xy;
        if (h.length > 1) {
            j = j.slice(0, 1);
            return [g, h[1], h[0], j, this._isSeriesByDatas, f]
        } else {
            j = j;
            this._isSeriesByDatas = true;
            return [g, null , h[0], j, this._isSeriesByDatas, f]
        }
    }
    ;
    a.prototype.completeHighConfig = function(l, g, m, s, x) {
        l.xAxis = {};
        if (s && s[0]) {
            l.xAxis.title = {
                text: e.saToDisplayAbbr(s[0])
            }
        } else {
            l.xAxis.title = {
                text: null 
            }
        }
        if (g.categories) {
            l.xAxis.categories = g.categories;
            l.xAxis.labels = {
                rotation: -45,
                align: "right"
            }
        } else {
            l.xAxis.categories = [""]
        }
        l.yAxis = [];
        var u = function(j) {
            var y;
            if (!j) {
                y = null 
            } else {
                if (this._vizType === b.RADAR) {
                    y = null 
                } else {
                    y = e.saToDisplay(j)
                }
            }
            return {
                title: {
                    text: y
                }
            }
        }
        ;
        if (this._isSeriesByDatas) {
            for (var q = 0; q < x.length; q++) {
                var t = u.call(this, x[q]);
                t.opposite = q % 2 === 1;
                l.yAxis.push(t)
            }
        } else {
            l.yAxis.push(u.call(this, x.length === 1 ? x[0] : null ))
        }
        for (var q = 0; q < g.series.length; q++) {
            var p = g.series[q];
            if (l.yAxis.length === g.series.length) {
                p.yAxis = q
            }
            var r = p.data;
            for (var k = 0; k < r.length; k++) {
                r[k].y = r[k].data[0]
            }
        }
        l.series = g.series;
        var w = l.series.length > 1;
        l = _.defaults(l, e.genLegend(w));
        l.tooltip = {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            footerFormat: "</table>",
            shared: this._isSeriesByDatas,
            useHTML: true,
            hideDelay: 240
        };
        if (w) {
            l.tooltip.pointFormat = '<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y}</b></td></tr>'
        } else {
            l.tooltip.pointFormat = '<tr><td style="padding:0"><b>{point.y}</b></td></tr>'
        }
        if (this._vizType) {
            if (this._vizType === b.RADAR) {
                l.chart.polar = true;
                l.xAxis.labels = {
                    rotation: 0,
                    align: "center"
                }
            } else {
                if (this._vizType === b.STACKED_BAR || this._vizType === b.STACKED_COLUMN) {
                    l.plotOptions = {
                        series: {
                            stacking: "normal"
                        }
                    }
                }
            }
        }
        var h = l.series.length;
        var v = h > 0 ? l.series[0].data.length : 0;
        var f;
        var n;
        if (b.horizontal(this._vizType)) {
            n = "width"
        } else {
            if (b.vertical(this._vizType)) {
                n = "height"
            }
        }
        if (this._vizType === b.BAR || this._vizType === b.COLUMN) {
            f = h * v * 12
        } else {
            if (this._vizType === b.STACKED_BAR || this._vizType === b.STACKED_COLUMN) {
                f = v * 18
            } else {
                if (this._vizType === b.LINE || this._vizType === b.AREA) {
                    f = h * 6
                }
            }
        }
        if (n && f > this._$dom[n]()) {
            this._$dom[n](f);
            this._$highcharts[n](f)
        }
    }
}
)(jQuery);
(function(d) {
    var c = andrea.grace;
    var f = andrea.grace.views.analysisResult.viz.highCharts.supportClasses.HighChartsOption;
    var a = c.constants.VizType;
    var e = c.utils.ColorUtil;
    andrea.blink.declare("andrea.grace.views.analysisResult.viz.highCharts.Scatter");
    var b = c.views.analysisResult.viz.highCharts.Scatter = function(j, g, h) {
        b.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(b, c.views.analysisResult.viz.highCharts.HighChartsBase);
    b.prototype.render = function(g, h, j) {
        if (j.length >= 3) {
            this._chartType = "bubble"
        } else {
            this._chartType = "scatter"
        }
        return b.superclass.render.apply(this, arguments)
    }
    ;
    b.prototype.dataConfigArgs = function(h, j, k) {
        k = k.slice(0, 3);
        var g = c.Settings.dataDiscovery.highcharts.turboThreshold.scatter;
        if (j.length === 1) {
            return [h, null , j[0], k, false, g]
        } else {
            return [h, j[0], j[1], k, false, g]
        }
    }
    ;
    b.prototype.completeHighConfig = function(v, l, D, g, r) {
        var y, x;
        v.xAxis = {
            title: {
                text: f.saToDisplay(r[0])
            },
            startOnTick: true,
            endOnTick: true
        };
        v.yAxis = {};
        var m = r.length > 1 ? f.saToDisplay(r[1]) : null ;
        v.yAxis.title = {
            text: m
        };
        v.yAxis.labels = {
            enabled: m !== null 
        };
        var k;
        var p = [];
        if (g.length === 1) {
            p.push("<b>" + f.saToDisplayAbbr(g[0]) + ": </b>{point.name}")
        } else {
            if (g.length === 2) {
                p.push("<b>" + f.saToDisplayAbbr(g[0]) + ": </b>{series.name}");
                p.push("<b>" + f.saToDisplayAbbr(g[1]) + ": </b>{point.name}")
            }
        }
        p.push("    " + f.saToDisplayAbbr(r[0]) + ": {point.x}");
        if (r.length > 1) {
            p.push("    " + f.saToDisplayAbbr(r[1]) + ": {point.y}")
        }
        if (r.length > 2) {
            p.push("    " + f.saToDisplayAbbr(r[2]) + ": {point.z}")
        }
        k = p.join("<br/>");
        var C;
        C = "";
        v.plotOptions = {
            series: {
                tooltip: {
                    pointFormat: k,
                    headerFormat: C
                }
            }
        };
        v.tooltip = {
            hideDelay: 240
        };
        var n;
        var w;
        var E;
        n = [];
        var q = Highcharts.getOptions().colors;
        for (y = 0; y < l.series.length; y++) {
            var t = l.series[y];
            var u = t.data;
            w = [];
            for (x = 0; x < u.length; x++) {
                var B = u[x];
                var A = B.data;
                if (A.length === 1 && A[0] === 0) {
                    continue
                } else {
                    if (A.length === 2 && A[0] === 0 && A[1] === 0) {
                        continue
                    } else {
                        if (A.length === 3 && A[0] === 0 && A[1] === 0 && A[2] === 0) {
                            continue
                        }
                    }
                }
                E = {
                    name: B.name,
                    x: A[0],
                    y: A[1] != null  ? A[1] : 1,
                    z: A[2] != null  ? A[2] : 1
                };
                w.push(E)
            }
            var h = e.hexToRgb(q[y % q.length]);
            n.push({
                name: t.name,
                data: w,
                color: "rgba(" + h.r + ", " + h.g + ", " + h.b + ", .65)"
            })
        }
        v.series = n;
        var z = v.series.length > 1;
        v = _.defaults(v, f.genLegend(z));
        if (v.series.length > 50 || (v.series.length * v.series[0].data.length > 1000)) {
            this._addMessage("W001");
            _.delay(d.proxy(function() {
                this._removeMessages()
            }
            , this), 300)
        } else {}
    }
}
)(jQuery);
(function() {
    var b = andrea.grace;
    andrea.blink.declare("grace.views.analysisResult.AnalysisResultEvent");
    var a = b.views.analysisResult.AnalysisResultEvent = function(c, e, d) {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.blink.events.Event);
    a.SAVE = "save"
}
)();
(function(e) {
    var g = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisResult.AnalysisResult");
    var a = g.views.analysisResult.viz.VizFactory;
    var c = g.constants.VizType;
    var b = g.models.DataProvider;
    var h = g.utils.FilterUtil;
    var f = g.models.DataDiscoveryModel;
    var j = g.views.analysisResult.AnalysisResultEvent;
    var k = g.managers.SerializeManager;
    var d = g.views.analysisResult.AnalysisResult = function(l) {
        d.superclass.constructor.apply(this, arguments);
        this._$dom = e(l);
        this._$dom.addClass("grace-result fancy-scrollbar");
        this._viz = null ;
        this._vizContainer$ = null ;
        this._$collab = null ;
        this._createChildren()
    }
    ;
    andrea.blink.extend(d, andrea.blink.mvc.View);
    d.prototype._createChildren = function() {
        this._vizContainer$ = e("<div/>").appendTo(this._$dom);
        this._$collab = e("<div/>").addClass("grace-result-collab-container");
        this._$save = e("<button/>").addClass("grace-result-collab grace-result-collab-save");
        this._$save.attr("title", "");
        this._$save.on("click", e.proxy(function() {
            this.dispatchEvent(new j(j.SAVE,this,{
                layout: "dataDiscovery",
            }))
        }
        , this));
        this._$save.appendTo(this._$collab);
        this._$share = e("<button/>").addClass("grace-result-collab grace-result-collab-share");
        this._$share.attr("title", "");
        this._$share.on("click", e.proxy(function() {
            alertify.reset();
            alertify.prompt("", e.proxy(function(l, m) {
                if (l) {
                    this.dispatchEvent(new j(j.SAVE,this,{
                        layout: "vizOnly",
                        title: m
                    }))
                } else {
                    alertify.error("")
                }
            }
            , this))
        }
        , this));
        this._$share.appendTo(this._$collab);
        if (g.Config.dataDiscovery.layout === "vizOnly") {
            this._$collab.hide()
        }
    }
    ;
    d.prototype.render = function(v, p, n, t, y) {
        var r = function(z) {
            z.visualized = false;
            z.numPartialVisualized = 0
        }
        ;
        _.each(t, r);
        _.each(y, r);
        p = h.filter(p, n);
        var u = null ;
        if (p && p.numRows === 0) {
            u = null 
        } else {
            if (v === c.RECOMMEND) {
                u = this._recommend(p, t, y)
            } else {
                if (this._valid(v, p, t, y)) {
                    u = v
                } else {
                    u = null 
                }
            }
        }
        var q = e("<div/>").css({
            height: this.size().height + "px"
        }).appendTo(this._vizContainer$);
        var w = a.produce(q[0], u, v);
        var x = w.render(p, t, y);
        if (x) {
            this._$collab.detach();
            if (this._viz) {
                this._viz.destroy()
            }
            this._viz = w;
            var s = this._viz.toJSON();
            k.instance().saveViz(s);
            if (s && k.instance().serializable()) {
                this._$collab.appendTo(this._$dom)
            }
            var m = this.size();
            var l = w.size();
            this._vizContainer$.css({
                "overflow-x": "hidden",
                "overflow-y": "hidden"
            });
            if (l.width > m.width) {
                this._vizContainer$.css("overflow-x", "auto")
            }
            if (l.height > m.height) {
                this._vizContainer$.css("overflow-y", "auto")
            }
        } else {
            q.detach()
        }
    }
    ;
    d.prototype._validateSize = function() {
        var l = this.size();
        this._$dom.css({
            height: l.height + "px",
            width: l.width + "px"
        });
        if (this._viz) {
            this._viz.size(l)
        }
    }
    ;
    d.prototype._recommend = function(n, p, s) {
        if (s.length === 0) {
            return null 
        }
        var r, q;
        var m, l;
        if (p.length >= 2 && s.length >= 2) {
            return c.SCATTER
        } else {
            if (p.length >= 2 && s.length === 1) {
                r = p[0];
                m = n.getCValues(r.source.index, true, false).length;
                q = p[1];
                l = n.getCValues(q.source.index, true, false).length;
                if (r.isDateSeries()) {
                    return c.LINE
                } else {
                    if (m < 16 && l < 16) {
                        return c.COLUMN
                    } else {
                        if ((m * l) > (40 * 40)) {
                            return c.SCATTER
                        } else {
                            if (m > l) {
                                return c.STACKED_COLUMN
                            } else {
                                return c.STACKED_BAR
                            }
                        }
                    }
                }
            } else {
                if (p.length === 1) {
                    r = p[0];
                    m = n.getCValues(r.source.index, true, false).length;
                    if (r.isDateSeries()) {
                        return c.LINE
                    } else {
                        return c.COLUMN
                    }
                } else {
                    if (p.length === 0) {
                        return c.BAR
                    }
                }
            }
        }
        return null 
    }
    ;
    d.prototype._valid = function(p, l, n, r) {
        var m = c.manifest(p);
        var q = m.required;
        return n.length >= q.numDimensions && r.length >= q.numMeasures
    }
}
)(jQuery);
(function(f) {
    var e = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisResult.AnalysisResultMediator");
    var c = e.constants.AppConst;
    var b = e.managers.Log;
    var d = e.views.analysisResult.AnalysisResultEvent;
    var a = e.views.analysisResult.AnalysisResultMediator = function(g) {
        a.superclass.constructor.apply(this, arguments);
        this._view = g;
        this._model = null 
    }
    ;
    andrea.blink.extend(a, andrea.blink.mvc.ViewMediator);
    a.prototype.init = function() {
        var g = this._model = this._getModel(c.MODEL_GRACE);
        var h = function(j) {
            var k = [];
            _.each(j, function(l) {
                k.push(l.source.name)
            }
            );
            return [j.length, k.join("|")].join(",")
        }
        ;
        this._subscribe(c.NOTIFICATION_VIZ_CONTEXT_CHANGED, f.proxy(function(j) {
            b.interaction("analysis", [h(g.analysisDimesions()), h(g.analysisDatas()), h(g.analysisFilters())].join(","));
            this._view.render(g.vizType(), g.dataProvider, g.analysisFilters(), g.analysisDimesions(), g.analysisDatas());
            g.invalidateShelvedAnalysis()
        }
        , this));
        this._view.render(g.vizType(), g.dataProvider, g.analysisFilters(), g.analysisDimesions(), g.analysisDatas());
        this._view.addEventListener(d.SAVE, function(j) {
            this._action(c.ACTION_SAVE_COLLABORATION, j.data)
        }
        , this)
    }
}
)(jQuery);
(function() {
    var a = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.VizIconEvent");
    var b = a.views.popUp.VizIconEvent = function(c, e, d) {
        b.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(b, andrea.blink.events.Event);
    b.CLICK = "click"
}
)();
(function(c) {
    var b = andrea.grace;
    var d = b.views.popUp.VizIconEvent;
    andrea.blink.declare("andrea.grace.views.vizNavigator.VizIcon");
    var a = b.views.vizNavigator.VizIcon = function(f, e) {
        a.superclass.constructor.apply(this, arguments);
        this._$dom = c(this._dom);
        this._enabled = false;
        this._selected = false;
        this._data = e.data;
        this._basicClass = e.basicClass;
        this._enabledClass = e.enabledClass;
        this._selectedClass = e.selectedClass;
        var g = this;
        this._$dom.addClass(this._basicClass).click(function() {
            g.dispatchEvent(new d(d.CLICK,g))
        }
        );
        if (this._data.icon) {
            this._$dom.css({
                "background-image": 'url("' + this._data.icon + '")'
            })
        } else {
            if (this._data.title) {
                c("<div/>").text(this._data.title).appendTo(this._$dom)
            }
        }
        this._$dom.attr({
            title: this._data.title
        })
    }
    ;
    andrea.blink.extend(a, andrea.blink.mvc.View);
    a.prototype.type = function() {
        return this._data.type
    }
    ;
    a.prototype.enabled = function(e) {
        if (arguments.length > 0) {
            if (this._enabled !== e) {
                this._enabled = e;
                if (this._enabled) {
                    if (!this.selected()) {
                        this._$dom.addClass(this._enabledClass)
                    } else {
                        this._$dom.removeClass(this._enabledClass)
                    }
                } else {
                    this._$dom.removeClass(this._enabledClass)
                }
            }
            return this
        } else {
            return this._enabled
        }
    }
    ;
    a.prototype.selected = function(e) {
        if (arguments.length > 0) {
            if (this._selected !== e) {
                this._selected = e;
                if (this._selected) {
                    this._$dom.addClass(this._selectedClass);
                    this._$dom.removeClass(this._enabledClass)
                } else {
                    this._$dom.removeClass(this._selectedClass);
                    if (this.enabled()) {
                        this._$dom.addClass(this._enabledClass)
                    }
                }
            }
            return this
        } else {
            return this._selected
        }
    }
    ;
    a.prototype.update = function(f, e) {
        var g = this._data.required;
        this.enabled(f >= g.numDimensions && e >= g.numMeasures)
    }
}
)(jQuery);
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.popUp.VizNavigatorEvent");
    var a = b.views.popUp.VizNavigatorEvent = function(c, e, d) {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.blink.events.Event);
    a.VIZ_CHANGED = "vizChanged"
}
)();
(function(f) {
    var e = andrea.grace;
    var d = e.views.vizNavigator.VizIcon;
    var g = e.views.popUp.VizIconEvent;
    var c = e.views.popUp.VizNavigatorEvent;
    var b = e.constants.VizType;
    andrea.blink.declare("andrea.grace.views.vizNavigator.VizNavigator");
    var a = e.views.vizNavigator.VizNavigator = function(l) {
        a.superclass.constructor.apply(this, arguments);
        this._$dom = f(this._dom);
        this._selectedType = null ;
        this._defaultViewIcon = null ;
        var n = b;
        var h = n.manifest(n.RECOMMEND);
        var v = [{
            title: "",
            icons: [n.manifest(n.COLUMN), n.manifest(n.BAR), n.manifest(n.RADAR)]
        }, {
            title: "",
            icons: [n.manifest(n.SCATTER)]
        }, {
            title: "",
            icons: [n.manifest(n.LINE), n.manifest(n.AREA)]
        }, {
            title: "",
            icons: [n.manifest(n.PIE), n.manifest(n.STACKED_COLUMN), n.manifest(n.STACKED_BAR)]
        }];
        var p = this;
        this._vizIcons = [];
        var u = f("<div/>").appendTo(this._$dom).addClass("grace-navigator-contaier");
        var j = f("<div/>").appendTo(u).addClass("grace-navigator-recommend");
        var s = f("<div/>").appendTo(j);
        var k = this._defaultViewIcon = new d(s[0],{
            data: h,
            basicClass: "grace-navigator-recommend-icon",
            enabledClass: "grace-navigator-recommend-icon-enabled",
            selectedClass: "grace-navigator-recommend-icon-selected"
        });
        f("div", k.dom()).css("margin-top", "4px");
        this._vizIcons.push(k);
        var t = f("<div/>").appendTo(u).addClass("grace-navigator-selector");
        var r;
        r = f("<div/>").appendTo(t).addClass("grace-navigator-line");
        this._createGroup(r, v[0]);
        this._createGroup(r, v[1]);
        r = f("<div/>").appendTo(u).addClass("grace-navigator-line");
        this._createGroup(r, v[2]);
        this._createGroup(r, v[3]);
        var q = function(w) {
            p._select(w.target())
        }
        ;
        for (var m = 0; m < this._vizIcons.length; m++) {
            this._vizIcons[m].addEventListener(g.CLICK, q)
        }
        k.enabled(true);
        this._select(this._defaultViewIcon)
    }
    ;
    andrea.blink.extend(a, andrea.blink.mvc.View);
    a.prototype._createGroup = function(p, q) {
        var l = this;
        $group = f("<div/>").appendTo(p).addClass("grace-navigator-group");
        var h = f("<h2/>").appendTo($group).addClass("grace-navigator-group-text");
        h.text(q.title);
        var r = f("<div/>").appendTo($group).addClass("grace-navigator-group-icons");
        for (var j = 0; j < q.icons.length; j++) {
            var n = q.icons[j];
            var m = f("<div/>").appendTo(r);
            var k = new d(m[0],{
                data: n,
                basicClass: "grace-navigator-group-icon",
                enabledClass: "grace-navigator-group-icon-enabled",
                selectedClass: "grace-navigator-group-icon-selected"
            });
            this._vizIcons.push(k)
        }
    }
    ;
    a.prototype.selectedType = function() {
        return this._selectedType
    }
    ;
    a.prototype._select = function(h) {
        if (!h.enabled() || h.selected()) {
            return
        }
        this._selectedType = h.type();
        _.each(this._vizIcons, function(j) {
            j.selected(j === h)
        }
        );
        this.dispatchEvent(new c(c.VIZ_CHANGED,this))
    }
    ;
    a.prototype.update = function(j, h) {
        var k = this;
        _.each(this._vizIcons, function(l) {
            var n = l.selected();
            l.update(j, h);
            var m = l.enabled()
        }
        )
    }
}
)(jQuery);
(function(e) {
    var c = andrea.grace;
    var b = c.views.popUp.VizNavigatorEvent;
    var a = c.constants.AppConst;
    andrea.blink.declare("andrea.grace.views.vizNavigator.VizNavigatorMediator");
    var d = c.views.vizNavigator.VizNavigatorMediator = function(f) {
        d.superclass.constructor.apply(this, arguments);
        this._view = f;
        this._model = null 
    }
    ;
    andrea.blink.extend(d, andrea.blink.mvc.ViewMediator);
    d.prototype.init = function() {
        var g = this;
        var f = this._model = this._getModel(a.MODEL_GRACE);
        this._view.addEventListener(b.VIZ_CHANGED, function(h) {
            g._action(a.ACTION_RUN_ANALYSIS, {
                vizType: g._view.selectedType()
            })
        }
        , this);
        this._subscribe(a.NOTIFICATION_VIZ_CONTEXT_CHANGED, function(h) {
            g._view.update(f.analysisDimesions().length, f.analysisDatas().length)
        }
        )
    }
}
)(jQuery);
(function() {
    var e = andrea.grace;
    andrea.blink.declare("andrea.grace.DataDiscovery");
    var c = andrea.blink.mvc.App;
    var d = e.views.popUp.Loading;
    var a = e.constants.AppConst;
    var b = e.DataDiscovery = function(f) {
        b.superclass.constructor.apply(this, arguments);
        this._div = f;
        this._$dom = $(f);
        this._loading = null ;
        this._viewSourceDim = null ;
        this._viewSourceMea = null ;
        this._viewDesDimensionShelf = null ;
        this._viewDesMeasureShelf = null ;
        this._viewFilterShelf = null ;
        this._viewAnalysisResult = null ;
        this._viewVizNavigator = null ;
        this._applyHighSettings();
        this._startup();
        $("#divHeader", this._dom).click(function() {
            window.location.href = e.Settings.home
        }
        );
        this._guide$ = $("#divGuide", this._dom);
        this._$dom.droppable({
            accept: function() {
                return true
            },
            activate: $.proxy(function(g) {
                if (this._guide$) {
                    this._guide$.fadeOut(100)
                }
            }
            , this),
            deactivate: $.proxy(function(g) {
                _.defer($.proxy(function() {
                    if (this._guide$) {
                        this._guide$.fadeIn(100)
                    }
                }
                , this))
            }
            , this)
        })
    }
    ;
    andrea.blink.extend(b, andrea.blink.mvc.View);
    b.prototype.vizContextChanged = function(f) {
        if (this._guide$ && f > 0) {
            var g = this._guide$;
            this._guide$.fadeOut(400, function() {
                g.empty().detach()
            }
            );
            this._guide$ = null 
        }
    }
    ;
    b.prototype._applyHighSettings = function() {
        Highcharts.setOptions({
            chart: {
                style: {
                    fontFamily: "Trebuchet MS, Verdana, sans-serif, FontAwesome"
                }
            }
        })
    }
    ;
    b.prototype.addLoading = function() {
        if (!this._loading) {
            this._loading = new d($("<div/>"));
            this._loading.open(this._$dom, true)
        }
    }
    ;
    b.prototype.removeLoading = function() {
        if (this._loading) {
            this._loading.close();
            this._loading = null 
        }
    }
    ;
    b.prototype.rowBasedDataProvider = function(h, g, f) {
        this._apiMediator.rowBasedDataProvider(h, g, f)
    }
    ;
    b.prototype.loadCollaboration = function() {
        this._apiMediator.loadCollaboration()
    }
    ;
    b.prototype._startup = function() {
        var j = new c();
        var g = null ;
        var h = null ;
        this._viewSourceDim = new e.views.analysisContainer.source.SrcDimensionShelf($("#divSrcDim")[0]);
        this._viewSourceMea = new e.views.analysisContainer.source.SrcMeasureShelf($("#divSrcMea")[0]);
        this._viewDesDimensionShelf = new e.views.analysisContainer.destination.DesDimensionShelf($("#divDesAnalysisDim")[0]);
        this._viewDesMeasureShelf = new e.views.analysisContainer.destination.DesMeasureShelf($("#divDesAnalysisMea")[0]);
        this._viewFilterShelf = new e.views.analysisContainer.processor.FilterShelf($("#divProcFilter")[0]);
        this._viewAnalysisResult = new e.views.analysisResult.AnalysisResult($("#divAnalysisResult")[0]);
        this._viewVizNavigator = new e.views.vizNavigator.VizNavigator($("#divVizNavigator")[0]);
        j.registerModel(a.MODEL_GRACE, new e.models.DataDiscoveryModel());
        j.registerAction(a.ACTION_CHANGE_DATA_PROVIDER, e.actions.ChangeDataProviderAction);
        j.registerAction(a.ACTION_RUN_ANALYSIS, e.actions.RunAnalysisAction);
        j.registerAction(a.ACTION_SAVE_COLLABORATION, e.actions.SaveCollaborationAction);
        j.registerAction(a.ACTION_LOAD_COLLABORATION, e.actions.LoadCollaborationAction);
        h = new e.DataDiscoveryMediator(this);
        j.registerViewMediator(a.MEDIATOR_DATA_DISCOVERY, h);
        this._apiMediator = h;
        h = new e.views.analysisContainer.source.SrcDimensionShelfMediator(this._viewSourceDim);
        j.registerViewMediator(a.MEDIATOR_ANALYSIS_SRC_DIM, h);
        h = new e.views.analysisContainer.source.SrcMeasureShelfMediator(this._viewSourceMea);
        j.registerViewMediator(a.MEDIATOR_ANALYSIS_SRC_MEA, h);
        h = new e.views.analysisContainer.destination.DesDimensionShelfMediator(this._viewDesDimensionShelf);
        j.registerViewMediator(a.MEDIATOR_ANALYSIS_DES_DIM, h);
        h = new e.views.analysisContainer.destination.DesMeasureShelfMediator(this._viewDesMeasureShelf);
        j.registerViewMediator(a.MEDIATOR_ANALYSIS_DES_MEA, h);
        h = new e.views.analysisContainer.processor.FilterShelfMediator(this._viewFilterShelf);
        j.registerViewMediator(a.MEDIATOR_ANALYSIS_DES_MEA, h);
        h = new e.views.analysisResult.AnalysisResultMediator(this._viewAnalysisResult);
        j.registerViewMediator(a.MEDIATOR_ANALYSIS_RESULT, h);
        h = new e.views.vizNavigator.VizNavigatorMediator(this._viewVizNavigator);
        j.registerViewMediator(a.MEDIATOR_VIZ_NAVIGATOR, h);
        var k = this;
        var f = false;
        $(window).resize(function() {
            if (!f) {
                setTimeout(function() {
                    f = false;
                    k._validateSize()
                }
                , 1000 / 24)
            }
            f = true
        }
        );
        this._validateSize()
    }
    ;
    b.prototype._validateSize = function() {
        var u;
        var x, r;
        var s = parseInt($("body").css("margin"));
        var g = $(window).height() - s * 2;
        var k = $(window).width() - s * 2;
        var j = $("#divHeader", this._$dom);
        var q = $("#divFooter", this._$dom);
        var l = $("#divMain", this._$dom);
        var v = g - j.outerHeight() - q.outerHeight() - l.vMargin();
        var m = k - l.hMargin();
        l.css({
            height: v + "px",
            width: m + "px"
        });
        if (e.Config.dataDiscovery.layout === "vizOnly") {
            $("#divCol1").hide();
            $("#divCol2").hide();
            $("#divCol3").css({
                width: m + "px",
                height: v + "px"
            });
            $("#divAnalysis").hide();
            this._viewAnalysisResult.size({
                width: m,
                height: v
            });
            $("#divGuide").hide()
        } else {
            var t = 172;
            $("#divCol1").css({
                width: t + "px",
                height: v + "px"
            });
            u = $(this._viewSourceDim.dom());
            var f = parseInt($(this._viewSourceDim.dom()).css("margin-bottom"));
            this._viewSourceDim.size({
                width: t,
                height: (v - f) / 2 + f - u.vPadding() - 6
            });
            this._viewSourceMea.size({
                width: t,
                height: (v - f) / 2 + f - u.vPadding() - 6
            });
            var y = 142;
            $("#divCol2").css({
                width: y + "px",
            });
            this._viewFilterShelf.size({
                height: 228
            });
            x = m - $("#divCol1").layoutWidth() - $("#divCol2").layoutWidth();
            $("#divCol3").css({
                width: x + "px",
                height: v + "px"
            });
            var p = $("#divVizNavigator", this._$dom);
            var n = $("#divDestinations", this._$dom);
            n.css({
                width: Math.min(1024, x - p.width() - parseInt(n.css("margin-right"))) + "px"
            });
            this._viewDesDimensionShelf.size({
                height: 35 + 34 * 1 - 6
            });
            this._viewDesMeasureShelf.size({
                height: 35 + 34 * 1 - 6
            });
            this._viewAnalysisResult.size({
                height: v - (35 + 34 * 1) * 2
            })
        }
    }
    ;
    b.prototype._createChildDiv = function(f) {
        var g = document.createElement("div");
        if (f) {
            $(g).appendTo(f)
        }
        return g
    }
}
)();
(function(d) {
    var c = andrea.grace;
    andrea.blink.declare("andrea.grace.DataDiscoveryMediator");
    var a = c.constants.AppConst;
    var b = andrea.grace.DataDiscoveryMediator = function(e) {
        b.superclass.constructor.apply(this, arguments);
        this._view = e;
        this._model = null 
    }
    ;
    andrea.blink.extend(b, andrea.blink.mvc.ViewMediator);
    b.prototype.rowBasedDataProvider = function(h, g, f) {
        var e = this._getModel(a.MODEL_GRACE);
        this._subscribe(a.NOTIFICATION_VIZ_CONTEXT_CHANGED, d.proxy(function(j) {
            this._view.vizContextChanged(e.analysisDatas().length)
        }
        , this));
        this._action(a.ACTION_CHANGE_DATA_PROVIDER, {
            rows: h,
            columnDescriptors: g,
            source: f
        });
        this._subscribe(a.NOTIFICATION_ACTION_SAVE_COLLABORATION_START, d.proxy(function(j) {
            this._view.addLoading()
        }
        , this));
        this._subscribe(a.NOTIFICATION_ACTION_SAVE_COLLABORATION_COMPLETE, d.proxy(function(n) {
            this._view.removeLoading();
            var l = c.Settings.home + "?collab=" + n.data.sn;
            alertify.reset();
            alertify.set({
                labels: {
                    ok: "",
                    cancel: "..."
                },
                buttonFocus: "ok"
            });
            alertify.confirm("" + l, function(p) {
                if (!p) {
                    _.delay(function() {
                        window.open(l, "_blank")
                    }
                    , 500)
                }
            }
            );
            var k = d("#alertify");
            var m = d(".alertify-button-ok", k);
            m.attr("data-clipboard-text", l);
            var j = ZeroClipboard(m);
            j.on("complete", function(p, q) {
                m[0].click();
                alertify.success("")
            }
            )
        }
        , this))
    }
    ;
    b.prototype.loadCollaboration = function() {
        this._action(a.ACTION_LOAD_COLLABORATION)
    }
}
)(jQuery);
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.analysisContainer.events.DataSourceEvent");
    var a = b.views.analysisContainer.events.DataSourceEvent = function(c, e, d) {
        a.superclass.constructor.apply(this, arguments)
    }
    ;
    andrea.blink.extend(a, andrea.blink.events.Event);
    a.DATA_PROVIDER_READY = "dataSourceReady";
    a.STATE_CHANGED = "stateChanged"
}
)();
(function() {
    var d = andrea.grace;
    var c = d.views.analysisContainer.events.DataSourceEvent;
    var a = d.views.components.MoreButton;
    andrea.blink.declare("andrea.grace.views.dataSources.DataSourceBase");
    var b = andrea.grace.views.dataSources.DataSourceBase = function(e) {
        b.superclass.constructor.apply(this, arguments);
        this._swfReady = false;
        this._state = b.STATE_NORMAL;
        this._progress = null ;
        this._options = null 
    }
    ;
    andrea.blink.extend(b, andrea.blink.mvc.View);
    b.STATE_NORMAL = "normal";
    b.STATE_LOADING = "loading";
    b.prototype.state = function(e) {
        if (arguments.length > 0) {
            this._state = e;
            this.dispatchEvent(new c(c.STATE_CHANGED,this));
            return this
        } else {
            return this._state
        }
    }
    ;
    b.prototype.progress = function(e) {
        if (arguments.length > 0) {
            this._progress = e;
            this.state(b.STATE_LOADING);
            return this
        } else {
            return this._progress
        }
    }
    ;
    b.prototype.keyword = function() {
        return null 
    }
    ;
    b.prototype._encode = function(f) {
        var e = JSON.stringify(f);
        e = e.replace(/%/g, "%25");
        e = e.replace(/\\/g, "%5C");
        e = e.replace(/\"/g, "%22");
        return e
    }
    ;
    b.prototype._decode = function(e) {
        e = e.replace(/%22/g, '"');
        e = e.replace(/%5C/g, "\\");
        e = e.replace(/%25/g, "%");
        return JSON.parse(e)
    }
    ;
    b.prototype._generateButton = function(h, f) {
        if (h.length === 0) {
            return
        }
        var e = h.addClass("grace-dataSource-main-example").css("background-color", f.color);
        var g = $("<div/>").appendTo(e).addClass("grace-dataSource-main-example-p1");
        var k = $("<div/>").appendTo(g).addClass("grace-dataSource-main-example-p1-caption");
        _.each(f.captions, function(m) {
            var n = e.height() - 25 * 2 + (f.captions.length - 1);
            n = Math.floor(n / f.captions.length);
            var l = $("<span/>").appendTo(k).text(m).css("font-size", n + "px");
            var p = 1;
            while (l.height() > (n + 2) || l.width() > (e.width() - 15)) {
                l.css("font-size", n - p + "px");
                p++
            }
            $("<br/>").appendTo(k).css("line-height", n + "px")
        }
        );
        k.children().last().detach();
        k.css({
            top: (h.height() - k.height()) / 2 + (f.link ? -2 : 4),
            left: (h.width() - k.width()) / 2
        });
        if (f.link) {
            var j = $("<a/>").appendTo(g).addClass("grace-dataSource-main-example-p2-download");
            j.text(f.link.text).css("color", "#fff");
            j.attr({
                target: "_blank",
                href: f.link.url,
                title: ""
            });
            j.on("click", function(l) {
                l.stopPropagation()
            }
            )
        }
    }
    ;
    b.prototype._swfReadyHandler = function() {
        this._swfReady = true
    }
    ;
    b.prototype._embedSWF = function(k, e, q, f, p, m, g) {
        var n = _.uniqueId("flashContent_");
        var j = {};
        j.quality = "high";
        j.bgcolor = "#ffffff";
        j.allowscriptaccess = "sameDomain";
        j.allowfullscreen = "true";
        j.wmode = f;
        var l = {};
        l.id = e;
        l.name = e;
        l.align = "middle";
        k.attr("id", n);
        swfobject.embedSWF(q, n, p, m, "11.0.0", null , g, j, l)
    }
    ;
    b.prototype._getSWF = function(e, g) {
        var f = $.proxy(function() {
            var h = $(e);
            if (h[0] && this._swfReady) {
                g(h[0])
            } else {
                _.delay(f, 100)
            }
        }
        , this);
        f()
    }
    ;
    b.prototype._stringDataReady = function(f, e) {
        var g = {
            rows: _.isString(f) ? this._decode(f) : f,
            columnDescriptors: _.isString(e) ? this._decode(e) : e,
            source: "excel"
        };
        this._dpReady(g)
    }
    ;
    b.prototype._dpReady = function(e) {
        this.dispatchEvent(new c(c.DATA_PROVIDER_READY,this,{
            dataProvider: e,
            dsInfo: this._options
        }))
    }
}
)();
(function() {
    var f = andrea.grace;
    var e = andrea.grace.views.dataSources.DataSourceBase;
    var a = f.views.components.MoreButton;
    var d = f.managers.Log;
    var c = f.managers.SerializeManager;
    andrea.blink.declare("andrea.grace.views.dataSources.File");
    var b = andrea.grace.views.dataSources.File = function(g) {
        b.superclass.constructor.apply(this, arguments);
        this._more = null ;
        this._hookupAPI();
        this._createChildren()
    }
    ;
    andrea.blink.extend(b, andrea.grace.views.dataSources.DataSourceBase);
    b.prototype.loadURL = function(g) {
        this._load(g)
    }
    ;
    b.prototype.keyword = function() {
        return "file"
    }
    ;
    b.prototype._load = function(g) {
        if (g.url) {
            this.state(e.STATE_LOADING);
            this._getSWF("#FileAccessor", $.proxy(function(h) {
                h.load(g.url)
            }
            , this))
        }
    }
    ;
    b.prototype._hookupAPI = function() {
        andrea.blink.declare("andrea.grace._api.dataSource.file");
        andrea.grace._api.dataSource.file.load = $.proxy(function(g) {
            _.defer($.proxy(this._load, this), g)
        }
        , this);
        andrea.grace._api.dataSource.file.faReadyCallback = $.proxy(function() {
            _.defer($.proxy(this._swfReadyHandler, this))
        }
        , this);
        andrea.grace._api.dataSource.file.faHoverCallback = $.proxy(function(g) {
            _.defer($.proxy(this._faHoverHandler, this), g)
        }
        , this);
        andrea.grace._api.dataSource.file.faClickCallback = $.proxy(function() {
            _.defer($.proxy(this._faClickHandler, this))
        }
        , this);
        andrea.grace._api.dataSource.file.faSelectCallback = $.proxy(function() {
            _.defer($.proxy(this._faSelectCallback, this))
        }
        , this);
        andrea.grace._api.dataSource.file.faCancelCallback = $.proxy(function() {
            _.defer($.proxy(this._faCancelHandler, this))
        }
        , this);
        andrea.grace._api.dataSource.file.faDataCallback = $.proxy(function(g, j, h) {
            _.defer($.proxy(this._faDataHandler, this), g, j, h);
            return true
        }
        , this);
        andrea.grace._api.dataSource.file.faSaveCallback = $.proxy(function(g) {
            _.defer($.proxy(this._faSaveHandler, this), g);
            return true
        }
        , this)
    }
    ;
    b.prototype._createChildren = function() {
        var n = this._$dom;
        n.addClass("grace-dataSource-main-analysis");
        this._generateButton(n, {
            color: "#7db500",
            captions: ["...", "Excel 2003, 2007; CSV"]
        });
        var k = swfobject.getFlashPlayerVersion();
        if (!k || k.major < 10) {
            n.on("click", $.proxy(function(h) {
                alert("PC")
            }
            , this));
            n.css("-webkit-filter", "grayscale(100%)")
        } else {
            var m = $("<div/>").appendTo(n);
            var j = n.width();
            var l = n.height();
            var g = f.Settings.fileAccessor;
            this._embedSWF($("<div/>").appendTo(m), g.name, g.swfURL, "transparent", j, l, {
                alpha: 0,
                width: j,
                height: l,
                readyCallback: "andrea.grace._api.dataSource.file.faReadyCallback",
                hoverCallback: "andrea.grace._api.dataSource.file.faHoverCallback",
                clickCallback: "andrea.grace._api.dataSource.file.faClickCallback",
                selectCallback: "andrea.grace._api.dataSource.file.faSelectCallback",
                cancelCallback: "andrea.grace._api.dataSource.file.faCancelCallback",
                dataCallback: "andrea.grace._api.dataSource.file.faDataCallback",
                saveURL: f.Settings.javaServer + "/dataSource/file",
                saveCallback: "andrea.grace._api.dataSource.file.faSaveCallback"
            });
            m.css({
                "z-index": 10000,
                position: "absolute",
                width: j,
                height: l
            })
        }
    }
    ;
    b.prototype._faHoverHandler = function(g) {
        if (!this._more) {
            return
        }
        if (g) {
            this._more.showP2()
        } else {
            this._more.showP1()
        }
    }
    ;
    b.prototype._faClickHandler = function() {
        this.state(e.STATE_LOADING)
    }
    ;
    b.prototype._faCancelHandler = function() {
        this.state(e.STATE_NORMAL)
    }
    ;
    b.prototype._faSelectCallback = function() {}
    ;
    b.prototype._faDataHandler = function(g, j, h) {
        d.interaction("dataSource", ["file", this._decode(g)].join(","));
        this._stringDataReady(j, h)
    }
    ;
    b.prototype._faSaveHandler = function(g) {
        g = JSON.parse(g);
        c.instance().saveDataSource({
            dataSource: "jsonp",
            url: f.Settings.javaServer + "/dataSource/file?name=" + g.json
        })
    }
}
)();
(function() {
    var d = andrea.grace;
    var c = andrea.grace.views.dataSources.DataSourceBase;
    var a = d.views.components.MoreButton;
    var b = d.managers.Log;
    andrea.blink.declare("andrea.grace.views.dataSources.DataSourceJSON");
    var e = andrea.grace.views.dataSources.DataSourceJSON = function(f) {
        e.superclass.constructor.apply(this, arguments);
        this._more = null ;
        this._hookupAPI()
    }
    ;
    andrea.blink.extend(e, andrea.grace.views.dataSources.DataSourceBase);
    e.prototype.loadURL = function(f) {
        this._load(f)
    }
    ;
    e.prototype.keyword = function() {
        return "json"
    }
    ;
    e.prototype._load = function(f) {
        if (f.url) {
            this.state(c.STATE_LOADING);
            this._options = f;
            $.ajax({
                url: f.url,
                dataType: "json"
            }).done($.proxy(function(g) {
                this._dpReady(g)
            }
            , this))
        }
    }
    ;
    e.prototype._hookupAPI = function() {
        andrea.blink.declare("andrea.grace._api.dataSource.json");
        andrea.grace._api.dataSource.json.load = $.proxy(function(f) {
            _.defer($.proxy(this._load, this), f)
        }
        , this)
    }
}
)();
(function() {
    var e = andrea.grace;
    var d = andrea.grace.views.dataSources.DataSourceBase;
    var a = e.views.components.MoreButton;
    var b = e.managers.Log;
    andrea.blink.declare("andrea.grace.views.dataSources.DataSourceJSONP");
    var c = andrea.grace.views.dataSources.DataSourceJSONP = function(f) {
        c.superclass.constructor.apply(this, arguments);
        this._more = null ;
        this._hookupAPI()
    }
    ;
    andrea.blink.extend(c, andrea.grace.views.dataSources.DataSourceBase);
    c.prototype.loadURL = function(f) {
        this._load(f)
    }
    ;
    c.prototype.keyword = function() {
        return "jsonp"
    }
    ;
    c.prototype._load = function(f) {
        if (f.url) {
            this.state(d.STATE_LOADING);
            this._options = f;
            $.ajax({
                url: f.url,
                dataType: "jsonp"
            }).done($.proxy(function(g) {
                this._dpReady(g)
            }
            , this))
        }
    }
    ;
    c.prototype._hookupAPI = function() {
        andrea.blink.declare("andrea.grace._api.dataSource.jsonp");
        andrea.grace._api.dataSource.jsonp.load = $.proxy(function(f) {
            _.defer($.proxy(this._load, this), f)
        }
        , this)
    }
}
)();
(function() {
    var g = andrea.grace;
    var f = g.utils.URLUtil;
    var e = g.managers.Log;
    var c = g.utils.Stopwatch;
    var k = g.constants.TaobaoAPI;
    var j = g.utils.ConverterType;
    var d = g.constants.AnalysisType;
    var b = g.Settings.dataSource.taobao;
    var h = b.environments[b.environment];
    andrea.blink.declare("andrea.grace.views.dataSources.Taobao");
    var a = andrea.grace.views.dataSources.Taobao = function(l) {
        a.superclass.constructor.apply(this, arguments);
        this._watch = null ;
        this._hookupAPI();
        this._createChildren()
    }
    ;
    andrea.blink.extend(a, andrea.grace.views.dataSources.DataSourceBase);
    a.prototype.loadURL = function(l) {
        if (l.taobao_user_nick) {
            this.state(DataSourceBase.STATE_LOADING);
            this._load(l)
        } else {
            if (l.code && l.codeOverdue !== "true") {
                this.state(DataSourceBase.STATE_LOADING);
                $.ajax({
                    url: g.Settings.javaServer + "/java/taobao/oauth?method=token",
                    dataType: "jsonp",
                    data: {
                        code: l.code,
                        state: l.state,
                        appKey: h.appKey,
                        redirect_uri: h.redirect
                    }
                }).done($.proxy(function(m) {
                    e.interaction("dataSource", ["taobao", JSON.stringify(m)].join(","));
                    window.location.hash = "codeOverdue=true";
                    this._load(m)
                }
                , this)).fail($.proxy(function() {
                    e.console("taobao token fail.")
                }
                , this))
            } else {
                if (l.error) {
                    e.interaction("authorizeError", [l.error, l.error_description.replace(/,/g, "|")]);
                    if (l.error === "invalid_client") {
                        alertify.prompt("", function(n, p) {
                            if (n) {
                                var m = p;
                                e.interaction("authorize", [m, "", "taobao"]);
                                alertify.alert("")
                            } else {}
                        }
                        )
                    }
                }
            }
        }
    }
    ;
    a.prototype.keyword = function() {
        return "taobao"
    }
    ;
    a.prototype._hookupAPI = function() {
        andrea.blink.declare("andrea.grace._api.dataSource.taobao");
        andrea.grace._api.dataSource.taobao.load = $.proxy(function(l) {
            _.defer($.proxy(this._load, this), l)
        }
        , this)
    }
    ;
    a.prototype._load = function(l) {
        this._options = l;
        this._watch = new c([l.taobao_user_id, l.taobao_user_nick].join(","),true);
        e.interaction("dataSource", ["taobao", l.taobao_user_id, l.taobao_user_nick].join(","));
        $.ajax({
            url: b.serviceURL,
            dataType: "jsonp",
            data: {
                nick: l.taobao_user_nick
            }
        }).done($.proxy(function(v) {
            e.performance("loadTaobaoTrades", [this._watch.type, "loadData", this._watch.lap()].join(","));
            var w, u, s;
            var x = v;
            var B = [];
            var q = this._generateColumnDescriptors();
            for (w = 0; w < x.length; w++) {
                var y = x[w];
                var r = y.orders;
                for (u = 0; u < r.length; u++) {
                    var n = r[u];
                    var A = [];
                    for (s = q.length - 1; s >= 0; s--) {
                        var p = q[s];
                        var m = p.id;
                        var z = m.split(".");
                        if (z[0] === "orders") {
                            m = z[1];
                            A[s] = k.toCaption(n[m], "order", m)
                        } else {
                            m = z[0];
                            A[s] = k.toCaption(y[m], "trade", m)
                        }
                    }
                    B.push(A)
                }
            }
            e.performance("loadTaobaoTrades", [this._watch.type, "parseComplete", this._watch.lap(true), this._watch.total()].join(","));
            this._dpReady({
                rows: B,
                columnDescriptors: q,
                source: "taobao"
            })
        }
        , this))
    }
    ;
    a.prototype._createChildren = function() {
        var l = this._$dom.clone().appendTo(this._$dom);
        l.on("click", $.proxy(function(m) {
            this._authorize()
        }
        , this));
        this._generateButton(l, {
            color: "#ff692f",
            captions : ['/', '']
        });
        l.css({
            'cursor' : 'default',
            'filter' : 'gray', /* IE6-9 */
            '-webkit-filter' : 'grayscale(100%)' /* Chrome 19+, Safari 6+, Safari 6+ iOS */
        });
    }
    ;
    a.prototype._authorize = function() {
        var l = [];
        l.push(["client_id", h.appKey].join("="));
        l.push(["response_type", "code"].join("="));
        l.push(["redirect_uri", h.redirect + "?dataSource=taobao"].join("="));
        window.location.href = "https://oauth.taobao.com/authorize?" + l.join("&")
    }
    ;
    a.prototype._generateColumnDescriptors = function() {
        var m = [];
        var l = function(r, q, p, n) {
            return {
                id: r,
                name: q,
                converterType: p,
                analysisType: n
            }
        }
        ;
        m.push(l("created", "", j.DATE_IN_TEXT, d.DIMENSION));
        m.push(l("status", "", j.STRING, d.DIMENSION));
        m.push(l("receiver_state", "", j.STRING, d.DIMENSION));
        m.push(l("receiver_city", "", j.STRING, d.DIMENSION));
        m.push(l("has_yfx", "", j.BOOLEAN, d.DIMENSION));
        m.push(l("trade_from", "", j.STRING, d.DIMENSION));
        m.push(l("orders.title", "", j.STRING, d.DIMENSION));
        m.push(l("orders.logistics_company", "", j.STRING, d.DIMENSION));
        m.push(l("orders.total_fee", "", j.NUMBER, d.MEASURE));
        m.push(l("orders.price", "", j.NUMBER, d.MEASURE));
        m.push(l("orders.num", "", j.NUMBER, d.MEASURE));
        return m
    }
}
)();
(function() {
    var f = andrea.grace;
    var e = f.utils.URLUtil;
    var a = andrea.grace.views.dataSources.DataSourceBase;
    var d = f.managers.Log;
    var b = f.utils.Stopwatch;
    var j = f.constants.JingdongAPI;
    var h = f.utils.ConverterType;
    var c = f.constants.AnalysisType;
    andrea.blink.declare("andrea.grace.views.dataSources.Jingdong");
    var g = andrea.grace.views.dataSources.Jingdong = function(k) {
        g.superclass.constructor.apply(this, arguments);
        this._watch = null ;
        this._accessToken = null ;
        this._rows = [];
        this._columnDescriptors = this._generateColumnDescriptors();
        this._hookupAPI();
        this._createChildren()
    }
    ;
    andrea.blink.extend(g, andrea.grace.views.dataSources.DataSourceBase);
    g.prototype.loadURL = function(l) {
        var k = f.Settings.dataSource.jingdong;
        if (l.code && l.codeOverdue !== "true") {
            this._options = l;
            $.ajax({
                url: f.Settings.javaServer + "/dataAccessor/jd?method=token",
                dataType: "jsonp",
                data: {
                    oauth: k.oauth,
                    code: l.code,
                    state: l.state,
                    appKey: k.appKey,
                    redirect_uri: k.redirect + "?dataSource=jd"
                }
            }).done($.proxy(function(m) {
                d.interaction("dataSource", ["jingdong", JSON.stringify(m)].join(","));
                window.location.hash = "codeOverdue=true";
                this._accessToken = m.access_token;
                this._loadOrders();
                this._logUser()
            }
            , this)).fail($.proxy(function() {
                d.console("jingdong token fail.")
            }
            , this));
            this.state(a.STATE_LOADING)
        } else {
            if (l.error) {}
        }
    }
    ;
    g.prototype.keyword = function() {
        return "jd"
    }
    ;
    g.prototype._hookupAPI = function() {
        andrea.blink.declare("andrea.grace._api.dataSource.jingdong");
        andrea.grace._api.dataSource.jingdong.load = $.proxy(function(k) {
            _.defer($.proxy(this._load, this), k)
        }
        , this)
    }
    ;
    g.prototype._load = function(k) {
        this.state(a.STATE_LOADING);
        var l = f.Settings.dataSource.jingdong;
        l.appKey = k.appKey || l.appKey;
        this._accessToken = k.access_token;
        this._loadOrders()
    }
    ;
    g.prototype._logUser = function(k) {
        var l = f.Settings.dataSource.jingdong;
        $.ajax({
            url: f.Settings.nodeServer + "/node/jd/user/create",
            dataType: "jsonp",
            data: {
                app_key: l.appKey,
                access_token: this._accessToken,
                user_id: k
            }
        })
    }
    ;
    g.prototype._loadOrders = function() {
        this._watch = new b(["jingdong"].join(","),true);
        var n = f.Settings.dataSource.jingdong;
        var k = new Date();
        var p = new Date();
        p.setMonth(p.getMonth() - 1);
        var m = [];
        m.push("vender_id");
        var l = {};
        _.each(this._columnDescriptors, function(r) {
            var q = r.id.split(".");
            var s = q[0];
            if (q.length === 1) {
                m.push(s)
            } else {
                if (!l[s]) {
                    if (s === "consignee_info") {
                        m.push(s)
                    } else {
                        m.push(s + "_list")
                    }
                    l[s] = true
                }
            }
        }
        );
        $.ajax({
            url: f.Settings.javaServer + "/dataAccessor/jd?method=access",
            data: {
                api: n.api,
                token: this._accessToken,
                appKey: n.appKey,
                start_date: p.format("yyyy-MM-dd HH:mm:ss"),
                end_date: k.format("yyyy-MM-dd HH:mm:ss"),
                optional_fields: m.join(",")
            },
            dataType: "jsonp"
        }).done($.proxy(function(r) {
            _.each(r, $.proxy(function(s) {
                _.each(s, $.proxy(function(t) {
                    this._dataHandler(t)
                }
                , this))
            }
            , this));
            if (this._rows.length === 0) {
                var q = prompt("");
                d.interaction("authorize", ["jingdong", q]);
                this.state(a.STATE_NORMAL)
            } else {
                this._completeHandler()
            }
        }
        , this))
    }
    ;
    g.prototype._createChildren = function() {
        var k = this._$dom.clone().appendTo(this._$dom);
        k.on("click", $.proxy(function(l) {
            // this._authorize()
        }
        , this));
        this._generateButton(k, {
            color: "#00569b",
            captions : ['', '']
        });
        k.css({
            'cursor' : 'default',
            'filter' : 'gray', /* IE6-9 */
            '-webkit-filter' : 'grayscale(100%)' /* Chrome 19+, Safari 6+, Safari 6+ iOS */
        });
    }
    ;
    g.prototype._authorize = function() {
        var l = f.Settings.dataSource.jingdong;
        var k = [];
        k.push(["client_id", l.appKey].join("="));
        k.push(["response_type", "code"].join("="));
        k.push(["redirect_uri", l.redirect + "?dataSource=jd"].join("="));
        window.location.href = l.oauth + "/authorize?" + k.join("&")
    }
    ;
    g.prototype._generateColumnDescriptors = function() {
        var l = [];
        var k = function(q, p, n, m) {
            return {
                id: q,
                name: p,
                converterType: n,
                analysisType: m
            }
        }
        ;
        l.push(k("order_start_time", "", h.DATE_IN_TEXT, c.DIMENSION));
        l.push(k("order_state", "", h.STRING, c.DIMENSION));
        l.push(k("pay_type", "", h.STRING, c.DIMENSION));
        l.push(k("item_info.sku_name", "+SKU", h.STRING, c.DIMENSION));
        l.push(k("order_end_time", "", h.DATE_IN_TEXT, c.DIMENSION));
        l.push(k("consignee_info.province", "", h.STRING, c.DIMENSION));
        l.push(k("coupon_detail.coupon_type", "", h.STRING, c.DIMENSION));
        l.push(k("order_state_remark", "", h.STRING, c.DIMENSION));
        l.push(k("delivery_type", "", h.STRING, c.DIMENSION));
        l.push(k("item_info.gift_point", "", h.STRING, c.DIMENSION));
        l.push(k("order_total_price", "", h.NUMBER, c.MEASURE));
        l.push(k("order_payment", "", h.NUMBER, c.MEASURE));
        l.push(k("order_seller_price", "", h.NUMBER, c.MEASURE));
        l.push(k("seller_discount", "", h.NUMBER, c.MEASURE));
        l.push(k("freight_price", "", h.NUMBER, c.MEASURE));
        l.push(k("item_info.item_total", "", h.NUMBER, c.MEASURE));
        return l
    }
    ;
    g.prototype._dataHandler = function(m) {
        var l;
        if (m.error_response) {
            d.interaction("dataHandler", ["jingdong", "error_response", m.error_response.en_desc]);
            return
        }
        m = m.order_search_response;
        if (m && m.order_search) {
            d.interaction("dataHandler", ["jingdong", "order_search", m.order_search.order_total]);
            var n = null ;
            var r = this._columnDescriptors;
            var q = this._rows;
            var p = m.order_search.order_info_list;
            _.each(p, function(s) {
                n = n || s.vender_id;
                var k = s.item_info_list;
                _.each(k, function(t) {
                    var w = [];
                    for (l = r.length - 1; l >= 0; l--) {
                        var v = r[l];
                        var x = v.id;
                        var u = x.split(".");
                        if (u[0] === "item_info_list") {
                            x = u[1];
                            w[l] = j.toCaption(t[x], "item", x)
                        } else {
                            if (u[0] === "consignee_info") {
                                x = u[1];
                                w[l] = j.toCaption(s.consignee_info[x], "consignee", x)
                            } else {
                                if (u[0] === "coupon_detail_list") {
                                    x = u[1];
                                    w[l] = j.toCaption(s.coupon_detail_list[0][x], "coupon", x)
                                } else {
                                    x = u[0];
                                    w[l] = j.toCaption(s[x], "order", x)
                                }
                            }
                        }
                    }
                    q.push(w)
                }
                )
            }
            );
            if (n) {
                this._logUser(n)
            }
        }
    }
    ;
    g.prototype._completeHandler = function() {
        d.performance("loadJingdongOrders", [this._watch.type, "loadComplete", this._watch.lap(true), this._watch.total()].join(","));
        this._dpReady({
            rows: this._rows,
            columnDescriptors: this._columnDescriptors,
            source: "jingdong"
        })
    }
}
)();
(function() {
    var b = andrea.grace;
    andrea.blink.declare("andrea.grace.views.dataSources.Customize");
    var a = andrea.grace.views.dataSources.Customize = function(c) {
        a.superclass.constructor.apply(this, arguments);
        this._createChildren()
    }
    ;
    andrea.blink.extend(a, andrea.grace.views.dataSources.DataSourceBase);
    a.prototype._createChildren = function() {
        var c = this._$dom;
        c.on("click", $.proxy(function(d) {
            window.location.href = "mailto:andiris29@gmail.com?subject=&body=<2"
        }
        , this));
        this._generateButton(c, {
            color: "#3498db",
            captions: ["", ""]
        })
    }
}
)();
(function() {
    var d = andrea.grace;
    var a = d.managers.Log;
    var b = andrea.grace.views.dataSources.DataSourceBase;
    andrea.blink.declare("andrea.grace.views.dataSources.Sample");
    var c = andrea.grace.views.dataSources.Sample = function(f, e) {
        c.superclass.constructor.apply(this, arguments);
        this._settings = e;
        this._createChildren()
    }
    ;
    andrea.blink.extend(c, andrea.grace.views.dataSources.DataSourceBase);
    c.prototype._createChildren = function() {
        var e = this._settings;
        var f = this._$dom;
        f.on("click", $.proxy(function(g) {
            this._loadEg(e.json, e.name)
        }
        , this));
        this._generateButton(f, {
            color: "#e74c3c",
            captions: e.captions,
            link: {
                text: "",
                url: e.download
            }
        })
    }
    ;
    c.prototype._loadEg = function(f, e) {
        this.state(b.STATE_LOADING);
        d.api.dataSource.load("json", {
            url: f
        });
        a.interaction("dataSource", ["sample", e].join(","))
    }
}
)();
(function() {
    var r = andrea.grace;
    var h = r.views.components.MoreButton;
    var d = r.views.analysisContainer.events.DataSourceEvent;
    var a = r.utils.URLUtil;
    var j = r.views.popUp.Loading;
    var m = r.managers.Log;
    var t = andrea.grace.views.dataSources.DataSourceBase;
    var l = andrea.grace.views.dataSources.DataSourceJSON;
    var s = andrea.grace.views.dataSources.DataSourceJSONP;
    var b = andrea.grace.views.dataSources.File;
    var k = andrea.grace.views.dataSources.Taobao;
    var g = andrea.grace.views.dataSources.Jingdong;
    var n = andrea.grace.views.dataSources.Customize;
    var p = andrea.grace.views.dataSources.Sample;
    var f = r.models.DataDiscoveryModel;
    var c = r.managers.SerializeManager;
    var q = {
        sources: {
            container: {
                numCells: {
                    horizontal: 2,
                    vertical: 3
                },
                gap: {
                    horizontal: 10,
                    vertical: 10
                },
                cell: {
                    width: 140,
                    height: 100
                }
            },
            taobao: [0, 2, 1, 1],
            jingdong: [1, 2, 1, 1],
            file: [1, 1, 1, 1],
            samples: {
                superMarket: [0, 0, 1, 1],
                worldBank: [1, 0, 1, 1]
            }
        },
        guide: {
            video: {
                src: "",
                poster: "",
                width: "",
                height: ""
            }
        }
    };
    q.sources.samples = q.sources.samples || {};
    andrea.blink.declare("andrea.grace.DataSource");
    var e = r.DataSource = function(u) {
        e.superclass.constructor.apply(this, arguments);
        this._$main = $("#divDataSourceMain", this._dom);
        this._$main.empty();
        this._$main.css({
            height: this._$dom.height() - 48 - 66
        });
        this._$header = $("#divHeader", this._dom);
        this._$header.on("click", function() {
            window.location.href = r.Settings.home
        }
        );
        this._loading = null ;
        this._dsMap = {};
        this._json = null ;
        this._file = null ;
        this._taobao = null ;
        this._jingdong = null ;
        var B = q.sources.container;
        var D = this._generateCell(0, 0, B.numCells.horizontal, B.numCells.vertical).addClass("grace-dataSource-main-container").appendTo(this._$main);
        D.css({
            position: "absolute",
            left: (this._$main.width() - D.width()) / 2,
            top: (this._$main.height() - D.height()) / 2
        });
        if (q.guide.video) {
            var v = {
                width: 480,
                height: 270
            };
            var y = $("<div/>").appendTo(this._$main);
            y.css({
                position: "absolute",
                left: (this._$main.width() - 800) / 2,
                top: Math.max(12, (this._$main.height() - D.height()) / 2 - 60)
            });
            D.css({
                left: parseFloat(D.css("left")) + v.width / 2 + 6,
                top: (this._$main.height() - D.height()) / 2 + 0
            });
            var w = $("<video controls/>");
            w.addClass("video-js vjs-default-skin vjs-big-play-centered");
            w.attr({
                id: "videoGuide",
                preload: "none",
                width: v.width,
                height: v.height,
                poster: "./DataDiscovery/assets/videos/guide_poster.jpg",
                "data-setup": "{}"
            });
            var z = $("<source/>").appendTo(w);
            z.attr({
                src: "./DataDiscovery/assets/videos/guide.mp4",
                type: "video/mp4"
            });
            w.appendTo(y)
        }
        if ($.browser.webkit) {
            this._createChildren(D)
        } else {
            alertify.reset();
            alertify.set({
                delay: 1000 * 60 * 60
            });
            alertify.error("");
            var E = this._generateCell(0, 0, 3, 2).appendTo(D);
            E.text("...").addClass("grace-dataSource-chrome");
            E.css("line-height", E.height() + "px");
            E.on("click", $.proxy(function(F) {
                window.location = r.Settings.chrome.localURL
            }
            , this));
            var A = $("<a/>").appendTo(D).addClass("grace-dataSource-chrome-official");
            A.text("").css("color", "#ffffff");
            A.attr({
                target: "_blank",
                href: r.Settings.chrome.officialURL
            }).on("click", function(F) {
                F.stopPropagation()
            }
            )
        }
        var C = a.hashPairs();
        if (C.dataSource && this._dsMap[C.dataSource]) {
            var x = this._dsMap[C.dataSource];
            x.loadURL(C)
        } else {
            if (C.collab) {
                c.instance().deserialize(C.collab)
            }
        }
        this._hookupAPI()
    }
    ;
    andrea.blink.extend(e, andrea.blink.mvc.View);
    e.prototype.destroy = function() {
        if (this._loading) {
            this._loading.close();
            this._loading = null 
        }
        if (q.guide.video) {
            videojs("videoGuide").dispose()
        }
    }
    ;
    e.prototype._hookupAPI = function() {
        andrea.blink.declare("andrea.grace._api.dataSource.dataProvider");
        andrea.grace._api.dataSource.dataProvider.load = $.proxy(function(u) {
            _.defer($.proxy(this._dpReady, this), u, null )
        }
        , this)
    }
    ;
    e.prototype._dpReady = function(v, u) {
        this.dispatchEvent(new d(d.DATA_PROVIDER_READY,this,{
            dataProvider: v,
            dsInfo: u
        }))
    }
    ;
    e.prototype._listen = function(u) {
        u.addEventListener(d.STATE_CHANGED, function(w) {
            if (u.state() === t.STATE_LOADING) {
                var v = u.progress();
                if (!this._loading) {
                    if (v !== null ) {
                        this._loading = new j($("<div/>"),"")
                    } else {
                        this._loading = new j($("<div/>"))
                    }
                    this._loading.open(this._$main, true)
                }
                if (v !== null ) {
                    this._loading.percent(v)
                }
            } else {
                if (this._loading) {
                    this._loading.close();
                    this._loading = null 
                }
            }
        }
        , this);
        u.addEventListener(d.DATA_PROVIDER_READY, function(v) {
            this._dpReady(v.data.dataProvider, v.data.dsInfo)
        }
        , this);
        return u
    }
    ;
    e.prototype._createChildren = function(v) {
        var u = $.proxy(function(w, y, x) {
            var A = null ;
            if (y) {
                A = this._generateCell(y[0], y[1], y[2], y[3], v)
            }
            var z = new w(A,x);
            this._listen(z);
            if (z.keyword()) {
                this._dsMap[z.keyword()] = z
            }
            return z
        }
        , this);
        u(l, q.sources.json);
        u(s, q.sources.jsonp);
        u(b, q.sources.file);
        u(k, q.sources.taobao);
        u(g, q.sources.jingdong);
        u(n, q.sources.customize);
        u(p, q.sources.samples.superMarket, {
            name: "SuperMarket",
            json: r.Settings.data.superMarket.json,
            captions: ["[] ", ""],
            description: "",
            download: r.Settings.data.superMarket.excel
        });
        u(p, q.sources.samples.worldBank, {
            name: "WorldBank",
            json: r.Settings.data.worldBank.json,
            captions: ["[] ", ""],
            description: "",
            download: r.Settings.data.worldBank.excel
        })
    }
    ;
    e.prototype._generateCell = function(C, z, D, u, F) {
        var A = q.sources.container;
        var B = A.gap;
        var E = A.cell;
        var v = $("<div/>");
        v.css({
            width: E.width * D + B.horizontal * (D - 1) + "px",
            height: E.height * u + B.vertical * (u - 1) + "px",
            left: C * (E.width + B.horizontal) + "px",
            top: z * (E.height + B.vertical) + "px"
        });
        v.appendTo(F);
        return v
    }
}
)();
(function() {
    var g = andrea.grace;
    var e = g.helpers.PageTransition;
    var f = g.views.analysisContainer.events.DataSourceEvent;
    var c = g.managers.Log;
    var h = g.utils.URLUtil;
    var d = g.models.DataDiscoveryModel;
    var b = g.managers.SerializeManager;
    andrea.blink.declare("andrea.grace.Grace");
    var a = g.Grace = function(j, k) {
        var l = h.hashPairs();
        c.user = l.andrea_user ? l.andrea_user : "user";
        c.interaction("open", JSON.stringify($.browser));
        $($.proxy(function() {
            LazyLoad.js(j, $.proxy(function() {
                if (k && k.length) {
                    LazyLoad.css(k, $.proxy(this._jsReady, this))
                } else {
                    this._jsReady()
                }
            }
            , this));
            this._$dataSource = $("#divDataSource");
            this._$dataDiscovery = $("#divDataDiscovery");
            $("#divMain", this._$dataDiscovery).bind("selectstart", function() {
                return false
            }
            );
            var m = this._dataSource = new g.DataSource(this._$dataSource[0]);
            m.addEventListener(f.DATA_PROVIDER_READY, this._dataSourceDataSourceReadyHandler, this)
        }
        , this));
        this._dataSource = null ;
        this._$dataSource = null ;
        this._$dataDiscovery = null ;
        this._lazyLoading = true;
        this._dp = null ;
        this._dsInfo = null ;
        this._startup()
    }
    ;
    a.prototype._startup = function() {}
    ;
    a.prototype._dataSourceDataSourceReadyHandler = function(j) {
        this._dp = j.data.dataProvider;
        this._dsInfo = j.data.dsInfo;
        this._gotoDataDiscovery()
    }
    ;
    a.prototype._jsReady = function() {
        ZeroClipboard.config({
            moviePath: g.Settings.zeroClipboard.moviePath
        });
        this._lazyLoading = false;
        this._gotoDataDiscovery()
    }
    ;
    a.prototype._gotoDataDiscovery = function() {
        if (!this._dp) {
            return
        }
        if (this._lazyLoading) {
            return
        }
        this._dataSource.destroy();
        var j = new g.DataDiscovery(this._$dataDiscovery[0]);
        b.instance().saveDataSource(this._dsInfo);
        j.rowBasedDataProvider(this._dp.rows, this._dp.columnDescriptors, this._dp.source);
        var k = new e({
            "$page": this._$dataSource,
            classes: ["pt-page-scaleDownCenter"]
        },{
            "$page": this._$dataDiscovery,
            classes: ["pt-page-scaleUpCenter"],
            delay: 180
        },$.proxy(function() {
            this._$dataSource.css({
                "z-index": -1,
                width: "0px",
                height: "0px",
                overflow: "hidden"
            });
            j.loadCollaboration()
        }
        , this));
        _.defer(function() {
            k.play()
        }
        )
    }
}
)();
